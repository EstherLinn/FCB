@using Foundation.Wealth.Helper
@using Feature.Wealth.Component.Models.Invest
@model Feature.Wealth.Component.Models.FundSearch.FundSearchViewModel

<div class="l-mainstage">
    <div class="l-mainstage__wrap">
        <div class="l-mainstage__title">
            <h1 class="t-title">基金搜尋</h1>
        </div>
        <div class="l-mainstage__content">
            <!-- 篩選最外層[data-filter-block] -->
            <div class="l-filter no-picked" data-filter-block>
                <div class="l-filter__block">
                    <!-- 收合區域[data-filter] -->
                    <div class="c-filter is-collapse" data-filter>
                        <div class="c-filter__search">
                            <!-- 條件群組[data-filter-group] -->
                            <div class="c-filterForm" data-filter-group>
                                <!-- 條件群組標題[data-filter-title]，需要顯示在tag的文字請用<span>包起來 -->
                                <div class="c-filterForm__title u-hidden" data-filter-title>
                                    <span>關鍵字</span>
                                </div>
                                <div class="c-filterForm__value">
                                    <div class="o-actionbox o-actionbox--lg" data-clear="true">
                                        <input insertKeywords eh-search-pageid="@Sitecore.Context.Item.ID.Guid" eh-search-type="Fund" id="keyword" type="search" class="o-actionbox__input" data-clear="textbox" placeholder="請輸入代碼或名稱" data-keyword-input>
                                        <button type="submit" class="o-actionbox__btn o-actionbox__btn--magnifier" data-keyword-submit></button>
                                        <button type="button" class="o-actionbox__clear" data-clear="button">清除</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        @if (Model.HotKeywordTags != null && Model.HotKeywordTags.Count > 0)
                        {
                            <div class="c-filter__keyword">
                                <!-- 條件群組[data-filter-group] -->
                                <div class="c-filterForm" data-filter-group>
                                    <!-- 條件群組標題[data-filter-title]，需要顯示在tag的文字請用<span>包起來 -->
                                    <div class="c-filterForm__title" data-filter-title>
                                        <span>熱門關鍵字</span>
                                    </div>
                                    <div class="c-filterForm__value">
                                        <div class="l-pickGroup" id="hotkey_criteria">
                                            @foreach (string tag in Model.HotKeywordTags)
                                            {
                                                <div class="l-pickGroup__item">
                                                    <label class="o-btnCheckBox o-btnCheckBox--gn" data-filter-checkbox>
                                                        <input class="o-btnCheckBox__input" type="checkbox" value="@tag">
                                                        <div class="o-btnCheckBox__text" data-filter-value="@tag"></div>
                                                    </label>
                                                </div>
                                            }
                                        </div>
                                    </div>
                                </div>
                            </div>
                        }
                        <!-- 小網收合區域[data-filter-hide="mobile"] -->
                        <div class="c-filter__mbHide" data-filter-hide="mobile">
                            <div class="c-filter__head">
                                進階篩選
                            </div>
                            <!-- 大小網展開收合功能觸發點[data-filter-collapse] -->
                            <a href="#" class="c-filter__close" data-filter-collapse></a>
                            <div class="c-filter__wrap">
                                <div class="c-filter__group">
                                    <!-- 條件群組[data-filter-group] -->
                                    <div class="c-filterForm" data-filter-group>
                                        <!-- 條件群組標題[data-filter-title]，需要顯示在tag的文字請用<span>包起來 -->
                                        <div class="c-filterForm__title" data-filter-title>
                                            <span>熱門商品</span>
                                        </div>
                                        <div class="c-filterForm__value">
                                            <div class="l-pickGroup" id="hotproducts_criteria">

                                                @if (Model.TopicNameTags != null)
                                                {
                                                    foreach (string tag in Model.TopicNameTags)
                                                    {
                                                        <div class="l-pickGroup__item">
                                                            <label class="o-btnCheckBox o-btnCheckBox--og" data-filter-checkbox>
                                                                <input class="o-btnCheckBox__input" type="checkbox" value="@tag">
                                                                <div class="o-btnCheckBox__text" data-filter-value="@tag"></div>
                                                            </label>
                                                        </div>
                                                    }
                                                }


                                                @if (Model.HotProductTags != null)
                                                {
                                                    foreach (string tag in Model.HotProductTags)
                                                    {
                                                        <div class="l-pickGroup__item">
                                                            <label class="o-btnCheckBox o-btnCheckBox--og" data-filter-checkbox>
                                                                <input class="o-btnCheckBox__input" type="checkbox" value="@tag">
                                                                <div class="o-btnCheckBox__text" data-filter-value="@tag"></div>
                                                            </label>
                                                        </div>
                                                    }
                                                }


                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="c-filter__group c-filter__group--divider">
                                    <div class="l-flex u-flex-col u-flex-gap-lg u-flex-gap-max@mb-only">
                                        <div class="l-flex__item">
                                            <!-- 條件群組[data-filter-group] -->
                                            <div class="c-filterForm" data-filter-group>
                                                <!-- 條件群組標題[data-filter-title]，需要顯示在tag的文字請用<span>包起來 -->
                                                <div class="c-filterForm__title" data-filter-title>
                                                    <span>國內/境外</span>
                                                </div>
                                                <div class="c-filterForm__value">
                                                    <div class="l-pickGroup" id="DomesticForeignFundIndicator">
                                                        <div class="l-pickGroup__all">
                                                            <!-- 全部checkbox[data-filter-checkall] -->
                                                            <label class="o-btnCheckBox">
                                                                <input class="o-btnCheckBox__input" type="checkbox" checked data-filter-checkall value="all">
                                                                <div class="o-btnCheckBox__text">全部</div>
                                                            </label>
                                                        </div>
                                                        <div class="l-pickGroup__wrap">
                                                            <!-- 展開收合功能最外層[data-overflow-hide="相對應ID"] -->
                                                            <div class="l-pickCollapse" data-overflow-hide="area">
                                                                <!-- 高度過高內容區[data-overflow-content="相對應ID"] -->
                                                                <div class="l-pickCollapse__content" data-overflow-content="area">
                                                                    <div class="l-pickGroup">
                                                                        <div class="l-pickGroup__item">
                                                                            <label class="o-btnCheckBox" data-filter-checkbox>
                                                                                <input class="o-btnCheckBox__input" type="checkbox" value="D">
                                                                                <div class="o-btnCheckBox__text" data-filter-value="國內"></div>
                                                                            </label>
                                                                        </div>
                                                                        <div class="l-pickGroup__item">
                                                                            <label class="o-btnCheckBox" data-filter-checkbox>
                                                                                <input class="o-btnCheckBox__input" type="checkbox" value="O">
                                                                                <div class="o-btnCheckBox__text" data-filter-value="境外"></div>
                                                                            </label>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="l-pickCollapse__expand">
                                                                    <div class="l-pickCollapse__btn l-pickCollapse__btn--pc">
                                                                        <!-- 展開收合觸發點[data-overflow-action="相對應ID"] -->
                                                                        <a href="#" class="o-prefixLink o-prefixLink--down o-prefixLink--sm" data-overflow-action="area">展開</a>
                                                                    </div>
                                                                    <div class="l-pickCollapse__btn l-pickCollapse__btn--mb">
                                                                        <!-- 展開收合觸發點[data-overflow-action="相對應ID"] -->
                                                                        <a href="#" class="o-collapseBtn o-collapseBtn--down" data-overflow-action="area"></a>
                                                                    </div>
                                                                </div>
                                                                <div class="l-pickCollapse__collapse">
                                                                    <div class="l-pickCollapse__btn l-pickCollapse__btn--pc">
                                                                        <!-- 展開收合觸發點[data-overflow-action="相對應ID"] -->
                                                                        <a href="#" class="o-prefixLink o-prefixLink--up o-prefixLink--sm" data-overflow-action="area">收合</a>
                                                                    </div>
                                                                    <div class="l-pickCollapse__btn l-pickCollapse__btn--mb">
                                                                        <!-- 展開收合觸發點[data-overflow-action="相對應ID"] -->
                                                                        <a href="#" class="o-collapseBtn o-collapseBtn--up" data-overflow-action="area"></a>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="l-flex__item">
                                            <div class="c-filterForm" data-filter-group id="FundType">
                                                <div class="c-filterForm__title" data-filter-title>
                                                    <span>基金類型</span>
                                                </div>
                                                <div class="c-filterForm__value">
                                                    <div class="l-pickGroup" id="fundtype_criteria">
                                                        <div class="l-pickGroup__all">
                                                            <label class="o-btnCheckBox">
                                                                <input class="o-btnCheckBox__input" type="checkbox" checked data-filter-checkall value="all">
                                                                <div class="o-btnCheckBox__text">全部</div>
                                                            </label>
                                                        </div>
                                                        <div class="l-pickGroup__wrap">
                                                            <div class="l-pickCollapse" data-overflow-hide="fundType">
                                                                <div class="l-pickCollapse__content" data-overflow-content="fundType">
                                                                    <div class="l-pickGroup">
                                                                        @foreach (string type in Model.SearchBarData.FundTypeNames)
                                                                        {
                                                                            if (!string.IsNullOrEmpty(type))
                                                                            {
                                                                                <div class="l-pickGroup__item">
                                                                                    <label class="o-btnCheckBox" data-filter-checkbox>
                                                                                        <input class="o-btnCheckBox__input" type="checkbox" value="@type">
                                                                                        <div class="o-btnCheckBox__text" data-filter-value="@type"></div>
                                                                                    </label>
                                                                                </div>
                                                                            }
                                                                        }

                                                                        <div class="l-pickGroup__item" style="display:none;">
                                                                            <label class="o-btnCheckBox" data-filter-checkbox>
                                                                                <input class="o-btnCheckBox__input" type="checkbox" value="">
                                                                                <div class="o-btnCheckBox__text" data-filter-value=""></div>
                                                                            </label>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="l-pickCollapse__expand">
                                                                    <div class="l-pickCollapse__btn l-pickCollapse__btn--pc">
                                                                        <a href="#" class="o-prefixLink o-prefixLink--down o-prefixLink--sm" data-overflow-action="fundType">展開</a>
                                                                    </div>
                                                                    <div class="l-pickCollapse__btn l-pickCollapse__btn--mb">
                                                                        <a href="#" class="o-collapseBtn o-collapseBtn--down" data-overflow-action="fundType"></a>
                                                                    </div>
                                                                </div>
                                                                <div class="l-pickCollapse__collapse">
                                                                    <div class="l-pickCollapse__btn l-pickCollapse__btn--pc">
                                                                        <a href="#" class="o-prefixLink o-prefixLink--up o-prefixLink--sm" data-overflow-action="fundType">收合</a>
                                                                    </div>
                                                                    <div class="l-pickCollapse__btn l-pickCollapse__btn--mb">
                                                                        <a href="#" class="o-collapseBtn o-collapseBtn--up" data-overflow-action="fundType"></a>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="l-flex__item">
                                            <div class="c-filterForm" data-filter-group>
                                                <div class="c-filterForm__title" data-filter-title>
                                                    <span>計價幣別</span>
                                                </div>
                                                <div class="c-filterForm__value">
                                                    <div class="l-pickGroup" id="currencies_criteria">
                                                        <div class="l-pickGroup__all">
                                                            <label class="o-btnCheckBox">
                                                                <input class="o-btnCheckBox__input" type="checkbox" checked data-filter-checkall value="all">
                                                                <div class="o-btnCheckBox__text">全部</div>
                                                            </label>
                                                        </div>
                                                        <div class="l-pickGroup__wrap">
                                                            <div class="l-pickCollapse" data-overflow-hide="pricingCurrency">
                                                                <div class="l-pickCollapse__content" data-overflow-content="pricingCurrency">
                                                                    <div class="l-pickGroup">
                                                                        @foreach (string currency in Model.SearchBarData.Currencies)
                                                                        {
                                                                            if (!string.IsNullOrEmpty(currency))
                                                                            {
                                                                                <div class="l-pickGroup__item">
                                                                                    <label class="o-btnCheckBox" data-filter-checkbox>
                                                                                        <input class="o-btnCheckBox__input" type="checkbox" value="@currency">
                                                                                        <div class="o-btnCheckBox__text" data-filter-value="@currency"></div>
                                                                                    </label>
                                                                                </div>
                                                                            }
                                                                        }
                                                                    </div>
                                                                </div>
                                                                <div class="l-pickCollapse__expand">
                                                                    <div class="l-pickCollapse__btn l-pickCollapse__btn--pc">
                                                                        <a href="#" class="o-prefixLink o-prefixLink--down o-prefixLink--sm" data-overflow-action="pricingCurrency">展開</a>
                                                                    </div>
                                                                    <div class="l-pickCollapse__btn l-pickCollapse__btn--mb">
                                                                        <a href="#" class="o-collapseBtn o-collapseBtn--down" data-overflow-action="pricingCurrency"></a>
                                                                    </div>
                                                                </div>
                                                                <div class="l-pickCollapse__collapse">
                                                                    <div class="l-pickCollapse__btn l-pickCollapse__btn--pc">
                                                                        <a href="#" class="o-prefixLink o-prefixLink--up o-prefixLink--sm" data-overflow-action="pricingCurrency">收合</a>
                                                                    </div>
                                                                    <div class="l-pickCollapse__btn l-pickCollapse__btn--mb">
                                                                        <a href="#" class="o-collapseBtn o-collapseBtn--up" data-overflow-action="pricingCurrency"></a>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="l-flex__item">
                                            <div class="c-filterForm" data-filter-group>
                                                <div class="c-filterForm__title" data-filter-title>
                                                    <span>是否配息</span>
                                                </div>
                                                <div class="c-filterForm__value">
                                                    <div class="l-pickGroup" id="DividendFrequencyName">
                                                        <div class="l-pickGroup__all">
                                                            <label class="o-btnCheckBox">
                                                                <input class="o-btnCheckBox__input" type="checkbox" checked data-filter-checkall value="all">
                                                                <div class="o-btnCheckBox__text">全部</div>
                                                            </label>
                                                        </div>
                                                        <div class="l-pickGroup__wrap">
                                                            <div class="l-pickCollapse" data-overflow-hide="dividend">
                                                                <div class="l-pickCollapse__content" data-overflow-content="dividend">
                                                                    <div class="l-pickGroup">


                                                                        <div class="l-pickGroup__item">
                                                                            <label class="o-btnCheckBox" data-filter-checkbox>
                                                                                <input class="o-btnCheckBox__input" type="checkbox" value="不配息">
                                                                                <div class="o-btnCheckBox__text" data-filter-value="不配息"></div>
                                                                            </label>
                                                                        </div>

                                                                        <div class="l-pickGroup__item">
                                                                            <label class="o-btnCheckBox" data-filter-checkbox>
                                                                                <input class="o-btnCheckBox__input" type="checkbox" value="月配">
                                                                                <div class="o-btnCheckBox__text" data-filter-value="月配"></div>
                                                                            </label>
                                                                        </div>

                                                                        <div class="l-pickGroup__item">
                                                                            <label class="o-btnCheckBox" data-filter-checkbox>
                                                                                <input class="o-btnCheckBox__input" type="checkbox" value="季配">
                                                                                <div class="o-btnCheckBox__text" data-filter-value="季配"></div>
                                                                            </label>
                                                                        </div>

                                                                        <div class="l-pickGroup__item">
                                                                            <label class="o-btnCheckBox" data-filter-checkbox>
                                                                                <input class="o-btnCheckBox__input" type="checkbox" value="半年配">
                                                                                <div class="o-btnCheckBox__text" data-filter-value="半年配"></div>
                                                                            </label>
                                                                        </div>

                                                                        <div class="l-pickGroup__item">
                                                                            <label class="o-btnCheckBox" data-filter-checkbox>
                                                                                <input class="o-btnCheckBox__input" type="checkbox" value="年配">
                                                                                <div class="o-btnCheckBox__text" data-filter-value="年配"></div>
                                                                            </label>
                                                                        </div>

                                                                    </div>
                                                                </div>
                                                                <div class="l-pickCollapse__expand">
                                                                    <div class="l-pickCollapse__btn l-pickCollapse__btn--pc">
                                                                        <a href="#" class="o-prefixLink o-prefixLink--down o-prefixLink--sm" data-overflow-action="dividend">展開</a>
                                                                    </div>
                                                                    <div class="l-pickCollapse__btn l-pickCollapse__btn--mb">
                                                                        <a href="#" class="o-collapseBtn o-collapseBtn--down" data-overflow-action="dividend"></a>
                                                                    </div>
                                                                </div>
                                                                <div class="l-pickCollapse__collapse">
                                                                    <div class="l-pickCollapse__btn l-pickCollapse__btn--pc">
                                                                        <a href="#" class="o-prefixLink o-prefixLink--up o-prefixLink--sm" data-overflow-action="dividend">收合</a>
                                                                    </div>
                                                                    <div class="l-pickCollapse__btn l-pickCollapse__btn--mb">
                                                                        <a href="#" class="o-collapseBtn o-collapseBtn--up" data-overflow-action="dividend"></a>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!-- 大網收合區域[data-filter-hide="desktop"] -->
                                <div class="c-filter__pcHide" data-filter-hide="desktop">
                                    <!-- 大網高度過高內容區[data-filter-wrap="desktop"] -->
                                    <div class="c-filter__wrap" data-filter-wrap="desktop">
                                        <div class="c-filter__group">
                                            <div class="c-filter__title">
                                                <div class="c-textDivider">
                                                    <div class="c-textDivider__title">基本資料</div>
                                                </div>
                                            </div>
                                            <div class="c-filter__items">
                                                <div class="l-flex u-flex-col u-flex-gap-lg u-flex-gap-max@mb-only">
                                                    <div class="l-flex__item">
                                                        <!-- 條件群組[data-filter-group] -->
                                                        <div class="c-filterForm" data-filter-group>
                                                            <!-- 條件群組標題[data-filter-title]，需要顯示在tag的文字請用<span>包起來 -->
                                                            <div class="c-filterForm__title" data-filter-title>
                                                                <span>基金規模</span>
                                                            </div>
                                                            <div class="c-filterForm__value">
                                                                <!-- 拉霸本體[data-slider-bar="相對應ID"] -->
                                                                <!-- 拉霸值[data-slider-val] -->
                                                                <!-- 有前綴字[data-slider-prefix="你的前綴字"] -->
                                                                <!-- 有後綴字[data-slider-suffix="你的後綴字"] -->
                                                                <div class="c-sliderBar">
                                                                    <div class="c-sliderBar__main" data-slider-bar="size"></div>
                                                                    <!-- 篩選拉霸值[data-filter-bar] -->
                                                                    <input type="text" class="c-sliderBar__value" data-slider-val="FundSizeMillionOriginalCurrency" data-slider-suffix="百萬" data-filter-bar>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="l-flex__item">
                                                        <div class="c-filterForm" data-filter-group>
                                                            <div class="c-filterForm__title" data-filter-title>
                                                                <span>投資標的</span>
                                                            </div>
                                                            <div class="c-filterForm__value">
                                                                <div class="l-pickGroup" id="target_criteria">
                                                                    <div class="l-pickGroup__all">
                                                                        <label class="o-btnCheckBox">
                                                                            <input class="o-btnCheckBox__input" type="checkbox" checked data-filter-checkall value="all">
                                                                            <div class="o-btnCheckBox__text">全部</div>
                                                                        </label>
                                                                    </div>
                                                                    <div class="l-pickGroup__wrap">
                                                                        <div class="l-pickCollapse" data-overflow-hide="target">
                                                                            <div class="l-pickCollapse__content" data-overflow-content="target">
                                                                                <div class="l-pickGroup">

                                                                                    @foreach (string target in Model.SearchBarData.InvestmentTargets)
                                                                                    {
                                                                                        if (!string.IsNullOrEmpty(target))
                                                                                        {
                                                                                            <div class="l-pickGroup__item">
                                                                                                <label class="o-btnCheckBox" data-filter-checkbox>
                                                                                                    <input class="o-btnCheckBox__input" type="checkbox" value="@target">
                                                                                                    <div class="o-btnCheckBox__text" data-filter-value="@target"></div>
                                                                                                </label>
                                                                                            </div>
                                                                                        }
                                                                                    }

                                                                                    <div class="l-pickGroup__item" style="display:none;">
                                                                                        <label class="o-btnCheckBox" data-filter-checkbox>
                                                                                            <input class="o-btnCheckBox__input" type="checkbox" value="">
                                                                                            <div class="o-btnCheckBox__text" data-filter-value=""></div>
                                                                                        </label>
                                                                                    </div>

                                                                                </div>
                                                                            </div>
                                                                            <div class="l-pickCollapse__expand">
                                                                                <div class="l-pickCollapse__btn l-pickCollapse__btn--pc">
                                                                                    <a href="#" class="o-prefixLink o-prefixLink--down o-prefixLink--sm" data-overflow-action="target">展開</a>
                                                                                </div>
                                                                                <div class="l-pickCollapse__btn l-pickCollapse__btn--mb">
                                                                                    <a href="#" class="o-collapseBtn o-collapseBtn--down" data-overflow-action="target"></a>
                                                                                </div>
                                                                            </div>
                                                                            <div class="l-pickCollapse__collapse">
                                                                                <div class="l-pickCollapse__btn l-pickCollapse__btn--pc">
                                                                                    <a href="#" class="o-prefixLink o-prefixLink--up o-prefixLink--sm" data-overflow-action="target">收合</a>
                                                                                </div>
                                                                                <div class="l-pickCollapse__btn l-pickCollapse__btn--mb">
                                                                                    <a href="#" class="o-collapseBtn o-collapseBtn--up" data-overflow-action="target"></a>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="l-flex__item">
                                                        <div class="c-filterForm" data-filter-group>
                                                            <div class="c-filterForm__title" data-filter-title>
                                                                <span>投資地區</span>
                                                            </div>
                                                            <div class="c-filterForm__value">
                                                                <div class="l-pickGroup" id="region_criteria">
                                                                    <div class="l-pickGroup__all">
                                                                        <label class="o-btnCheckBox">
                                                                            <input class="o-btnCheckBox__input" type="checkbox" checked data-filter-checkall value="all">
                                                                            <div class="o-btnCheckBox__text">全部</div>
                                                                        </label>
                                                                    </div>
                                                                    <div class="l-pickGroup__wrap">
                                                                        <div class="l-pickCollapse" data-overflow-hide="investArea">
                                                                            <div class="l-pickCollapse__content" data-overflow-content="investArea">
                                                                                <div class="l-pickGroup">

                                                                                    @foreach (string region in Model.SearchBarData.InvestmentRegions)
                                                                                    {
                                                                                        if (!string.IsNullOrEmpty(region))
                                                                                        {
                                                                                            <div class="l-pickGroup__item">
                                                                                                <label class="o-btnCheckBox" data-filter-checkbox>
                                                                                                    <input class="o-btnCheckBox__input" type="checkbox" value="@region">
                                                                                                    <div class="o-btnCheckBox__text" data-filter-value="@region"></div>
                                                                                                </label>
                                                                                            </div>
                                                                                        }
                                                                                    }

                                                                                </div>
                                                                            </div>
                                                                            <div class="l-pickCollapse__expand">
                                                                                <div class="l-pickCollapse__btn l-pickCollapse__btn--pc">
                                                                                    <a href="#" class="o-prefixLink o-prefixLink--down o-prefixLink--sm" data-overflow-action="investArea">展開</a>
                                                                                </div>
                                                                                <div class="l-pickCollapse__btn l-pickCollapse__btn--mb">
                                                                                    <a href="#" class="o-collapseBtn o-collapseBtn--down" data-overflow-action="investArea"></a>
                                                                                </div>
                                                                            </div>
                                                                            <div class="l-pickCollapse__collapse">
                                                                                <div class="l-pickCollapse__btn l-pickCollapse__btn--pc">
                                                                                    <a href="#" class="o-prefixLink o-prefixLink--up o-prefixLink--sm" data-overflow-action="investArea">收合</a>
                                                                                </div>
                                                                                <div class="l-pickCollapse__btn l-pickCollapse__btn--mb">
                                                                                    <a href="#" class="o-collapseBtn o-collapseBtn--up" data-overflow-action="investArea"></a>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="l-flex__item">
                                                        <div class="c-filterForm" data-filter-group>
                                                            <div class="c-filterForm__title" data-filter-title>
                                                                <span>基金評等</span>
                                                                <a href="#popupFundRating" class="o-icon o-icon--tip o-icon--xs" data-popup="true"></a>
                                                            </div>
                                                            <div class="c-filterForm__value">
                                                                <div class="o-starLevel" data-level id="FundRating">
                                                                    <label class="o-starLevel__item" data-level-item data-filter-radio style="display:none;">
                                                                        <input checked value="1-6" class="o-starLevel__input" type="radio" name="star" data-filter-checkall>
                                                                    </label>
                                                                    <label class="o-starLevel__item" data-level-item data-filter-radio>
                                                                        <input class="o-starLevel__input" type="radio" name="star" data-filter-value="1星以上" value="1-6">
                                                                    </label>
                                                                    <label class="o-starLevel__item" data-level-item data-filter-radio>
                                                                        <input class="o-starLevel__input" type="radio" name="star" data-filter-value="2星以上" value="2-6">
                                                                    </label>
                                                                    <label class="o-starLevel__item" data-level-item data-filter-radio>
                                                                        <input class="o-starLevel__input" type="radio" name="star" data-filter-value="3星以上" value="3-6">
                                                                    </label>
                                                                    <label class="o-starLevel__item" data-level-item data-filter-radio>
                                                                        <input class="o-starLevel__input" type="radio" name="star" data-filter-value="4星以上" value="4-6">
                                                                    </label>
                                                                    <label class="o-starLevel__item" data-level-item data-filter-radio>
                                                                        <input class="o-starLevel__input" type="radio" name="star" data-filter-value="5星以上" value="5-6">
                                                                    </label>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="l-flex__item">
                                                        <div class="c-filterForm" data-filter-group>
                                                            <div class="c-filterForm__title" data-filter-title>
                                                                <span>基金公司</span>
                                                            </div>
                                                            <div class="c-filterForm__value">
                                                                <div class="l-pickGroup" id="companies_criteria">
                                                                    <div class="l-pickGroup__all">
                                                                        <label class="o-btnCheckBox">
                                                                            <input class="o-btnCheckBox__input" type="checkbox" checked data-filter-checkall value="all">
                                                                            <div class="o-btnCheckBox__text">全部</div>
                                                                        </label>
                                                                    </div>
                                                                    <div class="l-pickGroup__wrap">
                                                                        <div class="l-pickCollapse" data-overflow-hide="company">
                                                                            <div class="l-pickCollapse__content" data-overflow-content="company">
                                                                                <div class="l-pickGroup">
                                                                                    @foreach (string company in Model.SearchBarData.FundCompanies)
                                                                                    {
                                                                                        if (!string.IsNullOrEmpty(company))
                                                                                        {
                                                                                            <div class="l-pickGroup__item">
                                                                                                <label class="o-btnCheckBox" data-filter-checkbox>
                                                                                                    <input class="o-btnCheckBox__input" type="checkbox" value="@company">
                                                                                                    <div class="o-btnCheckBox__text" data-filter-value="@company"></div>
                                                                                                </label>
                                                                                            </div>
                                                                                        }
                                                                                    }

                                                                                </div>
                                                                            </div>
                                                                            <div class="l-pickCollapse__expand">
                                                                                <div class="l-pickCollapse__btn l-pickCollapse__btn--pc">
                                                                                    <a href="#" class="o-prefixLink o-prefixLink--down o-prefixLink--sm" data-overflow-action="company">展開</a>
                                                                                </div>
                                                                                <div class="l-pickCollapse__btn l-pickCollapse__btn--mb">
                                                                                    <a href="#" class="o-collapseBtn o-collapseBtn--down" data-overflow-action="company"></a>
                                                                                </div>
                                                                            </div>
                                                                            <div class="l-pickCollapse__collapse">
                                                                                <div class="l-pickCollapse__btn l-pickCollapse__btn--pc">
                                                                                    <a href="#" class="o-prefixLink o-prefixLink--up o-prefixLink--sm" data-overflow-action="company">收合</a>
                                                                                </div>
                                                                                <div class="l-pickCollapse__btn l-pickCollapse__btn--mb">
                                                                                    <a href="#" class="o-collapseBtn o-collapseBtn--up" data-overflow-action="company"></a>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="c-filter__group">
                                            <div class="c-filter__title">
                                                <div class="c-textDivider">
                                                    <div class="c-textDivider__title">績效表現</div>
                                                </div>
                                            </div>
                                            <div class="c-filter__items">
                                                <div class="l-flex u-flex-col u-flex-gap-lg u-flex-gap-max@mb-only">
                                                    <div class="l-flex__item">
                                                        <!-- 條件群組[data-filter-group] -->
                                                        <!-- 若有特殊條件，需在頁面做特殊處理後才印出已選擇的tag，請設定"special"，即[data-filter-group="special"] -->
                                                        <div class="c-filterForm" data-filter-group="special">
                                                            <!-- 條件群組標題[data-filter-title]，需要顯示在tag的文字請用<span>包起來 -->
                                                            <div class="c-filterForm__title" data-filter-title>
                                                                <span>報酬率</span>
                                                            </div>
                                                            <!-- 多個條件組合成一個tag[data-filter-part="相對應組合ID"] -->
                                                            <div class="c-filterForm__value" data-filter-part="returnRate">
                                                                <div class="l-flex u-flex-col u-flex-gap-lg u-flex-gap-md@mb-only">
                                                                    <!-- 組合之一[data-part-id="相對應組合ID"]  -->
                                                                    <div class="l-flex__item" data-part-id="returnRate">
                                                                        <div class="o-capsulebox o-capsulebox--sm">
                                                                            <!-- 篩選radio外層[data-filter-radio] -->
                                                                            <!-- 若radio搭配篩選功能，請將選項文字寫在[data-filter-value]上 -->
                                                                            <label class="o-capsulebox__item" data-filter-radio>
                                                                                <!-- [data-currency]此radio為頁面特殊處理，可參考頁面下方script -->
                                                                                <input type="radio" name="currency" class="o-capsulebox__input" checked data-currency data-filter-criteria-field="0">
                                                                                <span class="o-capsulebox__text" data-filter-value="原幣">原幣</span>
                                                                            </label>
                                                                            <!-- 篩選radio外層[data-filter-radio] -->
                                                                            <!-- 若radio搭配篩選功能，請將選項文字寫在[data-filter-value]上 -->
                                                                            <label class="o-capsulebox__item" data-filter-radio>
                                                                                <!-- [data-currency]此radio為頁面特殊處理，可參考頁面下方script -->
                                                                                <input type="radio" name="currency" class="o-capsulebox__input" data-currency data-filter-criteria-field="1">
                                                                                <span class="o-capsulebox__text" data-filter-value="台幣">台幣</span>
                                                                            </label>
                                                                        </div>
                                                                    </div>
                                                                    <!-- 組合之一[data-part-id="相對應組合ID"] -->
                                                                    <div class="l-flex__item" data-part-id="returnRate">
                                                                        <div class="l-pickGroup">
                                                                            <div class="l-pickGroup__item">
                                                                                <label class="o-btnRadio" data-filter-radio>
                                                                                    <!-- [data-return-rate-date]此radio為頁面特殊處理，可參考頁面下方script -->
                                                                                    <input class="o-btnRadio__input" type="radio" name="returnRate" data-return-rate-date data-filter-criteria-field="ThreeMonthReturnOriginalCurrency.Value|ThreeMonthReturnTWD.Value">
                                                                                    <div class="o-btnRadio__text" data-filter-value="三個月"></div>
                                                                                </label>
                                                                            </div>
                                                                            <div class="l-pickGroup__item">
                                                                                <label class="o-btnRadio" data-filter-radio>
                                                                                    <!-- [data-return-rate-date]此radio為頁面特殊處理，可參考頁面下方script -->
                                                                                    <input class="o-btnRadio__input" type="radio" name="returnRate" data-return-rate-date data-filter-criteria-field="SixMonthReturnOriginalCurrency.Value|SixMonthReturnTWD.Value">
                                                                                    <div class="o-btnRadio__text" data-filter-value="六個月"></div>
                                                                                </label>
                                                                            </div>

                                                                            <div class="l-pickGroup__item">
                                                                                <label class="o-btnRadio" data-filter-radio>
                                                                                    <!-- [data-return-rate-date]此radio為頁面特殊處理，可參考頁面下方script -->
                                                                                    <input class="o-btnRadio__input" type="radio" name="returnRate" data-return-rate-date data-filter-criteria-field="OneYearReturnOriginalCurrency.Value|OneYearReturnTWD.Value">
                                                                                    <div class="o-btnRadio__text" data-filter-value="一年"></div>
                                                                                </label>
                                                                            </div>

                                                                            <div class="l-pickGroup__item">
                                                                                <label class="o-btnRadio" data-filter-radio>
                                                                                    <!-- [data-return-rate-date]此radio為頁面特殊處理，可參考頁面下方script -->
                                                                                    <input class="o-btnRadio__input" type="radio" name="returnRate" data-return-rate-date data-filter-criteria-field="TwoYearReturnOriginalCurrency|TwoYearReturnTWD">
                                                                                    <div class="o-btnRadio__text" data-filter-value="二年"></div>
                                                                                </label>
                                                                            </div>

                                                                            <div class="l-pickGroup__item">
                                                                                <label class="o-btnRadio" data-filter-radio>
                                                                                    <!-- [data-return-rate-date]此radio為頁面特殊處理，可參考頁面下方script -->
                                                                                    <input class="o-btnRadio__input" type="radio" name="returnRate" data-return-rate-date data-filter-criteria-field="ThreeYearReturnOriginalCurrency|ThreeYearReturnTWD">
                                                                                    <div class="o-btnRadio__text" data-filter-value="三年"></div>
                                                                                </label>
                                                                            </div>

                                                                            <div class="l-pickGroup__item">
                                                                                <label class="o-btnRadio" data-filter-radio>
                                                                                    <!-- [data-return-rate-date]此radio為頁面特殊處理，可參考頁面下方script -->
                                                                                    <input class="o-btnRadio__input" type="radio" name="returnRate" data-return-rate-date data-filter-criteria-field="YeartoDateReturnOriginalCurrency|YeartoDateReturnTWD">
                                                                                    <div class="o-btnRadio__text" data-filter-value="年初至今"></div>
                                                                                </label>
                                                                            </div>

                                                                            <div class="l-pickGroup__item">
                                                                                <label class="o-btnRadio" data-filter-radio>
                                                                                    <!-- [data-return-rate-date]此radio為頁面特殊處理，可參考頁面下方script -->
                                                                                    <input class="o-btnRadio__input" type="radio" name="returnRate" data-return-rate-date data-filter-criteria-field="InceptionDateReturnOriginalCurrency|InceptionDateReturnTWD">
                                                                                    <div class="o-btnRadio__text" data-filter-value="成立至今"></div>
                                                                                </label>
                                                                            </div>

                                                                        </div>
                                                                    </div>
                                                                    <!-- 組合之一[data-part-id="相對應組合ID"]  -->
                                                                    <div class="l-flex__item u-hidden" data-part-id="returnRate">
                                                                        <div class="c-sliderBar">
                                                                            <div class="c-sliderBar__main" data-slider-bar="returnRate"></div>
                                                                            <!-- [data-return-rate-money]此拉霸為頁面特殊處理，可參考頁面下方script -->
                                                                            <input type="text" class="c-sliderBar__value" data-slider-val data-slider-suffix="%" data-filter-bar data-return-rate-money>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="c-filter__group">
                                            <div class="c-filter__title">
                                                <div class="c-textDivider">
                                                    <div class="c-textDivider__title">基金風險</div>
                                                </div>
                                            </div>
                                            <div class="c-filter__items">
                                                <div class="l-flex u-flex-col u-flex-gap-lg u-flex-gap-max@mb-only">
                                                    <div class="l-flex__item">
                                                        <div class="c-filterForm" data-filter-group>
                                                            <div class="c-filterForm__title" data-filter-title>
                                                                <span>風險屬性</span>
                                                            </div>
                                                            <div class="c-filterForm__value">
                                                                <div class="l-pickGroup" id="RiskRewardLevel">
                                                                    <div class="l-pickGroup__all">
                                                                        <label class="o-btnCheckBox">
                                                                            <input class="o-btnCheckBox__input" type="checkbox" checked data-filter-checkall value="all">
                                                                            <div class="o-btnCheckBox__text">全部</div>
                                                                        </label>
                                                                    </div>
                                                                    <div class="l-pickGroup__wrap">
                                                                        <div class="l-pickCollapse" data-overflow-hide="risk">
                                                                            <div class="l-pickCollapse__content" data-overflow-content="risk">
                                                                                <div class="l-pickGroup">


                                                                                    <div class="l-pickGroup__item">
                                                                                        <label class="o-btnCheckBox" data-filter-checkbox>
                                                                                            <input class="o-btnCheckBox__input" type="checkbox" value="RR5">
                                                                                            <div class="o-btnCheckBox__text" data-filter-value="RR5"></div>
                                                                                        </label>
                                                                                    </div>

                                                                                    <div class="l-pickGroup__item">
                                                                                        <label class="o-btnCheckBox" data-filter-checkbox>
                                                                                            <input class="o-btnCheckBox__input" type="checkbox" value="RR4">
                                                                                            <div class="o-btnCheckBox__text" data-filter-value="RR4"></div>
                                                                                        </label>
                                                                                    </div>

                                                                                    <div class="l-pickGroup__item">
                                                                                        <label class="o-btnCheckBox" data-filter-checkbox>
                                                                                            <input class="o-btnCheckBox__input" type="checkbox" value="RR3">
                                                                                            <div class="o-btnCheckBox__text" data-filter-value="RR3"></div>
                                                                                        </label>
                                                                                    </div>

                                                                                    <div class="l-pickGroup__item">
                                                                                        <label class="o-btnCheckBox" data-filter-checkbox>
                                                                                            <input class="o-btnCheckBox__input" type="checkbox" value="RR2">
                                                                                            <div class="o-btnCheckBox__text" data-filter-value="RR2"></div>
                                                                                        </label>
                                                                                    </div>

                                                                                    <div class="l-pickGroup__item">
                                                                                        <label class="o-btnCheckBox" data-filter-checkbox>
                                                                                            <input class="o-btnCheckBox__input" type="checkbox" value="RR1">
                                                                                            <div class="o-btnCheckBox__text" data-filter-value="RR1"></div>
                                                                                        </label>
                                                                                    </div>

                                                                                </div>
                                                                            </div>
                                                                            <div class="l-pickCollapse__expand">
                                                                                <div class="l-pickCollapse__btn l-pickCollapse__btn--pc">
                                                                                    <a href="#" class="o-prefixLink o-prefixLink--down o-prefixLink--sm" data-overflow-action="risk">展開</a>
                                                                                </div>
                                                                                <div class="l-pickCollapse__btn l-pickCollapse__btn--mb">
                                                                                    <a href="#" class="o-collapseBtn o-collapseBtn--down" data-overflow-action="risk"></a>
                                                                                </div>
                                                                            </div>
                                                                            <div class="l-pickCollapse__collapse">
                                                                                <div class="l-pickCollapse__btn l-pickCollapse__btn--pc">
                                                                                    <a href="#" class="o-prefixLink o-prefixLink--up o-prefixLink--sm" data-overflow-action="risk">收合</a>
                                                                                </div>
                                                                                <div class="l-pickCollapse__btn l-pickCollapse__btn--mb">
                                                                                    <a href="#" class="o-collapseBtn o-collapseBtn--up" data-overflow-action="risk"></a>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="l-flex__item">
                                                        <div class="c-filterForm" data-filter-group>
                                                            <div class="c-filterForm__title" data-filter-title>
                                                                <span>夏普指數</span>
                                                                <div class="s4">(Sharpe)</div>
                                                            </div>
                                                            <div class="c-filterForm__value">
                                                                <div class="c-sliderBar">
                                                                    <div class="c-sliderBar__main" data-slider-bar="sharpe"></div>
                                                                    <input type="text" class="c-sliderBar__value" data-slider-val="sharpe" data-filter-bar>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="l-flex__item">
                                                        <div class="c-filterForm" data-filter-group>
                                                            <div class="c-filterForm__title" data-filter-title>
                                                                <span>貝他值</span>
                                                                <div class="s4">(Beta)</div>
                                                            </div>
                                                            <div class="c-filterForm__value">
                                                                <div class="c-sliderBar">
                                                                    <div class="c-sliderBar__main" data-slider-bar="beta"></div>
                                                                    <input type="text" class="c-sliderBar__value" data-slider-val="beta" data-filter-bar>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="l-flex__item">
                                                        <div class="c-filterForm" data-filter-group>
                                                            <div class="c-filterForm__title" data-filter-title>
                                                                <span>標準差</span>
                                                            </div>
                                                            <div class="c-filterForm__value">
                                                                <div class="c-sliderBar">
                                                                    <div class="c-sliderBar__main" data-slider-bar="standardDeviation"></div>
                                                                    <input type="text" class="c-sliderBar__value" data-slider-val="standard" data-slider-suffix="%" data-filter-bar>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- 大小網展開收合功能觸發點[data-filter-collapse] -->
                            <div class="c-filter__total" data-filter-collapse>
                                <div class="o-total o-total--wt">
                                    搜尋<span id="uid-total">0</span>筆
                                </div>
                            </div>
                        </div>
                        <div class="c-filter__expand">
                            <div>
                                <!-- 大小網展開收合功能觸發點[data-filter-collapse] -->
                                <a href="#" class="o-btn o-btn--primary o-btn--flat o-btn--auto" data-filter-collapse>
                                    展開進階篩選
                                    <img src="~/themes/images/icons/white/corner-down-sm.svg" class="o-btn__icon o-btn__icon--xs" alt="">
                                </a>
                            </div>
                        </div>
                        <div class="c-filter__collapse">
                            <div>
                                <!-- 大小網展開收合功能觸發點[data-filter-collapse] -->
                                <a href="#" class="o-btn o-btn--primary o-btn--flat o-btn--auto" data-filter-collapse>
                                    收合進階篩選
                                    <img src="~/themes/images/icons/white/corner-up-sm.svg" class="o-btn__icon o-btn__icon--xs" alt="">
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="l-filter__picked">
                    <div class="c-pickedTag">
                        <div class="c-pickedTag__text">已選取</div>
                        <div class="c-pickedTag__items">
                            <!-- 已選取tag區[data-filter-tags] -->
                            <div class="l-pickGroup" data-filter-tags></div>
                        </div>
                    </div>
                </div>
                <div class="l-filter__tool">
                    <div class="l-filter__total">
                        <div class="o-total">
                            搜尋<span id="uid-total">0</span>筆
                        </div>
                    </div>
                    <div class="l-filter__reset">
                        <!-- 重設所有條件功能[data-filter-reset] -->
                        <a href="#" class="o-prefixLink o-prefixLink--refresh" data-filter-reset>重設所有條件</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="l-wrap">
    <div class="c-tab c-tab--wide" data-filter-empty="true" style="display:none;">
        <div class="c-tab__panel is-active">
            <div class="c-section">
                <div class="c-section__content">
                    <div class="c-empty">
                        <div class="c-empty__img">
                            <img src="~/themes/images/lions/lion-compare.svg" alt="">
                        </div>
                        <div class="c-empty__desc">查無商品，請嘗試調整篩選條件</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="c-tab c-tab--wide" data-tab="true" data-filter-empty="false" style="display:none;">
        <div class="c-tab__header">
            <ul class="c-tab__navs">
                <!-- .is-active: 作用中的項目 -->
                <!-- [data-tab-target]: 值需對應 [data-tab-panel-id] 的值，按下後會自動顯示相對的 panel -->
                <!-- 若為外連，不要賦予[data-tab-target]屬性 -->
                <li>
                    <a href="#" class="c-tab__item" target="_self" title="績效表現" data-tab-target="tab-1" data-filter-switch-columns="1">績效表現</a>
                </li>
                <li>
                    <a href="#" class="c-tab__item" target="_self" title="基本資料" data-tab-target="tab-2" data-filter-switch="#uid-template-2" data-filter-switch-columns="2">基本資料</a>
                </li>
                <li>
                    <a href="#" class="c-tab__item" target="_self" title="風險指標" data-tab-target="tab-3" data-filter-switch="#uid-template-3" data-filter-switch-columns="3">風險指標</a>
                </li>
            </ul>
            <div class="c-tab__collapse">
                <a href="#" class="c-tab__switch"></a>
                <div class="c-tab__dropdown">
                    <a href="#" class="c-tab__clone" target="_self" title="績效表現" data-tab-target="tab-1" data-filter-switch-columns="1">績效表現</a>
                    <a href="#" class="c-tab__clone " target="_self" title="基本資料" data-tab-target="tab-2" data-filter-switch="#uid-template-2" data-filter-switch-columns="2">基本資料</a>
                    <a href="#" class="c-tab__clone " target="_self" title="風險指標" data-tab-target="tab-3" data-filter-switch="#uid-template-3" data-filter-switch-columns="3">風險指標</a>
                </div>
            </div>
        </div>

        <!-- is-active: 作用中的項目 -->
        <div class="c-tab__panel" data-tab-panel-id="tab-1">
            <div class="l-flex u-flex-col u-flex-gap-sm">
                <div class="l-flex__item">
                    <div class="l-flex l-flex--wrap u-flex-gap-sm">
                        <div class="l-flex__item">
                            <div class="o-capsulebox">
                                <label class="o-capsulebox__item">
                                    <input type="radio" name="currency1" value="原幣" checked class="o-capsulebox__input" data-filter-switch="#uid-template" data-filter-switch-columns="4">
                                    <span class="o-capsulebox__text">原幣</span>
                                </label>
                                <label class="o-capsulebox__item">
                                    <input type="radio" name="currency1" value="台幣" class="o-capsulebox__input" data-filter-switch="#uid-template-1" data-filter-switch-columns="5">
                                    <span class="o-capsulebox__text">台幣</span>
                                </label>
                            </div>
                        </div>
                        <div class="l-flex__item u-right u-hidden@dt-only">
                            <div class="o-sortingbox">
                                <!-- [data-sortingbox="true"]: 載入後自動綁定手機版排序客製樣式下拉功能 -->
                                <select class="o-sortingbox__input" data-sortingbox="true">
                                    <option value="">排序</option>
                                    <option value="基金名稱高至低" data-sorting-column="ProductCode" data-sorting-class="is-desc">基金名稱高至低</option>
                                    <option value="基金名稱低至高" data-sorting-column="ProductCode" data-sorting-class="is-asc">基金名稱低至高</option>
                                    <option value="最新淨值高至低" data-sorting-column="NetAssetValue" data-sorting-class="is-desc">最新淨值高至低</option>
                                    <option value="最新淨值低至高" data-sorting-column="NetAssetValue" data-sorting-class="is-asc">最新淨值低至高</option>
                                    <option value="幣別高至低" data-sorting-column="Currency.Key" data-sorting-class="is-desc">幣別高至低</option>
                                    <option value="幣別低至高" data-sorting-column="Currency.Key" data-sorting-class="is-asc">幣別低至高</option>

                                    <option value="1個月原幣績效高至低" data-sorting-column="OneMonthReturnOriginalCurrency.Value" data-sorting-class="is-desc">1個月原幣績效高至低</option>
                                    <option value="1個月原幣績效低至高" data-sorting-column="OneMonthReturnOriginalCurrency.Value" data-sorting-class="is-asc">1個月原幣績效低至高</option>
                                    <option value="3個月原幣績效高至低" data-sorting-column="ThreeMonthReturnOriginalCurrency.Value" data-sorting-class="is-desc">3個月原幣績效高至低</option>
                                    <option value="3個月原幣績效低至高" data-sorting-column="ThreeMonthReturnOriginalCurrency.Value" data-sorting-class="is-asc">3個月原幣績效低至高</option>
                                    <option value="6個月原幣績效高至低" data-sorting-column="SixMonthReturnOriginalCurrency.Value" data-sorting-class="is-desc">6個月原幣績效高至低</option>
                                    <option value="6個月原幣績效低至高" data-sorting-column="SixMonthReturnOriginalCurrency.Value" data-sorting-class="is-asc">6個月原幣績效低至高</option>
                                    <option value="1年原幣績效高至低" data-sorting-column="OneYearReturnOriginalCurrency.Value" data-sorting-class="is-desc">1年原幣績效高至低</option>
                                    <option value="1年原幣績效低至高" data-sorting-column="OneYearReturnOriginalCurrency.Value" data-sorting-class="is-asc">1年原幣績效低至高</option>

                                    <option value="1個月台幣績效高至低" data-sorting-column="OneMonthReturnTWD.Value" data-sorting-class="is-desc">1個月台幣績效高至低</option>
                                    <option value="1個月台幣績效低至高" data-sorting-column="OneMonthReturnTWD.Value" data-sorting-class="is-asc">1個月台幣績效低至高</option>
                                    <option value="3個月台幣績效高至低" data-sorting-column="ThreeMonthReturnTWD.Value" data-sorting-class="is-desc">3個月台幣績效高至低</option>
                                    <option value="3個月台幣績效低至高" data-sorting-column="ThreeMonthReturnTWD.Value" data-sorting-class="is-asc">3個月台幣績效低至高</option>
                                    <option value="6個月台幣績效高至低" data-sorting-column="SixMonthReturnTWD.Value" data-sorting-class="is-desc">6個月台幣績效高至低</option>
                                    <option value="6個月台幣績效低至高" data-sorting-column="SixMonthReturnTWD.Value" data-sorting-class="is-asc">6個月台幣績效低至高</option>
                                    <option value="1年台幣績效高至低" data-sorting-column="OneYearReturnTWD.Value" data-sorting-class="is-desc">1年台幣績效高至低</option>
                                    <option value="1年台幣績效低至高" data-sorting-column="OneYearReturnTWD.Value" data-sorting-class="is-asc">1年台幣績效低至高</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="l-flex__item">
                </div>
            </div>
        </div>
        <div class="c-tab__panel" data-tab-panel-id="tab-2">
            <div class="l-flex u-flex-col u-flex-gap-sm">
                <div class="l-flex__item u-right u-hidden@dt-only">
                    <div class="o-sortingbox">
                        <!-- [data-sortingbox="true"]: 載入後自動綁定手機版排序客製樣式下拉功能 -->
                        <select class="o-sortingbox__input" data-sortingbox="true">
                            <option value="">排序</option>
                            <option value="基金名稱高至低" data-sorting-column="ProductCode" data-sorting-class="is-desc">基金名稱高至低</option>
                            <option value="基金名稱低至高" data-sorting-column="ProductCode" data-sorting-class="is-asc">基金名稱低至高</option>
                            <option value="最新淨值高至低" data-sorting-column="NetAssetValue" data-sorting-class="is-desc">最新淨值高至低</option>
                            <option value="最新淨值低至高" data-sorting-column="NetAssetValue" data-sorting-class="is-asc">最新淨值低至高</option>
                            <option value="幣別高至低" data-sorting-column="FundCurrency.Key" data-sorting-class="is-desc">幣別高至低</option>
                            <option value="幣別低至高" data-sorting-column="FundCurrency.Key" data-sorting-class="is-asc">幣別低至高</option>
                            <option value="漲跌幅高至低" data-sorting-column="PercentageChangeInFundPrice.Value" data-sorting-class="is-desc">漲跌幅高至低</option>
                            <option value="漲跌幅低至高" data-sorting-column="PercentageChangeInFundPrice.Value" data-sorting-class="is-asc">漲跌幅低至高</option>
                            <option value="基金規模原幣高至低" data-sorting-column="FundSizeMillionOriginalCurrency" data-sorting-class="is-desc">基金規模原幣高至低</option>
                            <option value="基金規模原幣低至高" data-sorting-column="FundSizeMillionOriginalCurrency" data-sorting-class="is-asc">基金規模原幣低至高</option>
                        </select>
                    </div>
                </div>
                <div class="l-flex__item">
                </div>
            </div>
        </div>
        <div class="c-tab__panel" data-tab-panel-id="tab-3">
            <div class="l-flex u-flex-col u-flex-gap-sm">
                <div class="l-flex__item">@Model.RiskIndicatorContent</div>
                <div class="l-flex__item u-right u-hidden@dt-only">
                    <div class="o-sortingbox">
                        <!-- [data-sortingbox="true"]: 載入後自動綁定手機版排序客製樣式下拉功能 -->
                        <select class="o-sortingbox__input" data-sortingbox="true">
                            <option value="">排序</option>
                            <option value="基金名稱高至低" data-sorting-column="ProductCode" data-sorting-class="is-desc">基金名稱高至低</option>
                            <option value="基金名稱低至高" data-sorting-column="ProductCode" data-sorting-class="is-asc">基金名稱低至高</option>
                            <option value="最新淨值高至低" data-sorting-column="NetAssetValue" data-sorting-class="is-desc">最新淨值高至低</option>
                            <option value="最新淨值低至高" data-sorting-column="NetAssetValue" data-sorting-class="is-asc">最新淨值低至高</option>
                            <option value="風險屬性RR5至RR1" data-sorting-column="RiskRewardLevel" data-sorting-class="is-desc">風險屬性RR5至RR1</option>
                            <option value="風險屬性RR1至RR5" data-sorting-column="RiskRewardLevel" data-sorting-class="is-asc">風險屬性RR1至RR5</option>
                            <option value="Sharpe高至低" data-sorting-column="Sharpe" data-sorting-class="is-desc">Sharpe高至低</option>
                            <option value="Sharpe低至高" data-sorting-column="Sharpe" data-sorting-class="is-asc">Sharpe低至高</option>
                            <option value="Beta高至低" data-sorting-column="Beta" data-sorting-class="is-desc">Beta高至低</option>
                            <option value="Beta高至低" data-sorting-column="Beta" data-sorting-class="is-asc">Beta高至低</option>
                            <option value="Alpha高至低" data-sorting-column="OneYearAlpha" data-sorting-class="is-desc">Alpha高至低</option>
                            <option value="Alpha低至高" data-sorting-column="OneYearAlpha" data-sorting-class="is-asc">Alpha低至高</option>
                            <option value="年化標準差高至低" data-sorting-column="AnnualizedStandardDeviation" data-sorting-class="is-desc">年化標準差高至低</option>
                            <option value="年化標準差低至高" data-sorting-column="AnnualizedStandardDeviation" data-sorting-class="is-asc">年化標準差低至高</option>
                        </select>
                    </div>
                </div>
                <div class="l-flex__item">
                </div>
            </div>
        </div>

        <div class="o-sortingbox" style="display:none;">
            <select data-sortingbox="true" id="uid-sortbox">
                <option>排序</option>
                <option value="基金名稱高至低" data-sorting-column="ProductCode" data-sorting-class="is-desc">基金名稱高至低</option>
                <option value="基金名稱低至高" data-sorting-column="ProductCode" data-sorting-class="is-asc">基金名稱低至高</option>
                <option value="最新淨值高至低" data-sorting-column="NetAssetValue" data-sorting-class="is-desc">最新淨值高至低</option>
                <option value="最新淨值低至高" data-sorting-column="NetAssetValue" data-sorting-class="is-asc">最新淨值低至高</option>
                <option value="幣別高至低" data-sorting-column="Currency.Key" data-sorting-class="is-desc">幣別高至低</option>
                <option value="幣別低至高" data-sorting-column="Currency.Key" data-sorting-class="is-asc">幣別低至高</option>

                <option value="1個月原幣績效高至低" data-sorting-column="OneMonthReturnOriginalCurrency.Value" data-sorting-class="is-desc">1個月原幣績效高至低</option>
                <option value="1個月原幣績效低至高" data-sorting-column="OneMonthReturnOriginalCurrency.Value" data-sorting-class="is-asc">1個月原幣績效低至高</option>
                <option value="3個月原幣績效高至低" data-sorting-column="ThreeMonthReturnOriginalCurrency.Value" data-sorting-class="is-desc">3個月原幣績效高至低</option>
                <option value="3個月原幣績效低至高" data-sorting-column="ThreeMonthReturnOriginalCurrency.Value" data-sorting-class="is-asc">3個月原幣績效低至高</option>
                <option value="6個月原幣績效高至低" data-sorting-column="SixMonthReturnOriginalCurrency.Value" data-sorting-class="is-desc">6個月原幣績效高至低</option>
                <option value="6個月原幣績效低至高" data-sorting-column="SixMonthReturnOriginalCurrency.Value" data-sorting-class="is-asc">6個月原幣績效低至高</option>
                <option value="1年原幣績效高至低" data-sorting-column="OneYearReturnOriginalCurrency.Value" data-sorting-class="is-desc">1年原幣績效高至低</option>
                <option value="1年原幣績效低至高" data-sorting-column="OneYearReturnOriginalCurrency.Value" data-sorting-class="is-asc">1年原幣績效低至高</option>

                <option value="1個月台幣績效高至低" data-sorting-column="OneMonthReturnTWD.Value" data-sorting-class="is-desc">1個月台幣績效高至低</option>
                <option value="1個月台幣績效低至高" data-sorting-column="OneMonthReturnTWD.Value" data-sorting-class="is-asc">1個月台幣績效低至高</option>
                <option value="3個月台幣績效高至低" data-sorting-column="ThreeMonthReturnTWD.Value" data-sorting-class="is-desc">3個月台幣績效高至低</option>
                <option value="3個月台幣績效低至高" data-sorting-column="ThreeMonthReturnTWD.Value" data-sorting-class="is-asc">3個月台幣績效低至高</option>
                <option value="6個月台幣績效高至低" data-sorting-column="SixMonthReturnTWD.Value" data-sorting-class="is-desc">6個月台幣績效高至低</option>
                <option value="6個月台幣績效低至高" data-sorting-column="SixMonthReturnTWD.Value" data-sorting-class="is-asc">6個月台幣績效低至高</option>
                <option value="1年台幣績效高至低" data-sorting-column="OneYearReturnTWD.Value" data-sorting-class="is-desc">1年台幣績效高至低</option>
                <option value="1年台幣績效低至高" data-sorting-column="OneYearReturnTWD.Value" data-sorting-class="is-asc">1年台幣績效低至高</option>

                <option value="幣別高至低" data-sorting-column="FundCurrency.Key" data-sorting-class="is-desc">幣別高至低</option>
                <option value="幣別低至高" data-sorting-column="FundCurrency.Key" data-sorting-class="is-asc">幣別低至高</option>
                <option value="漲跌幅高至低" data-sorting-column="PercentageChangeInFundPrice.Value" data-sorting-class="is-desc">漲跌幅高至低</option>
                <option value="漲跌幅低至高" data-sorting-column="PercentageChangeInFundPrice.Value" data-sorting-class="is-asc">漲跌幅低至高</option>
                <option value="基金規模原幣高至低" data-sorting-column="FundSizeMillionOriginalCurrency" data-sorting-class="is-desc">基金規模原幣高至低</option>
                <option value="基金規模原幣低至高" data-sorting-column="FundSizeMillionOriginalCurrency" data-sorting-class="is-asc">基金規模原幣低至高</option>

                <option value="風險屬性RR5至RR1" data-sorting-column="RiskRewardLevel" data-sorting-class="is-desc">風險屬性RR5至RR1</option>
                <option value="風險屬性RR1至RR5" data-sorting-column="RiskRewardLevel" data-sorting-class="is-asc">風險屬性RR1至RR5</option>
                <option value="Sharpe高至低" data-sorting-column="Sharpe" data-sorting-class="is-desc">Sharpe高至低</option>
                <option value="Sharpe低至高" data-sorting-column="Sharpe" data-sorting-class="is-asc">Sharpe低至高</option>
                <option value="Beta高至低" data-sorting-column="Beta" data-sorting-class="is-desc">Beta高至低</option>
                <option value="Beta高至低" data-sorting-column="Beta" data-sorting-class="is-asc">Beta高至低</option>
                <option value="Alpha高至低" data-sorting-column="OneYearAlpha" data-sorting-class="is-desc">Alpha高至低</option>
                <option value="Alpha低至高" data-sorting-column="OneYearAlpha" data-sorting-class="is-asc">Alpha低至高</option>
                <option value="年化標準差高至低" data-sorting-column="AnnualizedStandardDeviation" data-sorting-class="is-desc">年化標準差高至低</option>
                <option value="年化標準差低至高" data-sorting-column="AnnualizedStandardDeviation" data-sorting-class="is-asc">年化標準差低至高</option>
            </select>
        </div>
        <div class="l-table">
            <table class="c-table@dt-only c-cardTable@lt" id="table">
                <colgroup>
                    <col style="width: auto;">
                    <col style="width: 1%;">
                    <col style="width: 1%;">
                    <col style="width: 1%;">
                    <col style="width: 1%;">
                    <col style="width: 1%;">
                    <col style="width: 1%;">
                    <col style="width: 1%;">
                    <col style="width: 1%;">
                </colgroup>
                <thead>
                    <tr class="u-nowrap">
                        <th>
                            <div class="c-table__title">
                                <span>基金名稱</span>
                                <!-- .is-asc: 升冪 -->
                                <!-- .is-desc: 降冪 -->
                                <a href="#" class="o-sorting" data-sorting-column="ProductCode"></a>
                            </div>
                        </th>
                        <th>
                            <div class="c-table__title">
                                <span>最新淨值<br>(淨值日)</span>
                                <a href="#" class="o-sorting" data-sorting-column="NetAssetValue"></a>
                            </div>
                        </th>
                        <th data-filter-switch-columns="1,4,5">
                            <div class="c-table__title">
                                <span>幣別</span>
                                <a href="#popupCurrency" class="o-icon o-icon--tip o-icon--xs" data-popup="true"></a>
                                <a href="#" class="o-sorting" data-sorting-column="Currency.Key"></a>
                            </div>

                        </th>
                        <th data-filter-switch-columns="1,4">
                            <div class="c-table__title">
                                <span>1個月</span>
                                <a href="#" class="o-sorting" data-sorting-column="OneMonthReturnOriginalCurrency.Value"></a>
                            </div>
                        </th>
                        <th data-filter-switch-columns="1,4">
                            <div class="c-table__title">
                                <span>3個月</span>
                                <a href="#" class="o-sorting" data-sorting-column="ThreeMonthReturnOriginalCurrency.Value"></a>
                            </div>
                        </th>
                        <th data-filter-switch-columns="1,4">
                            <div class="c-table__title">
                                <span>6個月</span>
                                <a href="#" class="o-sorting" data-sorting-column="SixMonthReturnOriginalCurrency.Value"></a>
                            </div>
                        </th>
                        <th data-filter-switch-columns="1,4">
                            <div class="c-table__title">
                                <span>1年</span>
                                <a href="#" class="o-sorting" data-sorting-column="OneYearReturnOriginalCurrency.Value"></a>
                            </div>
                        </th>
                        <th data-filter-switch-columns="1,5">
                            <div class="c-table__title">
                                <span>1個月</span>
                                <a href="#" class="o-sorting" data-sorting-column="OneMonthReturnTWD.Value"></a>
                            </div>
                        </th>
                        <th data-filter-switch-columns="1,5">
                            <div class="c-table__title">
                                <span>3個月</span>
                                <a href="#" class="o-sorting" data-sorting-column="ThreeMonthReturnTWD.Value"></a>
                            </div>
                        </th>
                        <th data-filter-switch-columns="1,5">
                            <div class="c-table__title">
                                <span>6個月</span>
                                <a href="#" class="o-sorting" data-sorting-column="SixMonthReturnTWD.Value"></a>
                            </div>
                        </th>
                        <th data-filter-switch-columns="1,5">
                            <div class="c-table__title">
                                <span>1年</span>
                                <a href="#" class="o-sorting" data-sorting-column="OneYearReturnTWD.Value"></a>
                            </div>
                        </th>
                        @*tab-2*@
                        <th data-filter-switch-columns="2">
                            <div class="c-table__title">
                                <span>幣別</span>
                                <a href="#popupCurrency" class="o-icon o-icon--tip o-icon--xs" data-popup="true"></a>
                                <a href="#" class="o-sorting" data-sorting-column="FundCurrency.Key"></a>
                            </div>

                        </th>
                        <th data-filter-switch-columns="2">
                            <div class="c-table__title">
                                <span>漲跌幅</span>
                                <a href="#" class="o-sorting" data-sorting-column="PercentageChangeInFundPrice.Value"></a>
                            </div>
                        </th>
                        <th data-filter-switch-columns="2">
                            <div class="c-table__title">
                                <span>基金規模<br>(百萬)</span>
                                <a href="#" class="o-sorting" data-sorting-column="FundSizeMillionOriginalCurrency"></a>
                            </div>
                        </th>
                        <th data-filter-switch-columns="2">
                            <div class="c-table__title">
                                <span>基金類型</span>
                            </div>
                        </th>
                        <th data-filter-switch-columns="2">
                            <div class="c-table__title">
                                <span>配息頻率</span>
                            </div>
                        </th>
                        @*tab-3*@
                        <th data-filter-switch-columns="3">
                            <div class="c-table__title">
                                <span>風險屬性</span>
                                <a href="#" class="o-sorting" data-sorting-column="RiskRewardLevel"></a>
                            </div>
                        </th>
                        <th data-filter-switch-columns="3">
                            <div class="c-table__title">
                                <span>Sharpe</span>
                                <a href="#" class="o-sorting" data-sorting-column="Sharpe"></a>
                            </div>
                        </th>
                        <th data-filter-switch-columns="3">
                            <div class="c-table__title">
                                <span>Beta</span>
                                <a href="#" class="o-sorting" data-sorting-column="Beta"></a>
                            </div>
                        </th>
                        <th data-filter-switch-columns="3">
                            <div class="c-table__title">
                                <span>Alpha</span>
                                <a href="#" class="o-sorting" data-sorting-column="OneYearAlpha"></a>
                            </div>
                        </th>
                        <th data-filter-switch-columns="3">
                            <div class="c-table__title">
                                <span>年化標準差</span>
                                <a href="#" class="o-sorting" data-sorting-column="AnnualizedStandardDeviation"></a>
                            </div>
                        </th>
                        @*all*@
                        <th>
                            <div class="c-table__title">
                                <span>關注/比較</span>
                            </div>
                        </th>
                        <th>
                            <div class="c-table__title">
                                <span>申購</span>
                            </div>
                        </th>
                    </tr>
                </thead>
                <tbody id="uid-fjs"></tbody>
                <script id="uid-template" type="text/html">
                    <tr class="c-cardTable__item u-nowrap@dt-only u-center@dt-only">
                        <td class="c-cardTable__top"></td>
                        <td class="c-cardTable__header u-wrap@dt-only u-left@dt-only">
                            <div class="c-cardTable__content">
                                <div class="l-target">
                                    <div class="l-target__name">
                                        <a href="<%= DetailUrl %>?id=<%= ProductCode %>" class="o-contentLink t-bold u-ellipsis-2" target="_blank"><%= ProductCode %> <%= FundName %></a>
                                    </div>
                                    <% if (Tags!=null) { %>
                                    <div class="l-target__additional">
                                        <ul class="l-tag">
                                            <% for(var i = 0; i < Tags.length; i++ ) { %>
                                            <li class="l-tag__item">
                                                <!-- <a href="#" class="o-tag">百元基金</a> -->
                                                <span class="o-tag"><%= Tags[i] %></span>
                                            </li>
                                            <% } %>
                                        </ul>
                                    </div>
                                    <% } %>
                                </div>
                            </div>
                        </td>
                        <td class="c-cardTable__space"></td>
                        <td class="c-cardTable__body" data-card-table-width="1/2">
                            <div class="c-cardTable__title" data-length="4">最新淨值<br>(淨值日)</div>
                            <% if (NetAssetValue != null) { %>
                            <div class="c-cardTable__content"><%= NetAssetValue.toFixed(4) %><br><span class="t-date"><%= NetAssetValueDate %></span></div>
                            <% } else {%>
                            <span>-</span>
                            <% } %>
                        </td>
                        <td class="c-cardTable__body" data-card-table-width="1/2">
                            <div class="c-cardTable__title" data-length="4">
                                幣別
                                <a href="#popupCurrency" class="o-icon o-icon--tip o-icon--xs" data-popup="true"></a>
                            </div>
                            <div class="c-cardTable__content">
                                <% if (Currency.Value!=null) { %>
                                <a href="#popupCurrencyWebSite" class="o-link" data-popup="true"><%= Currency.Value %></a>
                                <% } else {%>
                                <span>-</span>
                                <% } %>
                            </div>
                        </td>

                        <td class="c-cardTable__body" data-card-table-width="1/2">
                            <div class="c-cardTable__title" data-length="4">1個月</div>
                            <div class="c-cardTable__content">
                                <% if (OneMonthReturnOriginalCurrency.Value!=null) { %>
                                <% if (OneMonthReturnOriginalCurrency.Key) { %>
                                <span class="o-rise"><%= OneMonthReturnOriginalCurrency.Text %>%</span>
                                <% } else { %>
                                <span class="o-fall"><%= OneMonthReturnOriginalCurrency.Text %>%</span>
                                <% } %>
                                <% } else {%>
                                <span>-</span>
                                <% } %>
                            </div>
                        </td>
                        <td class="c-cardTable__body" data-card-table-width="1/2">
                            <div class="c-cardTable__title" data-length="4">3個月</div>
                            <div class="c-cardTable__content">
                                <% if (ThreeMonthReturnOriginalCurrency.Value!=null) { %>
                                <% if (ThreeMonthReturnOriginalCurrency.Key) { %>
                                <span class="o-rise"><%= ThreeMonthReturnOriginalCurrency.Text %>%</span>
                                <% } else { %>
                                <span class="o-fall"><%= ThreeMonthReturnOriginalCurrency.Text %>%</span>
                                <% } %>
                                <% } else {%>
                                <span>-</span>
                                <% } %>
                            </div>
                        </td>
                        <td class="c-cardTable__body" data-card-table-width="1/2">
                            <div class="c-cardTable__title" data-length="4">6個月</div>
                            <div class="c-cardTable__content">
                                <% if (SixMonthReturnOriginalCurrency.Value!=null) { %>
                                <% if (SixMonthReturnOriginalCurrency.Key) { %>
                                <span class="o-rise"><%= SixMonthReturnOriginalCurrency.Text %>%</span>
                                <% } else { %>
                                <span class="o-fall"><%= SixMonthReturnOriginalCurrency.Text %>%</span>
                                <% } %>
                                <% } else {%>
                                <span>-</span>
                                <% } %>
                            </div>
                        </td>
                        <td class="c-cardTable__body" data-card-table-width="1/2">
                            <div class="c-cardTable__title" data-length="4">1年</div>
                            <div class="c-cardTable__content">
                                <% if (OneYearReturnOriginalCurrency.Value!=null) { %>
                                <% if (OneYearReturnOriginalCurrency.Key) { %>
                                <span class="o-rise"><%= OneYearReturnOriginalCurrency.Text %>%</span>
                                <% } else { %>
                                <span class="o-fall"><%= OneYearReturnOriginalCurrency.Text %>%</span>
                                <% } %>
                                <% } else {%>
                                <span>-</span>
                                <% } %>
                            </div>
                        </td>

                        <td class="c-cardTable__space"></td>
                        <td class="c-cardTable__footer" data-card-table-width="<%= IsOnlineSubscriptionAvailability == true ? '2/3' : '1/1' %>">
                            <div class="c-cardTable__content">
                                <ul class="l-collect l-collect--divider@lt">
                                    <li class="l-collect__item">
                                        <%= FocusTag %>
                                    </li>
                                    <li class="l-collect__item">
                                        <%= CompareTag %>
                                    </li>
                                </ul>
                            </div>
                        </td>

                        <td class="c-cardTable__footer" data-card-table-width="1/3">
                            <div class="c-cardTable__content">
                                <% if (IsOnlineSubscriptionAvailability) { %>
                                    <%= SubscriptionTag %>
                                <% } %>
                            </div>
                        </td>
                    </tr>
                </script>
                <script id="uid-template-1" type="text/html">
                    <tr class="c-cardTable__item u-nowrap@dt-only u-center@dt-only">
                        <td class="c-cardTable__top"></td>
                        <td class="c-cardTable__header u-wrap@dt-only u-left@dt-only">
                            <div class="c-cardTable__content">
                                <div class="l-target">
                                    <div class="l-target__name">
                                        <a href="<%= DetailUrl %>?id=<%= ProductCode %>" class="o-contentLink t-bold u-ellipsis-2" target="_blank"><%= ProductCode %> <%= FundName %></a>
                                    </div>
                                    <% if (Tags!=null) { %>
                                    <div class="l-target__additional">
                                        <ul class="l-tag">
                                            <% for(var i = 0; i < Tags.length; i++ ) { %>
                                            <li class="l-tag__item">
                                                <!-- <a href="#" class="o-tag">百元基金</a> -->
                                                <span class="o-tag"><%= Tags[i] %></span>
                                            </li>
                                            <% } %>
                                        </ul>
                                    </div>
                                    <% } %>
                                </div>
                            </div>
                        </td>
                        <td class="c-cardTable__space"></td>
                        <td class="c-cardTable__body" data-card-table-width="1/2">
                            <div class="c-cardTable__title" data-length="4">最新淨值<br>(淨值日)</div>
                            <% if (NetAssetValue != null) { %>
                            <div class="c-cardTable__content"><%= NetAssetValue.toFixed(4) %><br><span class="t-date"><%= NetAssetValueDate %></span></div>
                            <% } else {%>
                            <span>-</span>
                            <% } %>
                        </td>
                        <td class="c-cardTable__body" data-card-table-width="1/2">
                            <div class="c-cardTable__title" data-length="4">
                                幣別
                                <a href="#popupCurrency" class="o-icon o-icon--tip o-icon--xs" data-popup="true"></a>
                            </div>
                            <div class="c-cardTable__content">
                                <% if (Currency.Value!=null) { %>
                                <a href="#popupCurrencyWebSite" class="o-link" data-popup="true"><%= Currency.Value %></a>
                                <% } else {%>
                                <span>-</span>
                                <% } %>
                            </div>
                        </td>

                        <td class="c-cardTable__body" data-card-table-width="1/2">
                            <div class="c-cardTable__title" data-length="4">1個月</div>
                            <div class="c-cardTable__content">
                                <% if (OneMonthReturnTWD.Value!=null) { %>
                                <% if (OneMonthReturnTWD.Key) { %>
                                <span class="o-rise"><%= OneMonthReturnTWD.Text %>%</span>
                                <% } else { %>
                                <span class="o-fall"><%= OneMonthReturnTWD.Text %>%</span>
                                <% } %>
                                <% } else {%>
                                <span>-</span>
                                <% } %>
                            </div>
                        </td>
                        <td class="c-cardTable__body" data-card-table-width="1/2">
                            <div class="c-cardTable__title" data-length="4">3個月</div>
                            <div class="c-cardTable__content">
                                <% if (ThreeMonthReturnTWD.Value!=null) { %>
                                <% if (ThreeMonthReturnTWD.Key) { %>
                                <span class="o-rise"><%= ThreeMonthReturnTWD.Text %>%</span>
                                <% } else { %>
                                <span class="o-fall"><%= ThreeMonthReturnTWD.Text %>%</span>
                                <% } %>
                                <% } else {%>
                                <span>-</span>
                                <% } %>
                            </div>
                        </td>
                        <td class="c-cardTable__body" data-card-table-width="1/2">
                            <div class="c-cardTable__title" data-length="4">6個月</div>
                            <div class="c-cardTable__content">
                                <% if (SixMonthReturnTWD.Value!=null) { %>
                                <% if (SixMonthReturnTWD) { %>
                                <span class="o-rise"><%= SixMonthReturnTWD.Text %>%</span>
                                <% } else { %>
                                <span class="o-fall"><%= SixMonthReturnTWD.Text %>%</span>
                                <% } %>
                                <% } else {%>
                                <span>-</span>
                                <% } %>
                            </div>
                        </td>
                        <td class="c-cardTable__body" data-card-table-width="1/2">
                            <div class="c-cardTable__title" data-length="4">1年</div>
                            <div class="c-cardTable__content">
                                <% if (OneYearReturnTWD.Value!=null) { %>
                                <% if (OneYearReturnTWD.Key) { %>
                                <span class="o-rise"><%= OneYearReturnTWD.Text %>%</span>
                                <% } else { %>
                                <span class="o-fall"><%= OneYearReturnTWD.Text %>%</span>
                                <% } %>
                                <% } else {%>
                                <span>-</span>
                                <% } %>
                            </div>
                        </td>

                        <td class="c-cardTable__space"></td>
                        <td class="c-cardTable__footer" data-card-table-width="<%= IsOnlineSubscriptionAvailability == true ? '2/3' : '1/1' %>">
                            <div class="c-cardTable__content">
                                <ul class="l-collect l-collect--divider@lt">
                                    <li class="l-collect__item">
                                        <%= FocusTag %>
                                    </li>
                                    <li class="l-collect__item">
                                        <%= CompareTag %>
                                    </li>
                                </ul>
                            </div>
                        </td>

                        <td class="c-cardTable__footer" data-card-table-width="1/3">
                            <div class="c-cardTable__content">
                                <% if (IsOnlineSubscriptionAvailability) { %>
                                    <%= SubscriptionTag %>
                                <% } %>
                            </div>
                        </td>
                    </tr>
                </script>
                <script id="uid-template-2" type="text/html">
                    <tr class="c-cardTable__item u-nowrap@dt-only u-center@dt-only">
                        <td class="c-cardTable__top"></td>
                        <td class="c-cardTable__header u-wrap@dt-only u-left@dt-only">
                            <div class="c-cardTable__content">
                                <div class="l-target">
                                    <div class="l-target__name">
                                        <a href="<%= DetailUrl %>?id=<%= ProductCode %>" class="o-contentLink t-bold u-ellipsis-2" target="_blank"><%= ProductCode %> <%= FundName %></a>
                                    </div>
                                    <% if (Tags!=null) { %>
                                    <div class="l-target__additional">
                                        <ul class="l-tag">
                                            <% for(var i = 0; i < Tags.length; i++ ) { %>
                                            <li class="l-tag__item">
                                                <!-- <a href="#" class="o-tag">百元基金</a> -->
                                                <span class="o-tag"><%= Tags[i] %></span>
                                            </li>
                                            <% } %>
                                        </ul>
                                    </div>
                                    <% } %>
                                </div>
                            </div>
                        </td>
                        <td class="c-cardTable__space"></td>
                        <td class="c-cardTable__body" data-card-table-width="1/2">
                            <div class="c-cardTable__title" data-length="4">最新淨值<br>(淨值日)</div>
                            <% if (NetAssetValue != null) { %>
                            <div class="c-cardTable__content"><%= NetAssetValue.toFixed(4) %><br><span class="t-date"><%= NetAssetValueDate %></span></div>
                            <% } else {%>
                            <span>-</span>
                            <% } %>
                        </td>
                        <td class="c-cardTable__body" data-card-table-width="1/2">
                            <div class="c-cardTable__title" data-length="4">
                                幣別
                                <a href="#popupCurrency" class="o-icon o-icon--tip o-icon--xs" data-popup="true"></a>
                            </div>
                            <div class="c-cardTable__content">
                                <% if (FundCurrency.Value!=null) { %>
                                <a href="#popupCurrencyWebSite" class="o-link" data-popup="true"><%= FundCurrency.Value %></a>
                                <% } else {%>
                                <span>-</span>
                                <% } %>
                            </div>
                        </td>
                        <td class="c-cardTable__body" data-card-table-width="1/2">
                            <div class="c-cardTable__title" data-length="4">漲跌幅</div>
                            <div class="c-cardTable__content">
                                <% if (PercentageChangeInFundPrice.Value!=null) { %>
                                <% if (PercentageChangeInFundPrice.Key) { %>
                                <span class="o-rise"><%= PercentageChangeInFundPrice.Text %>%</span>
                                <% } else { %>
                                <span class="o-fall"><%= PercentageChangeInFundPrice.Text %>%</span>
                                <% } %>
                                <% } else {%>
                                <span>-</span>
                                <% } %>
                            </div>
                        </td>
                        <td class="c-cardTable__body" data-card-table-width="1/2">
                            <div class="c-cardTable__title" data-length="4">基金規模<br>(百萬)</div>
                            <% if (FundSizeMillionOriginalCurrency != null) { %>
                            <div class="c-cardTable__content"><%= FundSizeMillionOriginalCurrency.toFixed(4) %></div>
                            <% } else {%>
                            <span>-</span>
                            <% } %>
                        </td>
                        <td class="c-cardTable__body" data-card-table-width="1/2">
                            <div class="c-cardTable__title" data-length="4">基金類型</div>
                            <% if (FundType != null) { %>
                            <div class="c-cardTable__content"><%= FundType %></div>
                            <% } else {%>
                            <span>-</span>
                            <% } %>
                        </td>
                        <td class="c-cardTable__body" data-card-table-width="1/2">
                            <div class="c-cardTable__title" data-length="4">配息頻率</div>
                            <% if (DividendFrequencyName != null) { %>
                            <div class="c-cardTable__content"><%= DividendFrequencyName %></div>
                            <% } else {%>
                            <span>-</span>
                            <% } %>
                        </td>
                        <td class="c-cardTable__space"></td>
                        <td class="c-cardTable__footer" data-card-table-width="<%= IsOnlineSubscriptionAvailability == true ? '2/3' : '1/1' %>">
                            <div class="c-cardTable__content">
                                <ul class="l-collect l-collect--divider@lt">
                                    <li class="l-collect__item">
                                        <%= FocusTag %>
                                    </li>
                                    <li class="l-collect__item">
                                        <%= CompareTag %>
                                    </li>
                                </ul>
                            </div>
                        </td>

                        <td class="c-cardTable__footer" data-card-table-width="1/3">
                            <div class="c-cardTable__content">
                                <% if (IsOnlineSubscriptionAvailability) { %>
                                    <%= SubscriptionTag %>
                                <% } %>
                            </div>
                        </td>
                    </tr>

                </script>
                <script id="uid-template-3" type="text/html">
                    <tr class="c-cardTable__item u-nowrap@dt-only u-center@dt-only">
                        <td class="c-cardTable__top"></td>
                        <td class="c-cardTable__header u-wrap@dt-only u-left@dt-only">
                            <div class="c-cardTable__content">
                                <div class="l-target">
                                    <div class="l-target__name">
                                        <a href="<%= DetailUrl %>?id=<%= ProductCode %>" class="o-contentLink t-bold u-ellipsis-2" target="_blank"><%= ProductCode %> <%= FundName %></a>
                                    </div>
                                    <% if (Tags!=null) { %>
                                    <div class="l-target__additional">
                                        <ul class="l-tag">
                                            <% for(var i = 0; i < Tags.length; i++ ) { %>
                                            <li class="l-tag__item">
                                                <!-- <a href="#" class="o-tag">百元基金</a> -->
                                                <span class="o-tag"><%= Tags[i] %></span>
                                            </li>
                                            <% } %>
                                        </ul>
                                    </div>
                                    <% } %>
                                </div>
                            </div>
                        </td>
                        <td class="c-cardTable__space"></td>
                        <td class="c-cardTable__body" data-card-table-width="1/2">
                            <div class="c-cardTable__title" data-length="4">最新淨值<br>(淨值日)</div>
                            <% if (NetAssetValue != null) { %>
                            <div class="c-cardTable__content"><%= NetAssetValue.toFixed(4) %><br><span class="t-date"><%= NetAssetValueDate %></span></div>
                            <% } else {%>
                            <span>-</span>
                            <% } %>
                        </td>
                        <td class="c-cardTable__body" data-card-table-width="1/2">
                            <div class="c-cardTable__title" data-length="5">風險屬性</div>
                            <% if (RiskRewardLevel != null) { %>
                            <div class="c-cardTable__content"><%= RiskRewardLevel %></div>
                            <% } else {%>
                            <span>-</span>
                            <% } %>
                        </td>
                        <td class="c-cardTable__body" data-card-table-width="1/2">
                            <div class="c-cardTable__title" data-length="4">Sharpe</div>
                            <% if (Sharpe != null) { %>
                            <div class="c-cardTable__content"><%= Sharpe.toFixed(4) %></div>
                            <% } else {%>
                            <span>-</span>
                            <% } %>
                        </td>
                        <td class="c-cardTable__body" data-card-table-width="1/2">
                            <div class="c-cardTable__title" data-length="5">Beta</div>
                            <% if (Beta != null) { %>
                            <div class="c-cardTable__content"><%= Beta.toFixed(4) %></div>
                            <% } else {%>
                            <span>-</span>
                            <% } %>
                        </td>
                        <td class="c-cardTable__body" data-card-table-width="1/2">
                            <div class="c-cardTable__title" data-length="4">Alpha</div>
                            <% if (OneYearAlpha != null) { %>
                            <div class="c-cardTable__content"><%= OneYearAlpha.toFixed(4) %></div>
                            <% } else {%>
                            <span>-</span>
                            <% } %>
                        </td>
                        <td class="c-cardTable__body" data-card-table-width="1/2">
                            <div class="c-cardTable__title" data-length="5">年化標準差</div>
                            <% if (AnnualizedStandardDeviation != null) { %>
                            <div class="c-cardTable__content"><%= AnnualizedStandardDeviation.toFixed(4) %></div>
                            <% } else {%>
                            <span>-</span>
                            <% } %>
                        </td>
                        <td class="c-cardTable__space"></td>
                        <td class="c-cardTable__footer" data-card-table-width="<%= IsOnlineSubscriptionAvailability == true ? '2/3' : '1/1' %>">
                            <div class="c-cardTable__content">
                                <ul class="l-collect l-collect--divider@lt">
                                    <li class="l-collect__item">
                                        <%= FocusTag %>
                                    </li>
                                    <li class="l-collect__item">
                                        <%= CompareTag %>
                                    </li>
                                </ul>
                            </div>
                        </td>

                        <td class="c-cardTable__footer" data-card-table-width="1/3">
                            <div class="c-cardTable__content">
                                <% if (IsOnlineSubscriptionAvailability) { %>
                                    <%= SubscriptionTag %>
                                <% } %>
                            </div>
                        </td>
                    </tr>
                </script>
            </table>
            @{
                Html.RenderPartial("~/Views/Feature/Wealth/Component/Partial/_Pagination.cshtml");
            }
        </div>
    </div>
</div>
<template id="tmplKeywordNotFound">
    <div class="c-empty">
        <div class="c-empty__img">
            <img src="@Url.Content("~/themes/images/lions/lion-keyword.svg")" alt="">
        </div>
        <div class="c-empty__desc">哎呀！沒找到耶...<br>試試看其他關鍵字吧</div>
    </div>
</template>
<div id="popupFundRating" class="c-modal c-modal--xs mfp-hide">
    <div class="c-modal__wrap">
        <header class="c-modal__header">
            <h2 class="c-modal__title">基金評等</h2>
        </header>
        <div class="c-modal__content">
            <p>@Model.Content</p>
        </div>
    </div>
</div>
<script>
    (function ($, window, document, undefined) {
        function loading() {
            window.loading('show');
            setTimeout(() => {
                window.loading('hide');
            }, 300);
        }

        function QueryStringSearch() {
            var urlParams = new URLSearchParams(window.location.search);
            var hotkeyword = DOMPurify.sanitize(urlParams.get('HotKeyWord'));
            var hotproduct = DOMPurify.sanitize(urlParams.get('HotProduct'));
            var keyword = DOMPurify.sanitize(urlParams.get('keyword'));

            if (hotkeyword) {
                $("#hotkey_criteria input[type='checkbox']").each(function () {
                    var checkboxValue = $(this).val();

                    if (hotkeyword === checkboxValue) {
                        $(this).trigger('click');
                        return false;
                    }
                });
            }
            else if (hotproduct) {
                $("#hotproducts_criteria input[type='checkbox']").each(function () {
                    var checkboxValue = $(this).val();

                    if (hotproduct === checkboxValue) {
                        $(this).trigger('click');
                        return false;
                    }
                });
            }
            else if (keyword) {
                $('[data-keyword-input]').val(keyword);
                $("[data-keyword-submit]").trigger('click');
            }
        }

        function initBind() {
            // 拉霸
            $('[data-slider-bar="size"]').sliderBar({
                start: [0, 302],
                connect: true,
                range: {
                    'min': [0, 2],
                    '17%': [2, 8],
                    '33.5%': [10, 20],
                    '50%': [30, 70],
                    '66.5%': [100, 200],
                    '83%': [300, 2],
                    'max': 302
                },
                pips: {
                    mode: 'positions',
                    values: [0, 17, 33.5, 50, 66.5, 83, 100],
                    density: -1,
                    format: wNumb({
                        suffix: '百萬'
                    })
                }
            });
            $('[data-slider-bar="returnRate"]').sliderBar({
                start: [-5, 20],
                step: 5,
                connect: true,
                range: {
                    'min': -5,
                    'max': 20
                },
                pips: {
                    mode: 'steps',
                    density: -1,
                    format: wNumb({
                        suffix: '%'
                    })
                }
            });
            $('[data-slider-bar="sharpe"]').sliderBar({
                start: [-0.5, 2],
                step: 0.5,
                connect: true,
                range: {
                    'min': -0.5,
                    'max': 2
                },
                pips: {
                    mode: 'steps',
                    density: -1,
                    format: wNumb({})
                }
            });
            $('[data-slider-bar="beta"]').sliderBar({
                start: [-0.5, 2],
                step: 0.5,
                connect: true,
                range: {
                    'min': -0.5,
                    'max': 2
                },
                pips: {
                    mode: 'steps',
                    density: -1,
                    format: wNumb({})
                }
            });
            $('[data-slider-bar="standardDeviation"]').sliderBar({
                start: [-5, 20],
                step: 5,
                connect: true,
                range: {
                    'min': -5,
                    'max': 20
                },
                pips: {
                    mode: 'steps',
                    density: -1,
                    format: wNumb({
                        suffix: '%'
                    })
                }
            });

            // 報酬率組合
            $('[data-filter-part="returnRate"] input').on('change.returnRate', function () {
                // 日期區間有值時，才需要帶tag下去
                let releaseSetTag = $('[data-return-rate-date]:checked').length > 0;
                // 若父層[data-filter-group]的值為'special'，則不會印出已選擇的tag
                $(this).closest('[data-filter-group]').data('filter-group', releaseSetTag ? '' : 'special');
            });
            // 報酬率日期區間
            $('[data-return-rate-date]').on('change.returnRateDate', function () {
                // 日期區間有值時，才顯示報酬率拉霸
                $('[data-return-rate-money]').closest('.l-flex__item').toggleClass('u-hidden', $('[data-return-rate-date]:checked').length === 0);
                $('[data-return-rate-money]').val('').trigger('input.reset');
            });

            // 報酬率幣別固定預設值"原幣"
            $('[data-currency]').on('change.currency', function () {
                if (!$('[data-currency]:checked').length > 0) {
                    $('[data-currency]').eq(0).prop('checked', true);
                }
                $('[data-return-rate-money]').val('').trigger('input.reset');
            });
        }

        function initAutocomplete(data) {
            // 關鍵字搜尋 autocomplete，參考套件：https://github.com/devbridge/jQuery-Autocomplete
            $('#keyword').autocomplete({
                noCache: true,
                minChars: 0,
                containerClass: 'autocomplete-suggestions autocomplete-suggestions--keyword',
                maxHeight: 'auto',
                zIndex: 5,
                preserveInput: true,
                showNoSuggestionNotice: true,
                noSuggestionNotice: $('#tmplKeywordNotFound').html(),
                lookup: function (query, done) {
                    query = query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g, "\\$&");
                    if (query.length == 0) {
                        result = data.slice(0, 5);
                    } else {
                        result = data.filter(function (item) {
                            return new RegExp(query, 'gi').test(item.value);
                        });
                    }
                    done({ suggestions: result.slice(0, 5) });
                },
                onSearchComplete: function (query, suggestions) {
                    var autocomplete = $(this).autocomplete();
                    var container = autocomplete.suggestionsContainer;
                    var $this = $(this);

                    // 取消套件預設 blur 事件會關閉 suggestions container
                    $this.off('blur.autocomplete');

                    // 綁定 window click 事件，點擊頁面其他的地方時可關閉 suggestions container
                    if (autocomplete.isRegisteGlobalEvent != true) {
                        $(window).on('click.autocomplete',
                            {
                                source: this
                            },
                            e => {
                                if (e.target != e.data.source) {
                                    autocomplete.hide();
                                }
                            });
                        autocomplete.isRegisteGlobalEvent = true;
                    }

                    // 停止 like icon 冒泡，避免觸發 autocomplete 的 select 事件，導致 suggestions container 被關閉
                    $(container).find('.o-statusBtn').off('click.autocomplete').on('click.autocomplete',
                        function (e) {
                            e.stopPropagation();
                        });
                    // 綁定 like icon 的互動功能
                    $(container).find('[data-ia]').interactive();
                    // 綁定 like icon 的彈跳登入畫面
                    $(container).find('[data-popup]').magnificPopup();
                },
                formatResult: function (suggestion, currentValue) {
                    let detailUrl = suggestion.Data.DetailUrl ? suggestion.Data.DetailUrl : '#';
                    let className = suggestion.Data.IsLike ? 'is-active' : '';

                    // like 按鈕
                    let likeWord = suggestion.Data.IsNews ? '加入收藏|取消收藏' : '加入關注|取消關注';
                    let $like = suggestion.Data.IsLike != null ? suggestion.Data.IsLogin == true ?
                        // <!-- [data-ia]: 展示 icon 的互動操作功能 -->
                        `<a href="#" class="o-statusBtn o-statusBtn--like ${className}" data-msg="${likeWord}" data-ia="true"></a>` :
                        // <!-- [data-popup]: 未登入開啟登入彈跳視窗 -->
                        `<a href="#popupLogin" class="o-statusBtn o-statusBtn--like ${className}" data-popup="true"><i></i></a>` : '';

                    // 申購按鈕
                    let $purchase = suggestion.Data.Purchase ? suggestion.Data.IsLogin == true ? `<div class="c-itemKeyword__actions"><a href="#popupPurchase" class="o-btn o-btn--primary o-btn--auto o-btn--thinest" data-popup="true">申購</a></div>` : `<div class="c-itemKeyword__actions"><a href="#popupLogin" class="o-btn o-btn--primary o-btn--auto o-btn--thinest" data-popup="true">申購</a></div>` : '';
                    return `<div class="c-itemKeyword">
                                                <a href="${detailUrl}" class="c-itemKeyword__content" target="_blank">

                                                    <div class="c-itemKeyword__title">${$.Autocomplete.defaults.formatResult(suggestion, currentValue)}</div>
                                                </a>
                                                <div class="c-itemKeyword__collections">${$like}</div>
                                                ${$purchase}
                                            </div>`;
                }
            });
        }

        document.addEventListener('DOMContentLoaded', function () {
            if (!jQuery) {
                return;
            }
            initBind();
            let fjs;

            var token = $('input[name="__RequestVerificationToken"]').val();

            $.ajax({
                url: '@ClientRoute.GenerateUrl(this, "FundSearch", "GetAllFunds")',
                type: 'POST',
                data: { __RequestVerificationToken: token },
            }).done(function (data, textStatus, jqXHR) {
                QueryStringSearch();
                initFilter(data);
                initAutocomplete(data);

                $('[data-tab] [data-tab-target]').first().trigger('switch');
                $('[data-filter-switch="#uid-template"]').trigger('change');
            }).fail(function (jqXHR, textStatus, errorThrown) {
            }).always(function () {
                window.loading('hide');
            });

            function initFilter(data) {
                let opts = {
                    template: '#uid-template',
                    criterias: [
                        { field: 'HotProductsTags', ele: '#hotproducts_criteria input:checkbox' }, { field: 'HotKeyWordTags', ele: '#hotkey_criteria input:checkbox' },
                        { field: 'DomesticForeignFundIndicator', ele: '#DomesticForeignFundIndicator input:checkbox' }, { field: 'DomesticForeignFundIndicator', ele: '#DomesticForeignFundIndicator input:checkbox', all: 'all', selector: ':not(:checked)' },
                        { field: 'Currency.Value', ele: '#currencies_criteria input:checkbox' }, { field: 'Currency.Value', ele: '#currencies_criteria input:checkbox', all: 'all', selector: ':not(:checked)' },
                        { field: 'FundCompanyName', ele: '#companies_criteria input:checkbox' }, { field: 'FundCompanyName', ele: '#companies_criteria input:checkbox', all: 'all', selector: ':not(:checked)' },
                        { field: 'InvestmentTargetName', ele: '#target_criteria input:checkbox' }, { field: 'InvestmentTargetName', ele: '#target_criteria input:checkbox', all: 'all', selector: ':not(:checked)' },
                        { field: 'DividendFrequencyName', ele: '#DividendFrequencyName input:checkbox' }, { field: 'DividendFrequencyName', ele: '#DividendFrequencyName input:checkbox', all: 'all', selector: ':not(:checked)' },
                        { field: 'RiskRewardLevel', ele: '#RiskRewardLevel input:checkbox' }, { field: 'RiskRewardLevel', ele: '#RiskRewardLevel input:checkbox', all: 'all', selector: ':not(:checked)' },
                        { field: 'FundType', ele: '#fundtype_criteria input:checkbox' }, { field: 'FundType', ele: '#fundtype_criteria input:checkbox', all: 'all', selector: ':not(:checked)' },
                        { field: 'InvestmentRegionName', ele: '#region_criteria input:checkbox' }, { field: 'InvestmentRegionName', ele: '#region_criteria input:checkbox', all: 'all', selector: ':not(:checked)' },
                        { field: 'FundRating', ele: '#FundRating input:radio', type: 'range' },
                        { field: 'FundSizeMillionOriginalCurrency', ele: '[data-slider-val="FundSizeMillionOriginalCurrency"]', type: 'range', delimiter: ',' },
                        { field: 'Sharpe', ele: '[data-slider-val="sharpe"]', type: 'range', delimiter: ',' },
                        { field: 'Beta', ele: '[data-slider-val="beta"]', type: 'range', delimiter: ',' },
                        { field: 'AnnualizedStandardDeviation', ele: '[data-slider-val="standard"]', type: 'range', delimiter: ',' },
                    ],
                    callbacks: {
                        onFilterSelect: function (obj) {
                            if (obj.criteria.type === 'range') {
                                if (obj.values[0] !== obj.values[0]) {
                                    obj.values[0] = -99999;
                                }
                                if (obj.values[1] !== obj.values[1]) {
                                    obj.values[1] = 99999;
                                }
                            }
                        },

                        beforeRecordRender: function (record) {
                            const dot2 = 2;
                            record.PercentageChangeInFundPrice.Text = Math.abs(record.PercentageChangeInFundPrice.Value).toFixed(dot2);
                            record.OneMonthReturnOriginalCurrency.Text = Math.abs(record.OneMonthReturnOriginalCurrency.Value).toFixed(dot2);
                            record.ThreeMonthReturnOriginalCurrency.Text = Math.abs(record.ThreeMonthReturnOriginalCurrency.Value).toFixed(dot2);
                            record.SixMonthReturnOriginalCurrency.Text = Math.abs(record.SixMonthReturnOriginalCurrency.Value).toFixed(dot2);
                            record.OneYearReturnOriginalCurrency.Text = Math.abs(record.OneYearReturnOriginalCurrency.Value).toFixed(dot2);
                            record.OneMonthReturnTWD.Text = Math.abs(record.OneMonthReturnTWD.Value).toFixed(dot2);
                            record.ThreeMonthReturnTWD.Text = Math.abs(record.ThreeMonthReturnTWD.Value).toFixed(dot2);
                            record.SixMonthReturnTWD.Text = Math.abs(record.SixMonthReturnTWD.Value).toFixed(dot2);
                            record.OneYearReturnTWD.Text = Math.abs(record.OneYearReturnTWD.Value).toFixed(dot2);
                        },
                        afterFilter: function (result) {
                            this.paginator.setCurrentPage(1);
                            $('[id="uid-total"]').text(result.length);

                            let isEmpty = result.length == 0;
                            $(`[data-filter-empty=${isEmpty}]`).show();
                            $(`[data-filter-empty=${!isEmpty}]`).hide();


                            window.loading('hide');
                        },
                        afterPagination: function () {
                            $('[data-popup]').magnificPopup();
                            $('[eh-compare]').trigger('exec');
                            $('[eh-focus]').trigger('exec');
                            $('[eh-subscription-type]').trigger('exec');
                        }
                    },
                    search: {
                        ele: '#keyword', fields: ['ProductCode', 'FundName'], start_length: 2, bindEvent: false, multi: function () {
                            let texts = [];
                            $('[data-filter-tag="關鍵字"] .o-pickedTag__text').each(function (i, ele) {
                                let matches = ele.innerHTML.match(/關鍵字\s+(.+)/);
                                let text = matches && matches[1];
                                texts.push(text);
                            });
                            return texts;
                        }
                    },
                    order: {
                        default_sort: 'asc',
                        sorts: [
                            { field: 'group1', ele: 'select#uid-sortbox' }
                        ],
                        onSortEvent: function (f, e) {
                            let $self = $(this);
                            if (e.type === 'click') { } else if (e.type === 'change') {
                                let $selected = $self.find(':selected');
                                let field = $selected.data('sorting-column');
                                let order = $selected.data('sorting-class');
                                f.field = field;
                                if (!!order) {
                                    if (order === 'is-desc') {
                                        f.order = 'desc';
                                    } else if (order === 'is-asc') {
                                        f.order = 'asc';
                                    }
                                } else {
                                    f.order = f.order === 'desc' ? 'asc' : 'desc';
                                }
                            }
                        }
                    },
                    pagination: {
                        container: '#uid-pagination',
                        paginationView: '#uid-template-pagination',
                        visiblePages: 0,
                        perPage: {
                            values: [10, 50, 100, data.length],
                            container: '#uid-perPage',
                            perPageView: '#uid-template-perPage'
                        }
                    }
                };
                fjs = FilterJS(data, '#uid-fjs', opts);
                fjs.bindEvent('[data-filter-reset]', 'click.reset');
                fjs.bindEvent('[data-tag-close]', 'click.tag');
                fjs.bindEvent('[data-keyword-submit]', 'click.loading');

                $('#FundRating input').on('change', function (e) {
                    let $radios = $('input[type="radio"][name="star"]');
                    let noneChecked = $radios.filter(':checked').length === 0;
                    if (noneChecked) {
                        $radios.first().trigger('change');
                    }
                });
                $('[data-filter-reset]').on('click.reset', function (e) {
                    $('[data-tab] [data-tab-target]').first().trigger('switch');
                });
                $('[data-keyword-input]').on('keypress.loading', function (e) {
                    if (e.which === 13 && !!$(this).val().toString().trim()) {
                        $('[data-keyword-submit]').trigger('click.loading');
                    }
                });
                $('[data-tab-target="tab-1"]').on('switch', function (e) {
                    $('[data-filter-switch]:checked').trigger('change');
                });
                $('[data-filter-switch]').on('switch click change', function (e) {
                    let $self = $(this);
                    let switchTemplate = $self.data('filter-switch');
                    if (switchTemplate) {
                        $elTh = $('#table th[data-filter-switch-columns]')
                        $elTh.hide();
                        let switchCol = $self.data('filter-switch-columns').toString();
                        $elTh.each(function () {
                            let $this = $(this);
                            let columns = $this.data('filter-switch-columns').toString().split(',');
                            if (columns.includes(switchCol)) {
                                $this.show();
                            } else {
                                $this.hide();
                            }
                        });

                        fjs.setTemplate(switchTemplate, true);
                    }
                });


                $('[data-return-rate-money]').on('change.select2', function (e) {
                    let $currency = $('[data-currency]');
                    let $rateDate = $('[data-return-rate-date]');
                    $currency.each(function (i) {
                        let currencyData = $(this).data('filter-criteria-field');
                        let isCheck = this.checked;
                        $rateDate.each(function (ix) {
                            let rateDateData = $(this).data('filter-criteria-field').split('|');
                            let criteriaField = rateDateData[currencyData];
                            fjs.removeCriteria(criteriaField)
                            if (isCheck && this.checked) {
                                fjs.addCriteria({ field: criteriaField, ele: '[data-return-rate-money]', type: 'range', delimiter: ',' })
                            }
                        });
                    });
                });


                function fnScrollUp() {
                    loading();
                    $('#table').scrollPosition('scroll');
                }

                function fnScrollUpPageTo1() {
                    loading();
                    $('#table').scrollPosition('scroll');
                    fjs.paginator.setCurrentPage(1);
                }

                let $containgerPagination = $('#uid-pagination');
                $containgerPagination.on('click', '[data-page]', fnScrollUp);
                $containgerPagination.on('keypress', '[data-page-input]', function (e) {
                    if (e.which === 13) {
                        fnScrollUp();
                    }
                });
                $('#uid-view-perPage').on('change.pagesize', function () {
                    fnScrollUp();
                    fjs.paginator.setCurrentPage(1);
                }).sizebox();
                $('.l-mainstage input:not([data-keyword-input])').on('change.loading', loading);
                $('[data-keyword-submit]').on('click.loading', function () {
                    if (!!$('[data-keyword-input]').val().toString().trim()) {
                        loading();
                        insertKeywords();
                    }
                });
            }

            // table 排序功能
            $('#table').on('click.sorting', '.o-sorting', function (e) {
                e.preventDefault();
                window.loading('show');
                var $this = $(this);
                var orderby = '';
                if ($this.hasClass('is-asc')) {
                    $this.removeClass('is-asc').addClass('is-desc');
                    orderby = 'is-desc';
                } else {
                    $this.closest('.l-table').find('.o-sorting').removeClass('is-asc is-desc');
                    $this.addClass('is-asc');
                    orderby = 'is-asc';
                }

                // 連動 sortingbox
                let $sortingbox = $('#uid-sortbox');
                var sortingColumn = $this.data('sorting-column');
                let $option = $(`option[data-sorting-column="${sortingColumn}"][data-sorting-class="${orderby}"]`, $sortingbox);
                if ($option.length != 0) {
                    $option.prop('selected', true);
                    $sortingbox.trigger('change');
                } else {
                    $sortingbox.val(null).trigger('change');
                }

                // 因展示，使用 setTimeout 延遲關閉 loading
                setTimeout(() => {
                    window.loading('hide');
                }, 300);
            });

            // 手機版分頁排序功能

            $('[data-sortingbox]:not(#uid-sortbox)').on('change', function (e) {
                let self = this;
                let $self = $(this);
                let sortingColumn = $('option:selected', self).data('sorting-column');
                let orderby = $('option:selected', self).data('sorting-class');
                let $box = $('#uid-sortbox');
                let $option = $(`option[data-sorting-column="${sortingColumn}"][data-sorting-class="${orderby}"]`, $box);
                if ($option.length != 0) {
                    $option.prop('selected', true);
                    $box.trigger('change');
                } else {
                    $box.val(null).trigger('change');
                }
            })
            $('#uid-sortbox').on('change.select2', function (e) {
                let self = this;
                let $self = $(this);
                let sorting = $self.val();
                let $linkTable = $('#table');
                let sortingColumn = $('option:selected', self).data('sorting-column');
                let orderby = $('option:selected', self).data('sorting-class');

                // 連動 table
                $('.o-sorting', $linkTable).removeClass('is-asc is-desc');
                $(`[data-sorting-column="${sortingColumn}"]`, $linkTable).addClass(orderby);

                let $linkedBox = $('[data-sortingbox]').not(self);
                for (box of $linkedBox) {
                    let $box = $(box);
                    let $option = $(`option[data-sorting-column="${sortingColumn}"][data-sorting-class="${orderby}"]`, $box);
                    if ($option.length != 0) {
                        $option.prop('selected', true);
                        $box.trigger('change.select2');
                    } else {
                        $box.val(null).trigger('change.select2');
                    }
                }
            });
        });
    })(jQuery, window, document);
</script>
@model Feature.Wealth.Component.Models.FundDetail.FundViewModel
@using Feature.Wealth.Component.Models.FundDetail
@using Foundation.Wealth.Helper;
@using Foundation.Wealth.Extensions;
@{
    if (Model.FundBaseData == null)
    {
        return;
    }
    var BasicData = (OverseasFundBase)Model.FundBaseData;
    var FundRiskApiUrl = ClientRoute.GenerateUrl(this, "FundDetail", "GetFundRiskGraph");
    var FundSameLevelApiUrl = ClientRoute.GenerateUrl(this, "FundDetail", "GetSameLevelFund");
    var FundCloseYearPerformanceApiUrl = ClientRoute.GenerateUrl(this, "FundDetail", "GetCloseYearPerformance");
    var FundDocLinkApiUrl = ClientRoute.GenerateUrl(this, "FundDetail", "GetDocLink");
    var FundRuleTextApiUrl = ClientRoute.GenerateUrl(this, "FundDetail", "GetRuleText");
    var FundReturnAndNetValueApiUrl = ClientRoute.GenerateUrl(this, "FundDetail", "GetReturnAndNetValueTrend");

    var TemplateCanRender = true;
    if (Model.Item == null)
    {
        TemplateCanRender = false;
    }
    var detailsUrl = FundRelatedSettingModel.GetFundDetailsUrl();
    var closeFiveYearsUrl = FundRelatedSettingModel.GetFundCloseFiveYearsUrl();
    var exposeUrl = FundRelatedSettingModel.GetFundExposeUrl();
}

<div class="l-mainstage">
    <div class="l-mainstage__wrap">
        <div class="l-mainstage__toolbar">
            <div class="l-flex">
                <div class="l-flex__item" id="fundSelect">
                    <select class="o-selectbox o-selectbox--funds" data-selection-css-class="select2-selection--funds" data-selectbox="true" data-width="auto" data-placeholder="切換基金級別" data-dropdown-auto-width="true" data-dropdown-css-class="select2-dropdown--autoWidth">
                    </select>
                </div>
                <div class="l-flex__item u-right u-hidden@lt">
                    <a href="javascript:window.print()" class="o-prefixLink o-prefixLink--printer">列印</a>
                </div>
            </div>
        </div>
        <div class="l-mainstage__content">
            <div class="l-pageHeader">
                <div class="l-pageHeader__title">
                    <div class="c-pageHeader">
                        <div class="c-pageHeader__main">
                            <h1 class="c-pageHeader__title">@BasicData.ProductCode @BasicData.FundName</h1>
                            <!-- 如果沒有tag，不要放 div.c-pageHeader__tags 區塊 -->
                            @if (Model.TagsDic[FundTagEnum.DiscountTag].Any())
                            {
                            <div class="c-pageHeader__tags">
                                <ul class="l-tag">
                                    @foreach (var item in Model.TagsDic[FundTagEnum.DiscountTag])
                                        {
                                    <li class="l-tag__item">
                                        <a href="#" class="o-tag">@item.FundTagTitle</a>
                                    </li>
                                        }
                                </ul>
                            </div>
                            }
                        </div>
                        <div class="c-pageHeader__subContent">
                            <h2 class="c-pageHeader__subTitle">@BasicData.FundEnglishName</h2>
                        </div>
                        <div class="c-pageHeader__views">
                            <div class="o-views o-views--bk">@BasicData.ViewCount</div>
                        </div>
                    </div>
                </div>
                <div class="l-pageHeader__content">
                    <div class="l-pageHeader__info">
                        <div class="l-detailInfo">
                            <div class="l-detailInfo__major">
                                <div class="l-detailInfo__item">
                                    <div class="c-numerical">
                                        <div class="c-numerical__title u-left@dt-only"><span>最新淨值</span></div>
                                        <div class="c-numerical__content c-numerical__content--xl u-left@dt-only"><span>@BasicData.NetAssetValue.FormatDecimalNumber()</span><span class="t-unit">@BasicData.ValuationCurrency</span></div>
                                    </div>
                                </div>
                                <div class="l-detailInfo__item">
                                    <div class="c-numerical">
                                        <div class="c-numerical__title u-left@dt-only"><span>漲跌 / 漲跌幅</span></div>
                                        <div class="c-numerical__content c-numerical__content--xl u-left@dt-only">
                                            <span class="@(BasicData.QuoteChange.DecimalNumberToStyle())">@(BasicData.QuoteChange.FormatDecimalNumber()) / @(BasicData.QuoteChangePercent.FormatDecimalNumber())%</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="l-detailInfo__lower">
                                <div class="l-detailInfo__item">
                                    <div class="c-numerical c-numerical--horiz@lt">
                                        <div class="c-numerical__title u-left@dt-only"><span>最新淨值日</span></div>
                                        <div class="c-numerical__content c-numerical__content--xl@dt-only u-left@dt-only"><span>@BasicData.NetAssetValueDate</span></div>
                                    </div>
                                </div>
                                <div class="l-detailInfo__item">
                                    <div class="c-numerical c-numerical--horiz@lt">
                                        <div class="c-numerical__title u-left@dt-only"><span>風險屬性</span></div>
                                        <div class="c-numerical__content c-numerical__content--xl@dt-only u-left@dt-only">
                                            <span>
                                                @{
                                                    var risk = string.Empty;
                                                    switch (@BasicData.RiskLevel)
                                                    {
                                                        case "RR1":
                                                            risk = "低度屬性";
                                                            break;
                                                        case "RR2":
                                                            risk = "中低度屬性";
                                                            break;
                                                        case "RR3":
                                                            risk = "中度屬性";
                                                            break;
                                                        case "RR4":
                                                            risk = "中高度屬性";
                                                            break;
                                                        case "RR5":
                                                            risk = "高度屬性";
                                                            break;
                                                    }
                                                    risk = BasicData.RiskLevel + " " + risk;
                                                    @risk
                                                }
                                            </span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="l-pageHeader__action u-hidden-embed">
                        <ul class="l-pageWallet">
                            <li class="l-pageWallet__item">
                                <!-- [data-after-lt]: pad / mobile 自動顯示文字在後方，值為要顯示的文字 -->
                                <!-- [data-ia="true"]: 啟用互動式按鈕，預設會有 tooltip 及 toast 提示訊息，需搭配 [data-msg] 設定訊息才會有作用 -->
                                <!-- [data-msg]: active|inactive 的訊息，用 "|" 符號分隔，若訊息未設定完整則不顯示提示訊息 -->
                                <a href="javascript;" id="focusBtn" class="o-statusBtn o-statusBtn--like" data-after="關注" data-msg="加入關注|取消關注" data-ia="true" data-add="false"></a>
                            </li>
                            <li class="l-pageWallet__item">
                                <!-- [data-after-lt]: pad / mobile 自動顯示文字在後方，值為要顯示的文字 -->
                                <!-- [data-ia="true"]: 啟用互動式按鈕，預設會有 tooltip 及 toast 提示訊息，需搭配 [data-msg] 設定訊息才會有作用 -->
                                <!-- [data-msg]: active|inactive 的訊息，用 "|" 符號分隔，若訊息未設定完整則不顯示提示訊息 -->
                                <a href="javascript;" id="compareBtn" class="o-statusBtn o-statusBtn--compare " data-after="比較" data-msg="加入比較|取消比較" data-ia="true" data-add="false"></a>
                            </li>
                            @if (BasicData.OnlineSubscriptionAvailability == "Y")
                            {
                            <li class="l-pageWallet__btn">
                                <a href="#" data-eh="subscription-init,subscription-click" eh-subscription-init class="o-fixedBtn" data-popup="true" data-fundid="@BasicData.ProductCode">申購</a>
                            </li>
                            }
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="l-wrap">
    <div class="c-tab c-tab--wide" data-tab="true">
        <div class="c-tab__header">
            <ul class="c-tab__navs">
                <!-- .is-active: 作用中的項目 -->
                <!-- [data-tab-target]: 值需對應 [data-tab-panel-id] 的值，按下後會自動顯示相對的 panel -->
                <!-- 若為外連，不要賦予[data-tab-target]屬性 -->
                <li><a href="#" class="c-tab__item is-active" target="_self" title="基金綜覽" data-tab-target="tab-1">基金綜覽</a></li>
                <li><a href="#" class="c-tab__item " target="_self" title="績效/淨值" data-tab-target="tab-2">績效/淨值</a></li>
                <li><a href="#" class="c-tab__item " target="_self" title="基本資料" data-tab-target="tab-3">基本資料</a></li>
                <li><a href="#" class="c-tab__item " target="_self" title="持股狀況" data-tab-target="tab-4">持股狀況</a></li>
                <li><a href="#" class="c-tab__item " target="_self" title="風險指標" data-tab-target="tab-5">風險指標</a></li>
                <li><a href="#" class="c-tab__item " target="_self" title="配息紀錄" data-tab-target="tab-6">配息紀錄</a></li>
                <li><a href="#" class="c-tab__item " target="_self" title="規模變動" data-tab-target="tab-7">規模變動</a></li>
            </ul>
            <div class="c-tab__collapse">
                <a href="#" class="c-tab__switch"></a>
                <div class="c-tab__dropdown"><a href="#" class="c-tab__clone is-active" target="_self" title="基金綜覽" data-tab-target="tab-1">基金綜覽</a><a href="#" class="c-tab__clone " target="_self" title="績效/淨值" data-tab-target="tab-2">績效/淨值</a><a href="#" class="c-tab__clone " target="_self" title="基本資料" data-tab-target="tab-3">基本資料</a><a href="#" class="c-tab__clone " target="_self" title="持股狀況" data-tab-target="tab-4">持股狀況</a><a href="#" class="c-tab__clone " target="_self" title="風險指標" data-tab-target="tab-5">風險指標</a><a href="#" class="c-tab__clone " target="_self" title="配息紀錄" data-tab-target="tab-6">配息紀錄</a><a href="#" class="c-tab__clone " target="_self" title="規模變動" data-tab-target="tab-7">規模變動</a></div>
            </div>
        </div>
        <!-- is-active: 作用中的項目 -->
        <div class="c-tab__panel is-active" data-tab-panel-id="tab-1">
            <section class="c-section u-printBreak">
                <div class="c-section__title">基本資料</div>
                <div class="c-section__content">
                    <div class="c-zebraList">
                        <div class="c-zebraList__item">
                            <div class="c-zebraList__title">配息頻率</div>
                            <div class="c-zebraList__content"><span class="t-bold">@BasicData.DividendFrequencyName.CheckNullOrEmptyString()</span></div>
                        </div>
                        <div class="c-zebraList__item">
                            <div class="c-zebraList__title">投資區域</div>
                            <div class="c-zebraList__content"><span class="t-bold">@BasicData.InvestmentRegionName.CheckNullOrEmptyString()</span></div>
                        </div>
                        <div class="c-zebraList__item">
                            <div class="c-zebraList__title">基金規模</div>

                            <div class="c-zebraList__content">
                                @if (Model.FundScaleRecords.Any())
                                {
                                <span class="t-bold">@Model.FundScaleRecords[0].Scale.ToString("N0")  百萬@(Model.FundScaleRecords[0].Currency ) (@Model.FundScaleRecords[0].ScaleDate)</span>
                                }
                                else
                                {
                                @:-
                                }
                            </div>

                        </div>
                        <div class="c-zebraList__item">
                            <div class="c-zebraList__title">投資標的</div>
                            <div class="c-zebraList__content"><span class="t-bold">@BasicData.InvestmentTargetName.CheckNullOrEmptyString()</span></div>
                        </div>
                        <div class="c-zebraList__item">
                            <div class="c-zebraList__title">計價幣別 <a href="#popupCurrency" class="o-icon o-icon--tip o-icon--xs" data-popup="true">i</a></div>
                            <div class="c-zebraList__content"><span class="t-bold"><a href="#popupCurrencyWebSite" class="o-link" data-popup="true">@BasicData.ValuationCurrency.CheckNullOrEmptyString()</a></span></div>
                        </div>
                        <div class="c-zebraList__item">
                            <div class="c-zebraList__title">風險報酬等級</div>
                            <div class="c-zebraList__content"><span class="t-bold">@BasicData.RiskLevel.CheckNullOrEmptyString()</span></div>
                        </div>
                        <div class="c-zebraList__item">
                            <div class="c-zebraList__title">基金類型</div>
                            <div class="c-zebraList__content"><span class="t-bold">@BasicData.FundTypeName.CheckNullOrEmptyString()</span></div>
                        </div>
                        <div class="c-zebraList__item">
                            <div class="c-zebraList__title">基金評等 <a href="https://www.moneydj.com/funddj/notes/FundRating/Fund_Page.htm" class="o-icon o-icon--external o-icon--xs"></a></div>
                            <div class="c-zebraList__content">
                                <div class="o-starLevel o-starLevel--sm">
                                    @{
                                        if (BasicData.FundRating != null && BasicData.FundRating.IndexOf('.') > 0)
                                        {
                                            string[] spilt = BasicData.FundRating.Split('.');
                                            int star = Int16.Parse(spilt[0]);
                                            for (int i = 0; i < star; i++)
                                            {
                                                <div class="o-starLevel__item o-starLevel__item--active"></div>

                                            }
                                            if (spilt[1] == "5")
                                            {
                                                <div class="o-starLevel__item o-starLevel__item--half"></div>
                                                for (int i = 0; i < 5 - (star + 1); i++)
                                                {
                                                    <div class="o-starLevel__item"></div>
                                                }
                                            }
                                            else
                                            {
                                                for (int i = 0; i < 5 - star; i++)
                                                {
                                                    <div class="o-starLevel__item"></div>
                                                }
                                            }
                                        }
                                        else
                                        {
                                            for (int i = 0; i < 5; i++)
                                            {
                                                <div class="o-starLevel__item"></div>
                                            }
                                        }
                                    }
                                </div>
                            </div>
                        </div>
                        <div class="c-zebraList__item">
                            <div class="c-zebraList__title">指標指數</div>
                            <div class="c-zebraList__content"><span class="t-bold">@BasicData.IndicatorIndexName.CheckNullOrEmptyString()</span></div>
                        </div>
                    </div>
                </div>
            </section>
            <section class="c-section u-printBreak">
                <div class="c-section__content">
                    <div class="swiper c-swiper c-swiper--minor c-swiper--chart" data-carousel="true" data-swiper='{"spaceBetween":40, "autoplay": false, "allowTouchMove": false, "pagination": false, "loop": false, "slidesPerView": 1, "navigation":{ "enabled":true }, "breakpoints": {"1200": { "navigation":{ "enabled":false }, "slidesPerView": 2 }}}'>
                        <div class="swiper-wrapper c-swiper__wrapper">
                            <div class="swiper-slide c-swiper__slide">
                                <div class="c-section">
                                    <div class="c-section__title">近一年績效表現</div>
                                    <div class="c-section__content" data-chart="performance">
                                        <div class="c-empty">
                                            <div class="c-empty__img">
                                                <img src="@Url.Content("~/themes/images/lions/lion-keyword.svg")" alt="">
                                            </div>
                                            <div class="c-empty__desc">沒有資料</div>
                                        </div>
                                        <div class="c-chartBox u-hidden">
                                            <div class="c-chartBox__info">
                                                <div class="l-divideList">
                                                    <div class="l-divideList__item">
                                                        <div class="c-numerical">
                                                            <div class="c-numerical__title c-numerical__title--dk"><span>3個月</span></div>
                                                            <div class="c-numerical__content c-numerical__content--xl@lt-up"><span class="@BasicData.ThreeMonthReturnOriginalCurrency.DecimalNumberToStyle()">@BasicData.ThreeMonthReturnOriginalCurrency.FormatDecimalNumber(needPercent: true)</span></div>
                                                        </div>
                                                    </div>
                                                    <div class="l-divideList__item">
                                                        <div class="c-numerical">
                                                            <div class="c-numerical__title c-numerical__title--dk"><span>6個月</span></div>
                                                            <div class="c-numerical__content c-numerical__content--xl@lt-up"><span class="@BasicData.SixMonthReturnOriginalCurrency.DecimalNumberToStyle()">@BasicData.SixMonthReturnOriginalCurrency.FormatDecimalNumber(needPercent: true)</span></div>
                                                        </div>
                                                    </div>
                                                    <div class="l-divideList__item">
                                                        <div class="c-numerical">
                                                            <div class="c-numerical__title c-numerical__title--dk"><span>年初至今</span></div>
                                                            <div class="c-numerical__content c-numerical__content--xl@lt-up"><span class="@BasicData.YeartoDateReturnOriginalCurrency.DecimalNumberToStyle()">@BasicData.YeartoDateReturnOriginalCurrency.FormatDecimalNumber(needPercent: true)</span></div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="c-chartBox__chart">
                                                <div id="performanceChart"></div>
                                            </div>
                                        </div>
                                        @*<div class="l-dataNotes u-hidden"><span class="t-date">資料日期：</span><span class="t-date" data-update-date="performance"></span></div>*@
                                    </div>
                                </div>
                            </div>
                            <div class="swiper-slide c-swiper__slide">
                                <div class="c-section">
                                    <div class="c-section__title">近一年淨值表現</div>
                                    <div class="c-section__content" data-chart="netWorth">
                                        <div class="c-empty">
                                            <div class="c-empty__img">
                                                <img src="@Url.Content("~/themes/images/lions/lion-keyword.svg")" alt="">
                                            </div>
                                            <div class="c-empty__desc">沒有資料</div>
                                        </div>
                                        <div class="c-chartBox u-hidden">
                                            <div class="c-chartBox__info">
                                                <div class="l-divideList">
                                                    <div class="l-divideList__item">
                                                        <div class="c-numerical">
                                                            <div class="c-numerical__title c-numerical__title--dk"><span>近一年最高</span></div>
                                                            <div class="c-numerical__content c-numerical__content--xl@lt-up"><span class="t-bold" id="maxNetValue"></span></div>
                                                        </div>
                                                    </div>
                                                    <div class="l-divideList__item">
                                                        <div class="c-numerical">
                                                            <div class="c-numerical__title c-numerical__title--dk"><span>近一年最低</span></div>
                                                            <div class="c-numerical__content c-numerical__content--xl@lt-up"><span class="t-bold" id="minNetValue"></span></div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="c-chartBox__chart">
                                                <div id="netWorthChart"></div>
                                            </div>
                                        </div>
                                        @*<div class="l-dataNotes u-hidden"><span class="t-date">資料日期：</span><span class="t-date" data-update-date="netWorth">2023/09/13</span></div>*@
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="swiper-button-prev c-swiper__prev"><span>近一年績效表現</span></div>
                        <div class="swiper-button-next c-swiper__next"><span>近一年淨值表現</span></div>
                        <div class="swiper-pagination c-swiper__pagination"></div>
                    </div>
                </div>
            </section>
            <section class="c-section u-printBreak">
                <div class="c-section__title">同類基金排行</div>
                <div class="c-section__content">
                    @if (Model.FundTypeRanks.Any())
                    {
                    <div class="swiper c-swiper c-swiper--minor" data-carousel="true" data-swiper='{ "spaceBetween":20, "autoplay": false, "loop": false, "autoHeight": true, "navigation" :{ "enabled" :true }, "breakpoints" : {"1200": { "navigation" :{ "enabled" :false }}}}'>
                        <div class="swiper-wrapper c-swiper__wrapper">
                            @{
                                    var count = 1;
                                    foreach (var item in Model.FundTypeRanks)
                                    {
                                        var rankBeginTag = "<div class='swiper-slide c-swiper__slide'> <div class='l-rankingCard'>";
                                        var rankEndTag = " </div>  </div>";
                                        if (count == 1 || count % 3 == 1)
                                        {
                                @Html.Raw(rankBeginTag)
                                        }
                                <div class="l-rankingCard__item">
                                    <div class="c-rankingCard">
                                        <div class="c-rankingCard__num"><span>@count</span></div>
                                        <div class="c-rankingCard__name">
                                            <a href="@(detailsUrl+"?id=" + item.FirstBankCode)" class="o-contentLink t-bold u-ellipsis-2">@item.FirstBankCode @item.FundName</a>
                                        </div>
                                        <div class="c-rankingCard__data">
                                            <ul class="l-divideList l-divideList--closely@dt-only">
                                                <li class="l-divideList__item">
                                                    <div class="c-numerical c-numerical--horiz@dt-only">
                                                        <div class="c-numerical__title"><span>6個月績效</span></div>
                                                        <div class="c-numerical__content"><span class="@item.SixMonthReturnOriginalCurrency.DecimalNumberToStyle()">@item.SixMonthReturnOriginalCurrency.FormatDecimalNumber(2, needPercent: true)</span> </div>
                                                    </div>
                                                </li>
                                                <li class="l-divideList__item">
                                                    <div class="c-numericall c-numerical--horiz@dt-only">
                                                        <div class="c-numerical__title"><span>最新淨值</span></div>
                                                        <div class="c-numerical__content"><span class="">@item.NetAssetValue.FormatDecimalNumber(4)</span></div>
                                                    </div>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>

                                        if (count == Model.FundTypeRanks.Count() || count % 3 == 0)
                                        {
                                @Html.Raw(rankEndTag)
                                        }
                                        count++;
                                    }


                            }
                        </div>
                        <div class="swiper-button-next c-swiper__next"></div>
                        <div class="swiper-button-prev c-swiper__prev"></div>
                        <div class="swiper-pagination c-swiper__pagination"></div>
                    </div>
                    }
                    else
                    {
                    <div class="c-empty">
                        <div class="c-empty__img">
                            <img src="@Url.Content("~/themes/images/lions/lion-keyword.svg")" alt="">
                        </div>
                        <div class="c-empty__desc">沒有資料</div>
                    </div>
                    }
                </div>
            </section>
            @if (Model.TagsDic[FundTagEnum.SortTag].Any())
            {
            <div class="c-hashTags">
                <div class="c-hashTags__title">Tags</div>
                <div class="c-hashTags__content">
                    <ul class="l-divideList l-divideList--sm">
                        @foreach (var item in Model.TagsDic[FundTagEnum.SortTag])
                            {
                        <li class="l-divideList__item l-divideList__item--auto">
                            <a href="#" class="o-hashTag u-nowrap">#@item.FundTagTitle</a>
                        </li>
                            }
                    </ul>
                </div>
            </div>
            }
        </div>
        <div class="c-tab__panel" data-tab-panel-id="tab-2">
            <section class="c-section u-printBreak">
                <div class="c-section__title">績效淨值走勢</div>
                <div class="c-section__content">
                    <div class="l-flex u-flex-col u-flex-gap-sm">
                        <div class="l-flex__item">
                            <div class="o-capsulebox">
                                <label class="o-capsulebox__item">
                                    <input type="radio" name="trend" value="ori" class="o-capsulebox__input" checked data-trend-filter="trend">
                                    <span class="o-capsulebox__text">績效(原幣)</span>
                                </label>
                                <label class="o-capsulebox__item">
                                    <input type="radio" name="trend" value="twd" class="o-capsulebox__input" data-trend-filter="trend">
                                    <span class="o-capsulebox__text">績效(台幣)</span>
                                </label>
                                <label class="o-capsulebox__item">
                                    <input type="radio" name="trend" value="netWorth" class="o-capsulebox__input" data-trend-filter="trend">
                                    <span class="o-capsulebox__text">淨值</span>
                                </label>
                            </div>
                        </div>
                        <div class="l-flex__item" data-chart="trend">
                            <div class="c-empty">
                                <div class="c-empty__img">
                                    <img src="@Url.Content("~/themes/images/lions/lion-keyword.svg")" alt="">
                                </div>
                                <div class="c-empty__desc">沒有資料</div>
                            </div>
                            <div class="c-chartBox">
                                <div class="c-chartBox__filter">
                                    <div class="l-flex u-flex-gap-md u-flex-top u-flex-col@lt">
                                        <div class="l-flex__item">
                                            <div class="l-pickGroup">
                                                <div class="l-pickGroup__item">
                                                    <label class="o-btnRadio o-btnRadio--capsule o-btnRadio--sm">
                                                        <input class="o-btnRadio__input" type="radio" name="dateRange" value="sinceYear" data-trend-filter="dateRange" checked>
                                                        <div class="o-btnRadio__text"><span>今年以來</span></div>
                                                    </label>
                                                </div>
                                                <div class="l-pickGroup__item">
                                                    <label class="o-btnRadio o-btnRadio--capsule o-btnRadio--sm">
                                                        <input class="o-btnRadio__input" type="radio" name="dateRange" value="3m" data-trend-filter="dateRange">
                                                        <div class="o-btnRadio__text"><span>3個月</span></div>
                                                    </label>
                                                </div>
                                                <div class="l-pickGroup__item">
                                                    <label class="o-btnRadio o-btnRadio--capsule o-btnRadio--sm">
                                                        <input class="o-btnRadio__input" type="radio" name="dateRange" value="6m" data-trend-filter="dateRange">
                                                        <div class="o-btnRadio__text"><span>6個月</span></div>
                                                    </label>
                                                </div>
                                                <div class="l-pickGroup__item">
                                                    <label class="o-btnRadio o-btnRadio--capsule o-btnRadio--sm">
                                                        <input class="o-btnRadio__input" type="radio" name="dateRange" value="12m" data-trend-filter="dateRange">
                                                        <div class="o-btnRadio__text"><span>1年</span></div>
                                                    </label>
                                                </div>
                                                <div class="l-pickGroup__item">
                                                    <label class="o-btnRadio o-btnRadio--capsule o-btnRadio--sm">
                                                        <input class="o-btnRadio__input" type="radio" name="dateRange" value="24m" data-trend-filter="dateRange">
                                                        <div class="o-btnRadio__text"><span>2年</span></div>
                                                    </label>
                                                </div>
                                                <div class="l-pickGroup__item">
                                                    <label class="o-btnRadio o-btnRadio--capsule o-btnRadio--sm">
                                                        <input class="o-btnRadio__input" type="radio" name="dateRange" value="36m" data-trend-filter="dateRange">
                                                        <div class="o-btnRadio__text"><span>3年</span></div>
                                                    </label>
                                                </div>
                                                <div class="l-pickGroup__item">
                                                    <label class="o-btnRadio o-btnRadio--capsule o-btnRadio--sm">
                                                        <input class="o-btnRadio__input" type="radio" name="dateRange" value="60m" data-trend-filter="dateRange">
                                                        <div class="o-btnRadio__text"><span>5年</span></div>
                                                    </label>
                                                </div>
                                                <div class="l-pickGroup__item">
                                                    <label class="o-btnRadio o-btnRadio--capsule o-btnRadio--sm">
                                                        <input class="o-btnRadio__input" type="radio" name="dateRange" value="establishment" data-trend-filter="dateRange">
                                                        <div class="o-btnRadio__text"><span>成立至今</span></div>
                                                    </label>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="l-flex__item">
                                            <div class="l-flex u-flex-gap-min u-flex-top u-flex-left u-flex-right@dt-only">
                                                <div class="l-flex__item l-flex__item--auto">
                                                    <div class="l-form">
                                                        <div class="l-form__item">
                                                            <div class="o-calendarBox o-calendarBox--filter">
                                                                <!-- data-start-date: 請填寫基金成立日期 -->
                                                                <!-- data-start-date: 若無限制日期，請移除此Attribute -->
                                                                <!-- data-end-date: 若無限制日期，請移除此Attribute -->
                                                                <input type="text" class="o-calendarBox__input" data-trend-filter="inputStart" data-calendar="true" data-start-date="@BasicData.EstablishmentDate.CheckNullOrEmptyString()" data-end-date="0d" readonly>
                                                            </div>
                                                        </div>
                                                        <div class="l-form__error">
                                                            <span class="o-errorText"></span>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="l-flex__item l-flex__item--auto">-</div>
                                                <div class="l-flex__item l-flex__item--auto">
                                                    <div class="l-form">
                                                        <div class="l-form__item">
                                                            <div class="o-calendarBox o-calendarBox--filter">
                                                                <!-- data-start-date: 請填寫基金成立日期 -->
                                                                <!-- data-start-date: 若無限制日期，請移除此Attribute -->
                                                                <!-- data-end-date: 若無限制日期，請移除此Attribute -->
                                                                <input type="text" class="o-calendarBox__input" data-trend-filter="inputEnd" data-calendar="true" data-start-date="@BasicData.EstablishmentDate.CheckNullOrEmptyString()" data-end-date="0d" readonly>
                                                            </div>
                                                        </div>
                                                        <div class="l-form__error">
                                                            <span class="o-errorText"></span>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="l-flex__item l-flex__item--auto">
                                                    <button type="submit" class="o-searchBtn" data-trend-filter="submit"></button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="c-chartBox__chart">
                                    <div id="trendChart"></div>
                                </div>
                            </div>
                            <div class="l-dataNotes"><span class="t-date">資料日期：</span><span class="t-date" data-update-date="trend">2023/09/13</span></div>
                        </div>
                    </div>
                </div>
            </section>
            <section class="c-section u-printBreak">
                <div class="c-section__title">近30日淨值</div>
                <div class="c-section__content">
                    @if (Model.FundThiryDaysNetValue.Any())
                    {
                    <div class="swiper c-swiper c-swiper--minor" data-carousel="true" data-swiper='{"spaceBetween":20, "autoplay": false, "navigation":{ "enabled":true }, "breakpoints": {"1200": { "navigation":{ "enabled":false }}}}'>
                        <div class="swiper-wrapper c-swiper__wrapper">
                            @{
                                    int dayCount = 1;
                                    int ten = 10;
                                    int five = 5;
                                    foreach (var item in Model.FundThiryDaysNetValue)
                                    {
                                        if (dayCount % ten == 1)
                                        {
                                @Html.Raw("<div class='swiper-slide c-swiper__slide>'")
 <!-- 左右表格 -->
                                @Html.Raw("<div class='l-flex u-flex-gap-col-max@dt-only u-flex-col@lt u-flex-top@dt-only' data-merge-table>")
                                        }
                                        if (dayCount == 1 || dayCount % five == 1)
                                        {
                                            var hiddenHeaderClass = string.Empty;
                                            if (dayCount % ten == 6)
                                            {
                                                hiddenHeaderClass = "u-hidden@lt";
                                            }
                                @Html.Raw("<div class='l-flex__item'>")
                                @Html.Raw("<div class='l-table'>")
                                @Html.Raw("<table class='c-table u-center'>")
                                @Html.Raw("<colgroup><col style = 'width: 25%;' ><col style ='width: 25%;'><col style = 'width: 25%;' ><col style ='width: 25%;'></colgroup>")
                                @Html.Raw(string.Format("<thead class='{0}'><tr><th><div class='c-table__title'><span>日期</span></div></th>", hiddenHeaderClass))
                                @Html.Raw("<th><div class='c-table__title'><span>淨值</span></div></th>")
                                @Html.Raw("<th><div class='c-table__title'><span>漲跌</span></div></th>")
                                @Html.Raw("<th><div class='c-table__title'> <span>漲跌幅</span></div></th></tr></thead><tbody>")
                                        }
                                <tr>
                                    <td>
                                        @item.NetAssetValueDate
                                    </td>
                                    <td>
                                        @item.NetAssetValue.FormatDecimalNumber(4)
                                    </td>
                                    <td>
                                        <span class="@(item.FundPriceChange.DecimalNumberToStyle())">
                                            @item.FundPriceChange.FormatDecimalNumber()
                                        </span>
                                    </td>
                                    <td>
                                        <span class="@(item.PercentageChangeInFundPrice.DecimalNumberToStyle())">
                                            @item.PercentageChangeInFundPrice.FormatDecimalNumber(needPercent: true)
                                        </span>
                                    </td>
                                </tr>
                                        if (dayCount % five == 0)
                                        {
                                @Html.Raw("</tbody></table></div></div>")
                                        }

                                        if (dayCount == Model.FundThiryDaysNetValue.Count() || dayCount % 10 == 0)
                                        {
                                @Html.Raw(" </div> </div>")
                                            ;

                                        }
                                        dayCount++;
                                    }



                            }

                        </div>
                        <div class="swiper-button-next c-swiper__next"></div>
                        <div class="swiper-button-prev c-swiper__prev"></div>
                        <div class="swiper-pagination c-swiper__pagination"></div>
                    </div>
                    }
                    else
                    {
                    <div class="c-empty">
                        <div class="c-empty__img">
                            <img src="@Url.Content("~/themes/images/lions/lion-keyword.svg")" alt="">
                        </div>
                        <div class="c-empty__desc">沒有資料</div>
                    </div>
                    }
                </div>
            </section>
            <section class="c-section u-printBreak">
                <div class="c-section__title">報酬率</div>
                <div class="c-section__content">
                    @if (Model.FundRateOfReturn != null)
                    {
                    <div class="l-flex u-flex-col u-flex-gap-sm">
                        <div class="l-flex__item">
                            <div class="o-capsulebox">
                                <label class="o-capsulebox__item">
                                    <input type="radio" name="currency1" value="原幣" checked class="o-capsulebox__input">
                                    <span class="o-capsulebox__text">原幣</span>
                                </label>
                                <label class="o-capsulebox__item">
                                    <input type="radio" name="currency1" value="台幣" class="o-capsulebox__input">
                                    <span class="o-capsulebox__text">台幣</span>
                                </label>
                                <label class="o-capsulebox__item">
                                    <input type="radio" name="currency1" value="年化" class="o-capsulebox__input">
                                    <span class="o-capsulebox__text">年化</span>
                                </label>
                            </div>
                        </div>
                        @*原幣*@
                        <div class="l-flex__item" data-id="originReturnTable">
                            <div class="l-table" data-id="originReturnTable">
                                <table class="c-table u-center u-nowrap" data-fixed-columns="true" data-table="originReturnTable">
                                    <colgroup>
                                        <col style="width: 14.5%;">
                                        <col style="width: 9.5%;">
                                        <col style="width: 9.5%;">
                                        <col style="width: 9.5%;">
                                        <col style="width: 9.5%;">
                                        <col style="width: 9.5%;">
                                        <col style="width: 9.5%;">
                                        <col style="width: 9.5%;">
                                        <col style="width: 9.5%;">
                                        <col style="width: 9.5%;">
                                    </colgroup>
                                    <thead>
                                        <tr>
                                            <th>
                                                <div class="c-table__title"></div>
                                            </th>
                                            <th>
                                                <div class="c-table__title">
                                                    <span>1個月</span>
                                                </div>
                                            </th>
                                            <th>
                                                <div class="c-table__title">
                                                    <span>3個月</span>
                                                </div>
                                            </th>
                                            <th>
                                                <div class="c-table__title">
                                                    <span>6個月</span>
                                                </div>
                                            </th>
                                            <th>
                                                <div class="c-table__title">
                                                    <span>1年</span>
                                                </div>
                                            </th>
                                            <th>
                                                <div class="c-table__title">
                                                    <span>2年</span>
                                                </div>
                                            </th>
                                            <th>
                                                <div class="c-table__title">
                                                    <span>3年</span>
                                                </div>
                                            </th>
                                            <th>
                                                <div class="c-table__title">
                                                    <span>5年</span>
                                                </div>
                                            </th>
                                            <th>
                                                <div class="c-table__title">
                                                    <span>10年</span>
                                                </div>
                                            </th>
                                            <th>
                                                <div class="c-table__title">
                                                    <span>成立日</span>
                                                </div>
                                            </th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>單筆申購</td>
                                            <td>
                                                <span class="@(Model.FundRateOfReturn.OneMonthReturnOriginalCurrency.DecimalNumberToStyle())">@Model.FundRateOfReturn.OneMonthReturnOriginalCurrency.FormatDecimalNumber(2, needPercent: true)</span>
                                            </td>
                                            <td>
                                                <span class="@(Model.FundRateOfReturn.ThreeMonthReturnOriginalCurrency.DecimalNumberToStyle())">@Model.FundRateOfReturn.ThreeMonthReturnOriginalCurrency.FormatDecimalNumber(2, needPercent: true)</span>
                                            </td>
                                            <td>
                                                <span class="@(Model.FundRateOfReturn.SixMonthReturnOriginalCurrency.DecimalNumberToStyle())">@Model.FundRateOfReturn.SixMonthReturnOriginalCurrency.FormatDecimalNumber(2, needPercent: true)</span>
                                            </td>
                                            <td>
                                                <span class="@(Model.FundRateOfReturn.OneYearReturnOriginalCurrency.DecimalNumberToStyle())">@Model.FundRateOfReturn.OneYearReturnOriginalCurrency.FormatDecimalNumber(2, needPercent: true)</span>
                                            </td>
                                            <td>
                                                <span class="@(Model.FundRateOfReturn.TwoYearReturnOriginalCurrency.DecimalNumberToStyle())">@Model.FundRateOfReturn.TwoYearReturnOriginalCurrency.FormatDecimalNumber(2, needPercent: true)</span>
                                            </td>
                                            <td>
                                                <span class="@(Model.FundRateOfReturn.ThreeYearReturnOriginalCurrency.DecimalNumberToStyle())">@Model.FundRateOfReturn.ThreeYearReturnOriginalCurrency.FormatDecimalNumber(2, needPercent: true)</span>
                                            </td>
                                            <td>
                                                <span class="@(Model.FundRateOfReturn.FiveYearReturnOriginalCurrency.DecimalNumberToStyle())">@Model.FundRateOfReturn.FiveYearReturnOriginalCurrency.FormatDecimalNumber(2, needPercent: true)</span>
                                            </td>
                                            <td>
                                                <span class="@(Model.FundRateOfReturn.TenYearReturnOriginalCurrency.DecimalNumberToStyle())">@Model.FundRateOfReturn.TenYearReturnOriginalCurrency.FormatDecimalNumber(2, needPercent: true)</span>
                                            </td>
                                            <td>
                                                <span class="@(Model.FundRateOfReturn.InceptionDateReturnOriginalCurrency.DecimalNumberToStyle())">@Model.FundRateOfReturn.InceptionDateReturnOriginalCurrency.FormatDecimalNumber(2, needPercent: true)</span>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>定期定額</td>
                                            <td>
                                                <span class="@(Model.FundRateOfReturn.OneMonthReturnOriginalCurrencyRegularInvestment.DecimalNumberToStyle())">@Model.FundRateOfReturn.OneMonthReturnOriginalCurrencyRegularInvestment.FormatDecimalNumber(2, needPercent: true)</span>
                                            </td>
                                            <td>
                                                <span class="@(Model.FundRateOfReturn.ThreeMonthReturnOriginalCurrencyRegularInvestment.DecimalNumberToStyle())">@Model.FundRateOfReturn.ThreeMonthReturnOriginalCurrencyRegularInvestment.FormatDecimalNumber(2, needPercent: true)</span>
                                            </td>
                                            <td>
                                                <span class="@(Model.FundRateOfReturn.SixMonthReturnOriginalCurrencyRegularInvestment.DecimalNumberToStyle())">@Model.FundRateOfReturn.SixMonthReturnOriginalCurrencyRegularInvestment.FormatDecimalNumber(2, needPercent: true)</span>
                                            </td>
                                            <td>
                                                <span class="@(Model.FundRateOfReturn.OneYearReturnOriginalCurrencyRegularInvestment.DecimalNumberToStyle())">@Model.FundRateOfReturn.OneYearReturnOriginalCurrencyRegularInvestment.FormatDecimalNumber(2, needPercent: true)</span>
                                            </td>
                                            <td>
                                                <span class="@(Model.FundRateOfReturn.TwoYearReturnOriginalCurrencyRegularInvestment.DecimalNumberToStyle())">@Model.FundRateOfReturn.TwoYearReturnOriginalCurrencyRegularInvestment.FormatDecimalNumber(2, needPercent: true)</span>
                                            </td>
                                            <td>
                                                <span class="@(Model.FundRateOfReturn.ThreeYearReturnOriginalCurrencyRegularInvestment.DecimalNumberToStyle())">@Model.FundRateOfReturn.ThreeYearReturnOriginalCurrencyRegularInvestment.FormatDecimalNumber(2, needPercent: true)</span>
                                            </td>
                                            <td>
                                                <span class="@(Model.FundRateOfReturn.FiveYearReturnOriginalCurrencyRegularInvestment.DecimalNumberToStyle())">@Model.FundRateOfReturn.FiveYearReturnOriginalCurrencyRegularInvestment.FormatDecimalNumber(2, needPercent: true)</span>
                                            </td>
                                            <td>
                                                <span class="@(Model.FundRateOfReturn.TenYearReturnOriginalCurrencyRegularInvestment.DecimalNumberToStyle())">@Model.FundRateOfReturn.TenYearReturnOriginalCurrencyRegularInvestment.FormatDecimalNumber(2, needPercent: true)</span>
                                            </td>
                                            <td>
                                                <span class="@(Model.FundRateOfReturn.InceptionDateReturnOriginalCurrencyRegularInvestment.DecimalNumberToStyle())">@Model.FundRateOfReturn.InceptionDateReturnOriginalCurrencyRegularInvestment.FormatDecimalNumber(2, needPercent: true)</span>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <div class="l-dataNotes"><span class="t-date">資料日期：@Model.FundRateOfReturn.ReturnDataDate</span></div>
                        </div>
                        @*台幣*@
                        <div class="l-flex__item " data-id="twdReturnTable">
                            <div class="l-table" data-id="twdReturnTable">
                                <table class="c-table u-center u-nowrap" data-fixed-columns="true" data-table="twdReturnTable">
                                    <colgroup>
                                        <col style="width: 14.5%;">
                                        <col style="width: 9.5%;">
                                        <col style="width: 9.5%;">
                                        <col style="width: 9.5%;">
                                        <col style="width: 9.5%;">
                                        <col style="width: 9.5%;">
                                        <col style="width: 9.5%;">
                                        <col style="width: 9.5%;">
                                        <col style="width: 9.5%;">
                                        <col style="width: 9.5%;">
                                    </colgroup>
                                    <thead>
                                        <tr>
                                            <th>
                                                <div class="c-table__title"></div>
                                            </th>
                                            <th>
                                                <div class="c-table__title">
                                                    <span>1個月</span>
                                                </div>
                                            </th>
                                            <th>
                                                <div class="c-table__title">
                                                    <span>3個月</span>
                                                </div>
                                            </th>
                                            <th>
                                                <div class="c-table__title">
                                                    <span>6個月</span>
                                                </div>
                                            </th>
                                            <th>
                                                <div class="c-table__title">
                                                    <span>1年</span>
                                                </div>
                                            </th>
                                            <th>
                                                <div class="c-table__title">
                                                    <span>2年</span>
                                                </div>
                                            </th>
                                            <th>
                                                <div class="c-table__title">
                                                    <span>3年</span>
                                                </div>
                                            </th>
                                            <th>
                                                <div class="c-table__title">
                                                    <span>5年</span>
                                                </div>
                                            </th>
                                            <th>
                                                <div class="c-table__title">
                                                    <span>10年</span>
                                                </div>
                                            </th>
                                            <th>
                                                <div class="c-table__title">
                                                    <span>成立日</span>
                                                </div>
                                            </th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>單筆申購</td>
                                            <td>
                                                <span class="@(Model.FundRateOfReturn.OneMonthReturnTWD.DecimalNumberToStyle())">@Model.FundRateOfReturn.OneMonthReturnTWD.FormatDecimalNumber(2, needPercent: true)</span>
                                            </td>
                                            <td>
                                                <span class="@(Model.FundRateOfReturn.ThreeMonthReturnTWD.DecimalNumberToStyle())">@Model.FundRateOfReturn.ThreeMonthReturnTWD.FormatDecimalNumber(2, needPercent: true)</span>
                                            </td>
                                            <td>
                                                <span class="@(Model.FundRateOfReturn.SixMonthReturnTWD.DecimalNumberToStyle())">@Model.FundRateOfReturn.SixMonthReturnTWD.FormatDecimalNumber(2, needPercent: true)</span>
                                            </td>
                                            <td>
                                                <span class="@(Model.FundRateOfReturn.OneYearReturnTWD.DecimalNumberToStyle())">@Model.FundRateOfReturn.OneYearReturnTWD.FormatDecimalNumber(2, needPercent: true)</span>
                                            </td>
                                            <td>
                                                <span class="@(Model.FundRateOfReturn.TwoYearReturnTWD.DecimalNumberToStyle())">@Model.FundRateOfReturn.TwoYearReturnTWD.FormatDecimalNumber(2, needPercent: true)</span>
                                            </td>
                                            <td>
                                                <span class="@(Model.FundRateOfReturn.ThreeYearReturnOriginalCurrency.DecimalNumberToStyle())">@Model.FundRateOfReturn.ThreeYearReturnTWD.FormatDecimalNumber(2, needPercent: true)</span>
                                            </td>
                                            <td>
                                                <span class="@(Model.FundRateOfReturn.FiveYearReturnOriginalCurrency.DecimalNumberToStyle())">@Model.FundRateOfReturn.FiveYearReturnTWD.FormatDecimalNumber(2, needPercent: true)</span>
                                            </td>
                                            <td>
                                                <span class="@(Model.FundRateOfReturn.TenYearReturnOriginalCurrency.DecimalNumberToStyle())">@Model.FundRateOfReturn.TenYearReturnTWD.FormatDecimalNumber(2, needPercent: true)</span>
                                            </td>
                                            <td>
                                                <span class="@(Model.FundRateOfReturn.InceptionDateReturnOriginalCurrency.DecimalNumberToStyle())">@Model.FundRateOfReturn.InceptionDateReturnTWD.FormatDecimalNumber(2, needPercent: true)</span>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>定期定額</td>
                                            <td>
                                                <span class="@(Model.FundRateOfReturn.OneMonthReturnTWDRegularInvestment.DecimalNumberToStyle())">@Model.FundRateOfReturn.OneMonthReturnTWDRegularInvestment.FormatDecimalNumber(2, needPercent: true)</span>
                                            </td>
                                            <td>
                                                <span class="@(Model.FundRateOfReturn.ThreeMonthReturnTWDRegularInvestment.DecimalNumberToStyle())">@Model.FundRateOfReturn.ThreeMonthReturnTWDRegularInvestment.FormatDecimalNumber(2, needPercent: true)</span>
                                            </td>
                                            <td>
                                                <span class="@(Model.FundRateOfReturn.SixMonthReturnTWDRegularInvestment.DecimalNumberToStyle())">@Model.FundRateOfReturn.SixMonthReturnTWDRegularInvestment.FormatDecimalNumber(2, needPercent: true)</span>
                                            </td>
                                            <td>
                                                <span class="@(Model.FundRateOfReturn.OneYearReturnTWDRegularInvestment.DecimalNumberToStyle())">@Model.FundRateOfReturn.OneYearReturnTWDRegularInvestment.FormatDecimalNumber(2, needPercent: true)</span>
                                            </td>
                                            <td>
                                                <span class="@(Model.FundRateOfReturn.TwoYearReturnTWDRegularInvestment.DecimalNumberToStyle())">@Model.FundRateOfReturn.TwoYearReturnTWDRegularInvestment.FormatDecimalNumber(2, needPercent: true)</span>
                                            </td>
                                            <td>
                                                <span class="@(Model.FundRateOfReturn.ThreeYearReturnTWDRegularInvestment.DecimalNumberToStyle())">@Model.FundRateOfReturn.ThreeYearReturnTWDRegularInvestment.FormatDecimalNumber(2, needPercent: true)</span>
                                            </td>
                                            <td>
                                                <span class="@(Model.FundRateOfReturn.FiveYearReturnTWDRegularInvestment.DecimalNumberToStyle())">@Model.FundRateOfReturn.FiveYearReturnTWDRegularInvestment.FormatDecimalNumber(2, needPercent: true)</span>
                                            </td>
                                            <td>
                                                <span class="@(Model.FundRateOfReturn.TenYearReturnTWDRegularInvestment.DecimalNumberToStyle())">@Model.FundRateOfReturn.TenYearReturnTWDRegularInvestment.FormatDecimalNumber(2, needPercent: true)</span>
                                            </td>
                                            <td>
                                                <span class="@(Model.FundRateOfReturn.InceptionDateReturnTWDRegularInvestment.DecimalNumberToStyle())">@Model.FundRateOfReturn.InceptionDateReturnTWDRegularInvestment.FormatDecimalNumber(2, needPercent: true)</span>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <div class="l-dataNotes"><span class="t-date">資料日期：@Model.FundRateOfReturn.ReturnDataDate</span></div>
                        </div>
                        @*年化*@
                        <div class="l-flex__item " data-id="annualReturnTable">
                            <div class="l-table" data-id="annualReturnTable">
                                <table class="c-table u-center u-nowrap" data-fixed-columns="true" data-table="annualReturnTable">
                                    <colgroup>
                                        <col style="width: 14.5%;">
                                        <col style="width: 9.5%;">
                                        <col style="width: 9.5%;">
                                        <col style="width: 9.5%;">
                                        <col style="width: 9.5%;">
                                        <col style="width: 9.5%;">
                                        <col style="width: 9.5%;">
                                        <col style="width: 9.5%;">
                                        <col style="width: 9.5%;">
                                        <col style="width: 9.5%;">
                                    </colgroup>
                                    <thead>
                                        <tr>
                                            <th>
                                                <div class="c-table__title"></div>
                                            </th>
                                            <th>
                                                <div class="c-table__title">
                                                    <span>1個月</span>
                                                </div>
                                            </th>
                                            <th>
                                                <div class="c-table__title">
                                                    <span>3個月</span>
                                                </div>
                                            </th>
                                            <th>
                                                <div class="c-table__title">
                                                    <span>6個月</span>
                                                </div>
                                            </th>
                                            <th>
                                                <div class="c-table__title">
                                                    <span>1年</span>
                                                </div>
                                            </th>
                                            <th>
                                                <div class="c-table__title">
                                                    <span>2年</span>
                                                </div>
                                            </th>
                                            <th>
                                                <div class="c-table__title">
                                                    <span>3年</span>
                                                </div>
                                            </th>
                                            <th>
                                                <div class="c-table__title">
                                                    <span>5年</span>
                                                </div>
                                            </th>
                                            <th>
                                                <div class="c-table__title">
                                                    <span>10年</span>
                                                </div>
                                            </th>
                                            <th>
                                                <div class="c-table__title">
                                                    <span>成立日</span>
                                                </div>
                                            </th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>單筆申購</td>
                                            <td>
                                                <span class="@(Model.FundRateOfReturn.OneMonthReturnOriginalCurrencyAnnualizedReturn.DecimalNumberToStyle())">@Model.FundRateOfReturn.OneMonthReturnOriginalCurrencyAnnualizedReturn.FormatDecimalNumber(2, needPercent: true)</span>
                                            </td>
                                            <td>
                                                <span class="@(Model.FundRateOfReturn.ThreeMonthReturnOriginalCurrencyAnnualizedReturn.DecimalNumberToStyle())">@Model.FundRateOfReturn.ThreeMonthReturnOriginalCurrencyAnnualizedReturn.FormatDecimalNumber(2, needPercent: true)</span>
                                            </td>
                                            <td>
                                                <span class="@(Model.FundRateOfReturn.SixMonthReturnOriginalCurrencyAnnualizedReturn.DecimalNumberToStyle())">@Model.FundRateOfReturn.SixMonthReturnOriginalCurrencyAnnualizedReturn.FormatDecimalNumber(2, needPercent: true)</span>
                                            </td>
                                            <td>
                                                <span class="@(Model.FundRateOfReturn.OneYearReturnOriginalCurrencyAnnualizedReturn.DecimalNumberToStyle())">@Model.FundRateOfReturn.OneYearReturnOriginalCurrencyAnnualizedReturn.FormatDecimalNumber(2, needPercent: true)</span>
                                            </td>
                                            <td>
                                                <span class="@(Model.FundRateOfReturn.TwoYearReturnOriginalCurrencyAnnualizedReturn.DecimalNumberToStyle())">@Model.FundRateOfReturn.TwoYearReturnOriginalCurrencyAnnualizedReturn.FormatDecimalNumber(2, needPercent: true)</span>
                                            </td>
                                            <td>
                                                <span class="@(Model.FundRateOfReturn.ThreeYearReturnOriginalCurrencyAnnualizedReturn.DecimalNumberToStyle())">@Model.FundRateOfReturn.ThreeYearReturnOriginalCurrencyAnnualizedReturn.FormatDecimalNumber(2, needPercent: true)</span>
                                            </td>
                                            <td>
                                                <span class="@(Model.FundRateOfReturn.FiveYearReturnOriginalCurrencyAnnualizedReturn.DecimalNumberToStyle())">@Model.FundRateOfReturn.FiveYearReturnOriginalCurrencyAnnualizedReturn.FormatDecimalNumber(2, needPercent: true)</span>
                                            </td>
                                            <td>
                                                <span class="@(Model.FundRateOfReturn.TenYearReturnOriginalCurrencyAnnualizedReturn.DecimalNumberToStyle())">@Model.FundRateOfReturn.TenYearReturnOriginalCurrencyAnnualizedReturn.FormatDecimalNumber(2, needPercent: true)</span>
                                            </td>
                                            <td>
                                                <span class="@(Model.FundRateOfReturn.InceptionDateReturnOriginalCurrencyAnnualizedReturn.DecimalNumberToStyle())">@Model.FundRateOfReturn.InceptionDateReturnOriginalCurrencyAnnualizedReturn.FormatDecimalNumber(2, needPercent: true)</span>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>定期定額</td>
                                            <td>
                                                <span class="@(Model.FundRateOfReturn.OneMonthReturnRegularInvestmentAnnualizedReturn.DecimalNumberToStyle())">@Model.FundRateOfReturn.OneMonthReturnRegularInvestmentAnnualizedReturn.FormatDecimalNumber(2, needPercent: true)</span>
                                            </td>
                                            <td>
                                                <span class="@(Model.FundRateOfReturn.ThreeMonthReturnRegularInvestmentAnnualizedReturn.DecimalNumberToStyle())">@Model.FundRateOfReturn.ThreeMonthReturnRegularInvestmentAnnualizedReturn.FormatDecimalNumber(2, needPercent: true)</span>
                                            </td>
                                            <td>
                                                <span class="@(Model.FundRateOfReturn.SixMonthReturnRegularInvestmentAnnualizedReturn.DecimalNumberToStyle())">@Model.FundRateOfReturn.SixMonthReturnRegularInvestmentAnnualizedReturn.FormatDecimalNumber(2, needPercent: true)</span>
                                            </td>
                                            <td>
                                                <span class="@(Model.FundRateOfReturn.OneYearReturnRegularInvestmentAnnualizedReturn.DecimalNumberToStyle())">@Model.FundRateOfReturn.OneYearReturnRegularInvestmentAnnualizedReturn.FormatDecimalNumber(2, needPercent: true)</span>
                                            </td>
                                            <td>
                                                <span class="@(Model.FundRateOfReturn.TwoYearReturnRegularInvestmentAnnualizedReturn.DecimalNumberToStyle())">@Model.FundRateOfReturn.TwoYearReturnRegularInvestmentAnnualizedReturn.FormatDecimalNumber(2, needPercent: true)</span>
                                            </td>
                                            <td>
                                                <span class="@(Model.FundRateOfReturn.ThreeYearReturnRegularInvestmentAnnualizedReturn.DecimalNumberToStyle())">@Model.FundRateOfReturn.ThreeYearReturnRegularInvestmentAnnualizedReturn.FormatDecimalNumber(2, needPercent: true)</span>
                                            </td>
                                            <td>
                                                <span class="@(Model.FundRateOfReturn.FiveYearReturnRegularInvestmentAnnualizedReturn.DecimalNumberToStyle())">@Model.FundRateOfReturn.FiveYearReturnRegularInvestmentAnnualizedReturn.FormatDecimalNumber(2, needPercent: true)</span>
                                            </td>
                                            <td>
                                                <span class="@(Model.FundRateOfReturn.TenYearReturnRegularInvestmentAnnualizedReturn.DecimalNumberToStyle())">@Model.FundRateOfReturn.TenYearReturnRegularInvestmentAnnualizedReturn.FormatDecimalNumber(2, needPercent: true)</span>
                                            </td>
                                            <td>
                                                <span class="@(Model.FundRateOfReturn.InceptionDateReturnRegularInvestmentAnnualizedReturn.DecimalNumberToStyle())">@Model.FundRateOfReturn.InceptionDateReturnRegularInvestmentAnnualizedReturn.FormatDecimalNumber(2, needPercent: true)</span>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <div class="l-dataNotes"><span class="t-date">資料日期：@Model.FundRateOfReturn.ReturnDataDate</span></div>
                        </div>

                    </div>
                    }
                    else
                    {
                    <div class="c-empty">
                        <div class="c-empty__img">
                            <img src="@Url.Content("~/themes/images/lions/lion-keyword.svg")" alt="">
                        </div>
                        <div class="c-empty__desc">沒有資料</div>
                    </div>
                    }
                </div>
            </section>
            <section class="c-section u-printBreak">
                <div class="c-section__title">近5年年報酬率</div>
                <div class="c-section__content">
                    @{
                        if (Model.FundAnnunalRateOfReturn.Any())
                        {
                            var annunalRateOfReturnCount = Model.FundAnnunalRateOfReturn.Count();
                        <div class="l-table">
                            <table class="c-table u-center u-nowrap" data-fixed-columns="true">
                                <colgroup>
                                    <col style="width: 25%;">
                                    <col style="width: 15%;">
                                    <col style="width: 15%;">
                                    <col style="width: 15%;">
                                    <col style="width: 15%;">
                                    <col style="width: 15%;">
                                </colgroup>
                                <thead>
                                    <tr>
                                        <th>
                                            <div class="c-table__title">
                                                <span>項目</span>
                                            </div>
                                        </th>
                                        @for (int i = 0; i < annunalRateOfReturnCount; i++)
                                            {
                                        <th>
                                            <div class="c-table__title">
                                                <span>@Model.FundAnnunalRateOfReturn[i].Year</span>
                                            </div>
                                        </th>
                                            }
                                        @for (int i = 0; i < 5 - annunalRateOfReturnCount; i++)
                                            {
                                        <th>
                                            <div class="c-table__title">
                                                <span>@(Model.FundAnnunalRateOfReturn.Last().Year - (i + 1))</span>
                                            </div>
                                        </th>
                                            }

                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>年報酬率(原幣)</td>
                                        @for (int i = 0; i < annunalRateOfReturnCount; i++)
                                            {
                                        <td><span class="@Model.FundAnnunalRateOfReturn[i].AnnualReturnRateOriginalCurrency.DecimalNumberToStyle()">@Model.FundAnnunalRateOfReturn[i].AnnualReturnRateOriginalCurrency.FormatDecimalNumber()</span></td>
                                            }
                                        @for (int i = 0; i < 5 - annunalRateOfReturnCount; i++)
                                            {
                                        <td><span class="">-</span></td>
                                            }
                                    </tr>
                                    <tr>
                                        <td>年報酬率(台幣)</td>
                                        @for (int i = 0; i < annunalRateOfReturnCount; i++)
                                            {
                                        <td><span class="@Model.FundAnnunalRateOfReturn[i].AnnualReturnRateTWD.DecimalNumberToStyle()">@Model.FundAnnunalRateOfReturn[i].AnnualReturnRateTWD.FormatDecimalNumber()</span></td>
                                            }
                                        @for (int i = 0; i < 5 - annunalRateOfReturnCount; i++)
                                            {
                                        <td><span class="">-</span></td>
                                            }
                                    </tr>
                                    <tr>
                                        <td>指標指數漲跌幅</td>
                                        @for (int i = 0; i < annunalRateOfReturnCount; i++)
                                            {
                                        <td><span class="@Model.FundAnnunalRateOfReturn[i].IndicatorIndexPriceChange.DecimalNumberToStyle()">@Model.FundAnnunalRateOfReturn[i].IndicatorIndexPriceChange.FormatDecimalNumber()</span></td>
                                            }
                                        @for (int i = 0; i < 5 - annunalRateOfReturnCount; i++)
                                            {
                                        <td><span class="">-</span></td>
                                            }
                                    </tr>
                                    <tr>
                                        <td>差額</td>
                                        @for (int i = 0; i < annunalRateOfReturnCount; i++)
                                            {
                                        <td><span class="@Model.FundAnnunalRateOfReturn[i].Difference.DecimalNumberToStyle()">@Model.FundAnnunalRateOfReturn[i].Difference.FormatDecimalNumber()</span></td>
                                            }
                                        @for (int i = 0; i < 5 - annunalRateOfReturnCount; i++)
                                            {
                                        <td><span class="">-</span></td>
                                            }
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        }
                        else
                        {
                        <div class="c-empty">
                            <div class="c-empty__img">
                                <img src="@Url.Content("~/themes/images/lions/lion-keyword.svg")" alt="">
                            </div>
                            <div class="c-empty__desc">沒有資料</div>
                        </div>
                        }
                    }
                </div>
            </section>
            <section class="c-section u-printBreak">
                <div class="c-section__title">累積報酬率</div>
                <div class="c-section__content">
                    @if (Model.FundAccumulationRateOfReturn != null)
                    {


                    <div class="c-borderBox">
                        <div class="l-divideList l-divideList--col5@lt-only l-divideList--col2@mb-only">
                            <div class="l-divideList__item">
                                <div class="c-numerical">
                                    <div class="c-numerical__title c-numerical__title--dk"><span class="t-bold">一週</span></div>
                                    <div class="c-numerical__content"><span class="@Model.FundAccumulationRateOfReturn.OneWeekReturnOriginalCurrency.DecimalNumberToStyle()">@Model.FundAccumulationRateOfReturn.OneWeekReturnOriginalCurrency.FormatDecimalNumber(2, needPercent: true)</span></div>
                                </div>
                            </div>
                            <div class="l-divideList__item">
                                <div class="c-numerical">
                                    <div class="c-numerical__title c-numerical__title--dk"><span class="t-bold">一個月</span></div>
                                    <div class="c-numerical__content"><span class="@Model.FundAccumulationRateOfReturn.OneMonthReturnOriginalCurrency.DecimalNumberToStyle()">@Model.FundAccumulationRateOfReturn.OneMonthReturnOriginalCurrency.FormatDecimalNumber(2, needPercent: true)</span></div>
                                </div>
                            </div>
                            <div class="l-divideList__item">
                                <div class="c-numerical">
                                    <div class="c-numerical__title c-numerical__title--dk"><span class="t-bold">本月</span></div>
                                    <div class="c-numerical__content"><span class="@Model.FundAccumulationRateOfReturn.MonthtoDateReturnOriginalCurrency.DecimalNumberToStyle()">@Model.FundAccumulationRateOfReturn.MonthtoDateReturnOriginalCurrency.FormatDecimalNumber(2, needPercent: true)</span></div>
                                </div>
                            </div>
                            <div class="l-divideList__item">
                                <div class="c-numerical">
                                    <div class="c-numerical__title c-numerical__title--dk"><span class="t-bold">年初至今</span></div>
                                    <div class="c-numerical__content"><span class="@Model.FundAccumulationRateOfReturn.YeartoDateReturnOriginalCurrency.DecimalNumberToStyle()">@Model.FundAccumulationRateOfReturn.YeartoDateReturnOriginalCurrency.FormatDecimalNumber(2, needPercent: true)</span></div>
                                </div>
                            </div>
                            <div class="l-divideList__item">
                                <div class="c-numerical">
                                    <div class="c-numerical__title c-numerical__title--dk"><span class="t-bold">三個月</span></div>
                                    <div class="c-numerical__content"><span class="@Model.FundAccumulationRateOfReturn.ThreeMonthReturnOriginalCurrency.DecimalNumberToStyle()">@Model.FundAccumulationRateOfReturn.ThreeMonthReturnOriginalCurrency.FormatDecimalNumber(2, needPercent: true)</span></div>
                                </div>
                            </div>
                            <div class="l-divideList__item">
                                <div class="c-numerical">
                                    <div class="c-numerical__title c-numerical__title--dk"><span class="t-bold">六個月</span></div>
                                    <div class="c-numerical__content"><span class="@Model.FundAccumulationRateOfReturn.SixMonthReturnOriginalCurrency.DecimalNumberToStyle()">@Model.FundAccumulationRateOfReturn.SixMonthReturnOriginalCurrency.FormatDecimalNumber(2, needPercent: true)</span></div>
                                </div>
                            </div>
                            <div class="l-divideList__item">
                                <div class="c-numerical">
                                    <div class="c-numerical__title c-numerical__title--dk"><span class="t-bold">一年</span></div>
                                    <div class="c-numerical__content"><span class="@Model.FundAccumulationRateOfReturn.OneYearReturnOriginalCurrency.DecimalNumberToStyle()">@Model.FundAccumulationRateOfReturn.OneYearReturnOriginalCurrency.FormatDecimalNumber(2, needPercent: true)</span></div>
                                </div>
                            </div>
                            <div class="l-divideList__item">
                                <div class="c-numerical">
                                    <div class="c-numerical__title c-numerical__title--dk"><span class="t-bold">二年</span></div>
                                    <div class="c-numerical__content"><span class="@Model.FundAccumulationRateOfReturn.TwoYearReturnOriginalCurrency.DecimalNumberToStyle()">@Model.FundAccumulationRateOfReturn.TwoYearReturnOriginalCurrency.FormatDecimalNumber(2, needPercent: true)</span></div>
                                </div>
                            </div>
                            <div class="l-divideList__item">
                                <div class="c-numerical">
                                    <div class="c-numerical__title c-numerical__title--dk"><span class="t-bold">三年</span></div>
                                    <div class="c-numerical__content"><span class="@Model.FundAccumulationRateOfReturn.ThreeMonthReturnOriginalCurrency.DecimalNumberToStyle()">@Model.FundAccumulationRateOfReturn.ThreeMonthReturnOriginalCurrency.FormatDecimalNumber(2, needPercent: true)</span></div>
                                </div>
                            </div>
                            <div class="l-divideList__item">
                                <div class="c-numerical">
                                    <div class="c-numerical__title c-numerical__title--dk"><span class="t-bold">五年</span></div>
                                    <div class="c-numerical__content"><span class="@Model.FundAccumulationRateOfReturn.FiveYearReturnOriginalCurrency.DecimalNumberToStyle()">@Model.FundAccumulationRateOfReturn.FiveYearReturnOriginalCurrency.FormatDecimalNumber(2, needPercent: true)</span></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    }
                    else
                    {
                    <div class="c-empty">
                        <div class="c-empty__img">
                            <img src="@Url.Content("~/themes/images/lions/lion-keyword.svg")" alt="">
                        </div>
                        <div class="c-empty__desc">沒有資料</div>
                    </div>
                    }
                </div>
            </section>
            <section class="c-section u-printBreak">
                <div class="c-section__title">基準指數-道瓊指數</div>
                <div class="c-section__content">
                    <div class="l-dataNotes u-left"><span class="t-tip">近一年各月報酬率</span></div>
                    @if (Model.FundDowJonesIndexs.Any())
                    {


                    <div class="l-table">
                        @{
                                var dowJonesIndexsCount = Model.FundDowJonesIndexs.Count();
                            <table class="c-table u-center u-nowrap" data-fixed-columns="true">
                                <thead>
                                    <tr>
                                        <th>
                                            <div class="c-table__title">
                                                <span> </span>
                                            </div>
                                        </th>
                                        @for (int i = 0; i < dowJonesIndexsCount; i++)
                                            {
                                        <th>
                                            <div class="c-table__title">
                                                <span>@Model.FundDowJonesIndexs[i].Date.ToString("yyyy/MM")</span>
                                            </div>
                                        </th>
                                            }
                                        @for (int i = 0; i < 12 - dowJonesIndexsCount; i++)
                                            {
                                        <th>
                                            <div class="c-table__title">
                                                <span>@Model.FundDowJonesIndexs.Last().Date.AddMonths(i * -1).ToString("yyyy/MM")</span>
                                            </div>
                                        </th>
                                            }

                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>基金</td>
                                        @for (int i = 0; i < dowJonesIndexsCount; i++)
                                            {
                                        <td><span class="@Model.FundDowJonesIndexs[i].MonthlyReturnRate.DecimalNumberToStyle()">@Model.FundDowJonesIndexs[i].MonthlyReturnRate.FormatDecimalNumber()</span></td>
                                            }
                                        @for (int i = 0; i < 12 - dowJonesIndexsCount; i++)
                                            {
                                        <td><span class="">-</span></td>
                                            }
                                    </tr>
                                    <tr>
                                        <td>基準指數</td>
                                        @for (int i = 0; i < dowJonesIndexsCount; i++)
                                            {
                                        <td><span class="@Model.FundDowJonesIndexs[i].IndicatorIndexPriceChange.DecimalNumberToStyle()">@Model.FundDowJonesIndexs[i].IndicatorIndexPriceChange.FormatDecimalNumber()</span></td>
                                            }
                                        @for (int i = 0; i < 12 - dowJonesIndexsCount; i++)
                                            {
                                        <td><span class="">-</span></td>
                                            }
                                    </tr>
                                    <tr>
                                        <td>差額</td>
                                        @for (int i = 0; i < dowJonesIndexsCount; i++)
                                            {
                                        <td><span class="@Model.FundDowJonesIndexs[i].Difference.DecimalNumberToStyle()">@Model.FundDowJonesIndexs[i].Difference.FormatDecimalNumber()</span></td>
                                            }
                                        @for (int i = 0; i < 12 - dowJonesIndexsCount; i++)
                                            {
                                        <td><span class="">-</span></td>
                                            }
                                    </tr>
                                </tbody>
                            </table>
                        }
                    </div>
                    }
                    else
                    {
                    <div class="c-empty">
                        <div class="c-empty__img">
                            <img src="@Url.Content("~/themes/images/lions/lion-keyword.svg")" alt="">
                        </div>
                        <div class="c-empty__desc">沒有資料</div>
                    </div>
                    }

                </div>
            </section>
            @if (Model.TagsDic[FundTagEnum.SortTag].Any())
            {
            <div class="c-hashTags">
                <div class="c-hashTags__title">Tags</div>
                <div class="c-hashTags__content">
                    <ul class="l-divideList l-divideList--sm">
                        @foreach (var item in Model.TagsDic[FundTagEnum.SortTag])
                            {
                        <li class="l-divideList__item l-divideList__item--auto">
                            <a href="#" class="o-hashTag u-nowrap">#@item.FundTagTitle</a>
                        </li>
                            }
                    </ul>
                </div>
            </div>
            }
        </div>
        <div class="c-tab__panel" data-tab-panel-id="tab-3">
            <section class="c-section u-printBreak">
                <div class="c-section__title">基金資訊</div>
                <div class="c-section__content">
                    <div class="c-zebraList">
                        <div class="c-zebraList__item">
                            <div class="c-zebraList__title">ISIN Code</div>
                            <div class="c-zebraList__content"><span class="t-bold">@BasicData.ISINCode.CheckNullOrEmptyString()</span></div>
                        </div>
                        <div class="c-zebraList__item">
                            <div class="c-zebraList__title">註冊地</div>
                            <div class="c-zebraList__content"><span class="t-bold">@BasicData.RegistrationLocation.CheckNullOrEmptyString()</span></div>
                        </div>
                        <div class="c-zebraList__item">
                            <div class="c-zebraList__title">成立日期</div>
                            <div class="c-zebraList__content"><span class="t-bold" data-establishmentDate>@BasicData.EstablishmentDate.CheckNullOrEmptyString()</span></div>
                        </div>
                        <div class="c-zebraList__item">
                            <div class="c-zebraList__title">傘狀基金</div>
                            <div class="c-zebraList__content"><span class="t-bold">@BasicData.UmbrellaFund.CheckNullOrEmptyString()</span></div>
                        </div>
                        <div class="c-zebraList__item">
                            <div class="c-zebraList__title">基金核准生效日</div>
                            <div class="c-zebraList__content"><span class="t-bold">@BasicData.FundApprovalEffectiveDate.CheckNullOrEmptyString()</span></div>
                        </div>
                        <div class="c-zebraList__item">
                            <div class="c-zebraList__title">總代理基金生效日</div>
                            <div class="c-zebraList__content"><span class="t-bold">@BasicData.MasterAgentFundEffectiveDate.CheckNullOrEmptyString()</span></div>
                        </div>
                        <div class="c-zebraList__item">
                            <div class="c-zebraList__title">是否上架</div>
                            <div class="c-zebraList__content">
                                <span class="t-bold">
                                    @BasicData.WithdrawnApproval.CheckNullOrEmptyString()
                                </span>
                            </div>
                        </div>
                        <div class="c-zebraList__item">
                            <div class="c-zebraList__title">上架時間</div>
                            <div class="c-zebraList__content">
                                <span class="t-bold">
                                    @{
                                        if (!string.IsNullOrEmpty(BasicData.ListingDate) && BasicData.ListingDate != "N/A")
                                        {
                                            DateTime parseDate = DateTime.ParseExact(BasicData.ListingDate, "yyyyMMdd", System.Globalization.CultureInfo.InvariantCulture);
                                            string listingDate = parseDate.ToString("yyyy/MM/dd");
                                        @listingDate
                                        }
                                        else
                                        {
                                        @BasicData.ListingDate
                                        }
                                    }
                                </span>
                            </div>
                        </div>
                        <div class="c-zebraList__item">
                            <div class="c-zebraList__title">已撤銷核備</div>
                            <div class="c-zebraList__content">
                                <span class="t-bold">
                                    @BasicData.AvailabilityStatus.CheckNullOrEmptyString()
                                </span>
                            </div>
                        </div>
                        <div class="c-zebraList__item">
                            <div class="c-zebraList__title">下架時間</div>
                            <div class="c-zebraList__content">
                                <span class="t-bold">
                                    @{
                                        if (!string.IsNullOrEmpty(BasicData.DelistingDate) && BasicData.DelistingDate != "N/A")
                                        {
                                            DateTime parseDate = DateTime.ParseExact(BasicData.DelistingDate, "yyyyMMdd", System.Globalization.CultureInfo.InvariantCulture);
                                            string DelistingDate = parseDate.ToString("yyyy/MM/dd");
                                        @DelistingDate
                                        }
                                        else
                                        {
                                        @BasicData.DelistingDate
                                        }
                                    }
                                </span>
                            </div>
                        </div>
                        <div class="c-zebraList__item">
                            <div class="c-zebraList__title">最高經理費(%)</div>
                            <div class="c-zebraList__content">
                                <span class="t-bold">
                                    @BasicData.MaxManagerFee.FormatDecimalNumber(4)
                                </span>
                            </div>
                        </div>
                        <div class="c-zebraList__item">
                            <div class="c-zebraList__title">最高保管費(%)</div>
                            <div class="c-zebraList__content">
                                <span class="t-bold">
                                    @BasicData.MaxStorageFee.FormatDecimalNumber(4)
                                </span>
                            </div>
                        </div>
                        <div class="c-zebraList__item">
                            <div class="c-zebraList__title">單一報價</div>
                            <div class="c-zebraList__content">
                                <span class="t-bold">
                                    @BasicData.SingleQuote.CheckNullOrEmptyString()
                                </span>
                            </div>
                        </div>
                        <div class="c-zebraList__item">
                            <div class="c-zebraList__title">費用備註</div>
                            <div class="c-zebraList__content">
                                <span class="t-bold">
                                    @BasicData.FeeRemarks.CheckNullOrEmptyString()
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            <section class="c-section u-printBreak">
                <div class="c-section__title">基金公司與經理人</div>
                <div class="c-section__content">
                    <div class="c-zebraList">
                        <div class="c-zebraList__item">
                            <div class="c-zebraList__title">台灣總代理</div>
                            <div class="c-zebraList__content">
                                <span class="t-bold">
                                    @BasicData.AgentCompanyName.CheckNullOrEmptyString()<br>
                                    @if (!string.IsNullOrEmpty(BasicData.GeneralAgentWebsite))
                                    {
                                    <a href="@BasicData.GeneralAgentWebsite" class="o-link" target="_blank">@BasicData.GeneralAgentWebsite</a>
                                    }
                                </span>
                            </div>
                        </div>
                        <div class="c-zebraList__item">
                            <div class="c-zebraList__title">海外發行公司</div>
                            <div class="c-zebraList__content">
                                <span class="t-bold">
                                    @BasicData.OverseasFundIssuerName.CheckNullOrEmptyString()<br>
                                    @if (!string.IsNullOrEmpty(BasicData.OverseasIssuerWebsite))
                                    {
                                        if (BasicData.OverseasIssuerWebsite.IndexOf("http") == -1)
                                        {
                                    <a href="@("http://" + BasicData.OverseasIssuerWebsite)" class="o-link" target="_blank">@BasicData.OverseasIssuerWebsite</a>
                                        }
                                        else
                                        {
                                    <a href="@BasicData.OverseasIssuerWebsite" class="o-link" target="_blank">@BasicData.OverseasIssuerWebsite</a>
                                        }
                                    }
                                </span>
                            </div>
                        </div>
                        <div class="c-zebraList__item">
                            <div class="c-zebraList__title">保管機構</div>
                            <div class="c-zebraList__content"><span class="t-bold">@BasicData.CustodianInstitution.CheckNullOrEmptyString()</span></div>
                        </div>
                        <div class="c-zebraList__item">
                            <div class="c-zebraList__title">經理人</div>
                            <div class="c-zebraList__content"><span class="t-bold">@BasicData.FundManager.CheckNullOrEmptyString()</span></div>
                        </div>
                        <div class="c-zebraList__item">
                            <div class="c-zebraList__title">投資策略</div>
                            <div class="c-zebraList__content"><span class="t-bold">@BasicData.InvestmentStrategyInvestmentTarget.CheckNullOrEmptyString()</span></div>
                        </div>
                    </div>
                </div>
            </section>
            <section class="c-section u-printBreak">
                <div class="c-section__title">交易費用 </div>
                <div class="c-section__content">
                    <div class="c-zebraList">
                        <div class="c-zebraList__item">
                            <div class="c-zebraList__title">申購手續費</div>
                            <div class="c-zebraList__content">
                                <span class="t-bold">
                                    @BasicData.SubscriptionFee.CheckNullOrEmptyString()
                                </span>
                            </div>
                        </div>
                        <div class="c-zebraList__item">
                            <div class="c-zebraList__title">贖回手續費</div>
                            <div class="c-zebraList__content">
                                <span class="t-bold">
                                    @BasicData.RedemptionFee.CheckNullOrEmptyString()
                                </span>
                            </div>
                        </div>
                        <div class="c-zebraList__item">
                            <div class="c-zebraList__title">申購淨值日(註1)</div>
                            <div class="c-zebraList__content">
                                <span class="t-bold">
                                    @BasicData.SubscriptionDate.CheckNullOrEmptyString()
                                </span>
                            </div>
                        </div>
                        <div class="c-zebraList__item">
                            <div class="c-zebraList__title">贖回淨值日(註1)</div>
                            <div class="c-zebraList__content">
                                <span class="t-bold">
                                    @BasicData.RedemptionDate.CheckNullOrEmptyString()
                                </span>
                            </div>
                        </div>
                        <div class="c-zebraList__item">
                            <div class="c-zebraList__title">贖回入款日(註1)</div>
                            <div class="c-zebraList__content">
                                <span class="t-bold">
                                    @BasicData.RedemptionDepositDate.CheckNullOrEmptyString()
                                </span>
                            </div>
                        </div>
                        <div class="c-zebraList__item">
                            <div class="c-zebraList__title">最低單筆投資金額(註2)</div>
                            <div class="c-zebraList__content">
                                <span class="t-bold">
                                    @BasicData.MinimumSingleInvestmentAmount.CheckNullOrEmptyString()
                                </span>
                            </div>
                        </div>
                        <div class="c-zebraList__item">
                            <div class="c-zebraList__title">最低定期定額<br>投資金額(註2)</div>
                            <div class="c-zebraList__content">
                                <span class="t-bold">
                                    @BasicData.MinimumRegularInvestmentAmount.CheckNullOrEmptyString()
                                </span>
                            </div>
                        </div>
                        <div class="c-zebraList__item">
                            <div class="c-zebraList__title">最低定期不定額投資金額</div>
                            <div class="c-zebraList__content">
                                <span class="t-bold">
                                    @BasicData.MinimumIrregularInvestmentAmount.CheckNullOrEmptyString()
                                </span>
                            </div>
                        </div>
                        <div class="c-zebraList__item">
                            <div class="c-zebraList__title">銀行相關說明</div>
                            <div class="c-zebraList__content">
                                <span class="t-bold">
                                    @BasicData.BankRelatedInstructions.CheckNullOrEmptyString()
                                </span>
                            </div>
                        </div>
                    </div>
                    <div class="l-dataNotes">
                        <div class="l-flex u-flex-col u-flex-gap-xs u-left">
                            <div class="l-flex__item">
                                <div class="t-tip s4">註1：「T日」表示「交易生效日」，可能會受到基金投資地/本國非營業日影響而非等同「交易申請日」，即「交易生效日」可能晚於「交易申請日」；入款天數係以實際基金營業日計算，實際入款日將可能提前或延後，其中如有暫停報價日或外匯市場休市或其他因素，入款日將往後順延，上述日程僅提供參考，實際作業須依各基金公司之公告及作業為準。</div>
                            </div>
                            <div class="l-flex__item">
                                <div class="t-tip s4">註2：如iLEO APP另有規定，從其規定。</div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            <section class="c-section u-printBreak">
                <div class="c-section__title">文件下載</div>
                <div class="c-section__content">
                    <div class="l-linkBox">

                        <div class="l-linkBox__item u-hidden" id="openDoc">
                            <div class="c-box c-box--link u-shadow-animation">
                                <a href="#" target="_blank" class="o-prefixLink o-prefixLink--insidebox o-prefixLink--pdf t-bold"><span>公開說明書</span></a>
                            </div>
                        </div>

                        <div class="l-linkBox__item u-hidden" id="monthReportDoc">
                            <div class="c-box c-box--link u-shadow-animation">
                                <a href="#" target="_blank" class="o-prefixLink o-prefixLink--insidebox o-prefixLink--pdf t-bold"><span>基金月報</span></a>
                            </div>
                        </div>
                        @if (!string.IsNullOrEmpty(exposeUrl))
                        {
                        <div class="l-linkBox__item" id="fundRouteDoc">
                            <div class="c-box c-box--link u-shadow-animation">
                                <a href="@(exposeUrl+ "?id=" + BasicData.ProductCode)" target="_blank" class="o-prefixLink o-prefixLink--insidebox o-prefixLink--link t-bold">
                                    <span>基金通路報酬揭露</span>
                                </a>
                            </div>
                        </div>
                        }

                        <div class="l-linkBox__item u-hidden" id="investExclusiveDoc">
                            <div class="c-box c-box--link u-shadow-animation">
                                <a href="#" target="_blank" class="o-prefixLink o-prefixLink--insidebox o-prefixLink--pdf t-bold"><span>投資人須知(專屬資訊)</span></a>
                            </div>
                        </div>

                        <div class="l-linkBox__item u-hidden" id="investNomnalDoc">
                            <div class="c-box c-box--link u-shadow-animation">
                                <a href="#" target="_blank" class="o-prefixLink o-prefixLink--insidebox o-prefixLink--pdf t-bold"><span>投資人須知(一般資訊)</span></a>
                            </div>
                        </div>

                        <div class="l-linkBox__item u-hidden" id="financialReportDoc">
                            <div class="c-box c-box--link u-shadow-animation">
                                <a href="#" target="_blank" class="o-prefixLink o-prefixLink--insidebox o-prefixLink--pdf t-bold"><span>財務報告書</span></a>
                            </div>
                        </div>
                        @if (!string.IsNullOrEmpty(closeFiveYearsUrl))
                        {
                        <div class="l-linkBox__item ">
                            <div class="c-box c-box--link u-shadow-animation">
                                <a href="@(closeFiveYearsUrl + "?id=" + BasicData.ProductCode)" target="_blank" class="o-prefixLink o-prefixLink--insidebox o-prefixLink--link t-bold"><span>近五年費用率及報酬率</span></a>
                            </div>
                        </div>
                        }
                    </div>
                </div>
            </section>
            <section class="c-section u-printBreak">
                <div class="c-section__title">投資人服務及保護 </div>
                <div class="c-section__content">
                    <div class="l-linkBox">

                        <div class="l-linkBox__item u-hidden" id="popupTradeRuleClick">
                            <div class="c-box c-box--link u-shadow-animation">
                                <a href="#popupTradeRule" target="_blank" data-popup="true" class="o-prefixLink o-prefixLink--insidebox o-prefixLink--link t-bold"><span>短線交易規定</span></a>
                            </div>
                        </div>

                        <div class="l-linkBox__item u-hidden" id="popupPriceMechanismClick">
                            <div class="c-box c-box--link u-shadow-animation">
                                <a href="#popupPriceMechanism" target="_blank" data-popup="true" class="o-prefixLink o-prefixLink--insidebox o-prefixLink--link t-bold"><span>公平價格調整機制</span></a>
                            </div>
                        </div>

                        <div class="l-linkBox__item u-hidden" id="popupAntiDilutionClick">
                            <div class="c-box c-box--link u-shadow-animation">
                                <a href="#popupAntiDilution" target="_blank" data-popup="true" class="o-prefixLink o-prefixLink--insidebox o-prefixLink--link t-bold"><span>反稀釋機制</span></a>
                            </div>
                        </div>

                    </div>
                </div>
            </section>
            @if (Model.TagsDic[FundTagEnum.SortTag].Any())
            {
            <div class="c-hashTags">
                <div class="c-hashTags__title">Tags</div>
                <div class="c-hashTags__content">
                    <ul class="l-divideList l-divideList--sm">
                        @foreach (var item in Model.TagsDic[FundTagEnum.SortTag])
                            {
                        <li class="l-divideList__item l-divideList__item--auto">
                            <a href="#" class="o-hashTag u-nowrap">#@item.FundTagTitle</a>
                        </li>
                            }
                    </ul>
                </div>
            </div>
            }
        </div>
        <div class="c-tab__panel" data-tab-panel-id="tab-4">
            <section class="c-section u-printBreak">
                <div class="c-section__content">
                    <div class="l-flex u-flex-col u-flex-gap-sm">
                        <div class="l-flex__item">
                            <div class="o-capsulebox">
                                <label class="o-capsulebox__item">
                                    <input type="radio" name="so1" value="industry" checked class="o-capsulebox__input">
                                    <span class="o-capsulebox__text">產業</span>
                                </label>
                                <label class="o-capsulebox__item">
                                    <input type="radio" name="so1" value="area" class="o-capsulebox__input">
                                    <span class="o-capsulebox__text">區域</span>
                                </label>
                            </div>
                        </div>
                        <div class="l-flex__item" data-chart="so1">
                            <div class="c-empty">
                                <div class="c-empty__img">
                                    <img src="@Url.Content("~/themes/images/lions/lion-keyword.svg")" alt="">
                                </div>
                                <div class="c-empty__desc">沒有資料</div>
                            </div>
                            <div class="c-chartBox">
                                <div class="c-chartBox__chart">
                                    <div id="soChart"></div>
                                </div>
                            </div>
                            <div class="l-dataNotes"><span class="t-date">資料日期：</span><span class="t-date" data-update-date="so1">2023/09/13</span></div>
                        </div>
                    </div>
                </div>
            </section>
            <section class="c-section u-printBreak">
                <div class="c-section__title">前十大持股</div>
                <div class="c-section__content">
                    @if (Model.FundTopTenStockHolding.Any())
                    {
                    <div class="l-table">
                        <table class="c-table">
                            <colgroup>
                                <col>
                                <col style="width: 16%; min-width: 103px;">
                            </colgroup>
                            <thead>
                                <tr class="u-nowrap">
                                    <th>
                                        <div class="c-table__title"><span>持股名稱</span></div>
                                    </th>
                                    <th style="min-width: 103px;">
                                        <div class="c-table__title"><span>比例</span></div>
                                    </th>
                                </tr>
                            </thead>
                            <tbody>
                                @foreach (var item in Model.FundTopTenStockHolding)
                                    {
                                <tr>
                                    <td>@item.FundName</td>
                                    <td class="u-center">@item.Holding.FormatDecimalNumber(needPercent: true)</td>
                                </tr>
                                    }

                            </tbody>
                        </table>
                    </div>
                    <div class="l-dataNotes"><span class="t-date">資料日期：@Model.FundTopTenStockHolding.FirstOrDefault().Date</span></div>
                    }
                    else
                    {
                    <div class="c-empty">
                        <div class="c-empty__img">
                            <img src="@Url.Content("~/themes/images/lions/lion-keyword.svg")" alt="">
                        </div>
                        <div class="c-empty__desc">沒有資料</div>
                    </div>
                    }
                </div>

            </section>
            @if (Model.TagsDic[FundTagEnum.SortTag].Any())
            {
            <div class="c-hashTags">
                <div class="c-hashTags__title">Tags</div>
                <div class="c-hashTags__content">
                    <ul class="l-divideList l-divideList--sm">
                        @foreach (var item in Model.TagsDic[FundTagEnum.SortTag])
                            {
                        <li class="l-divideList__item l-divideList__item--auto">
                            <a href="#" class="o-hashTag u-nowrap">#@item.FundTagTitle</a>
                        </li>
                            }
                    </ul>
                </div>
            </div>
            }
        </div>
        <div class="c-tab__panel" data-tab-panel-id="tab-5">
            <section class="c-section u-printBreak">
                <div class="c-section__title">風險指標</div>
                <div class="c-section__content">
                    <div class="l-flex u-flex-col u-flex-gap-sm">
                        <div class="l-flex__item">
                            @if (TemplateCanRender)
                            {
                            @Html.Sitecore().Field(Template.FundDetailsPage.Fields.Description.ToString(), Model.Item)
                            }
                        </div>
                        @if (Model.FundRiskindicators != null)
                        {
                        <div class="l-flex__item">
                            <div class="l-table">
                                <table class="c-table u-center u-nowrap" data-fixed-columns="true">
                                    <colgroup>
                                        <col style="width: 20%;">
                                        <col style="width: 16%;">
                                        <col style="width: 16%;">
                                        <col style="width: 16%;">
                                        <col style="width: 16%;">
                                        <col style="width: 16%;">
                                    </colgroup>
                                    <thead>
                                        <tr>
                                            <th>
                                                <div class="c-table__title"><span>項目</span></div>
                                            </th>
                                            <th>
                                                <div class="c-table__title"><span>6個月</span></div>
                                            </th>
                                            <th>
                                                <div class="c-table__title"><span>1年</span></div>
                                            </th>
                                            <th>
                                                <div class="c-table__title"><span>3年</span></div>
                                            </th>
                                            <th>
                                                <div class="c-table__title"><span>5年</span></div>
                                            </th>
                                            <th>
                                                <div class="c-table__title"><span>10年 </span></div>
                                            </th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>標準差</td>
                                            <td @Model.FundRiskindicators.SixMonthStandardDeviation.DecimalNegativeStyle()>@Model.FundRiskindicators.SixMonthStandardDeviation.FormatDecimalNumber(needAbs: false)</td>
                                            <td @Model.FundRiskindicators.OneYearStandardDeviation.DecimalNegativeStyle()>@Model.FundRiskindicators.OneYearStandardDeviation.FormatDecimalNumber(needAbs: false)</td>
                                            <td @Model.FundRiskindicators.ThreeYearStandardDeviation.DecimalNegativeStyle()>@Model.FundRiskindicators.ThreeYearStandardDeviation.FormatDecimalNumber(needAbs: false)</td>
                                            <td @Model.FundRiskindicators.FiveYearStandardDeviation.DecimalNegativeStyle()>@Model.FundRiskindicators.FiveYearStandardDeviation.FormatDecimalNumber(needAbs: false)</td>
                                            <td @Model.FundRiskindicators.TenYearStandardDeviation.DecimalNegativeStyle()>@Model.FundRiskindicators.TenYearStandardDeviation.FormatDecimalNumber(needAbs: false)</td>
                                        </tr>
                                        <tr>
                                            <td>Sharpe</td>
                                            <td @Model.FundRiskindicators.SixMonthSharpe.DecimalNegativeStyle()>@Model.FundRiskindicators.SixMonthSharpe.FormatDecimalNumber(needAbs: false)</td>
                                            <td @Model.FundRiskindicators.OneYearSharpe.DecimalNegativeStyle()>@Model.FundRiskindicators.OneYearSharpe.FormatDecimalNumber(needAbs: false)</td>
                                            <td @Model.FundRiskindicators.ThreeYearSharpe.DecimalNegativeStyle()>@Model.FundRiskindicators.ThreeYearSharpe.FormatDecimalNumber(needAbs: false)</td>
                                            <td @Model.FundRiskindicators.FiveYearSharpe.DecimalNegativeStyle()>@Model.FundRiskindicators.FiveYearSharpe.FormatDecimalNumber(needAbs: false)</td>
                                            <td @Model.FundRiskindicators.TenYearSharpe.DecimalNegativeStyle()>@Model.FundRiskindicators.TenYearSharpe.FormatDecimalNumber(needAbs: false)</td>
                                        </tr>
                                        <tr>
                                            <td>Alpha</td>
                                            <td @Model.FundRiskindicators.SixMonthAlpha.DecimalNegativeStyle()>@Model.FundRiskindicators.SixMonthAlpha.FormatDecimalNumber(needAbs: false)</td>
                                            <td @Model.FundRiskindicators.OneYearAlpha.DecimalNegativeStyle()>@Model.FundRiskindicators.OneYearAlpha.FormatDecimalNumber(needAbs: false)</td>
                                            <td @Model.FundRiskindicators.ThreeYearAlpha.DecimalNegativeStyle()>@Model.FundRiskindicators.ThreeYearAlpha.FormatDecimalNumber(needAbs: false)</td>
                                            <td @Model.FundRiskindicators.FiveYearAlpha.DecimalNegativeStyle()>@Model.FundRiskindicators.FiveYearAlpha.FormatDecimalNumber(needAbs: false)</td>
                                            <td @Model.FundRiskindicators.TenYearAlpha.DecimalNegativeStyle()>@Model.FundRiskindicators.TenYearAlpha.FormatDecimalNumber(needAbs: false)</td>
                                        </tr>
                                        <tr>
                                            <td>Beta</td>
                                            <td @Model.FundRiskindicators.SixMonthBeta.DecimalNegativeStyle()>@Model.FundRiskindicators.SixMonthBeta.FormatDecimalNumber(needAbs: false)</td>
                                            <td @Model.FundRiskindicators.OneYearBeta.DecimalNegativeStyle()>@Model.FundRiskindicators.OneYearBeta.FormatDecimalNumber(needAbs: false)</td>
                                            <td @Model.FundRiskindicators.ThreeYearBeta.DecimalNegativeStyle()>@Model.FundRiskindicators.ThreeYearBeta.FormatDecimalNumber(needAbs: false)</td>
                                            <td @Model.FundRiskindicators.FiveYearBeta.DecimalNegativeStyle()>@Model.FundRiskindicators.FiveYearBeta.FormatDecimalNumber(needAbs: false)</td>
                                            <td @Model.FundRiskindicators.TenYearBeta.DecimalNegativeStyle()>@Model.FundRiskindicators.TenYearBeta.FormatDecimalNumber(needAbs: false)</td>
                                        </tr>
                                        <tr>
                                            <td>R-squared</td>
                                            <td @Model.FundRiskindicators.SixMonthRsquared.DecimalNegativeStyle()>@Model.FundRiskindicators.SixMonthRsquared.FormatDecimalNumber(needAbs: false)</td>
                                            <td @Model.FundRiskindicators.OneYearRsquared.DecimalNegativeStyle()>@Model.FundRiskindicators.OneYearRsquared.FormatDecimalNumber(needAbs: false)</td>
                                            <td @Model.FundRiskindicators.ThreeYearRsquared.DecimalNegativeStyle()>@Model.FundRiskindicators.ThreeYearRsquared.FormatDecimalNumber(needAbs: false)</td>
                                            <td @Model.FundRiskindicators.FiveYearRsquared.DecimalNegativeStyle()>@Model.FundRiskindicators.FiveYearRsquared.FormatDecimalNumber(needAbs: false)</td>
                                            <td @Model.FundRiskindicators.TenYearRsquared.DecimalNegativeStyle()>@Model.FundRiskindicators.TenYearRsquared.FormatDecimalNumber(needAbs: false)</td>

                                        </tr>
                                        <tr>
                                            <td>與指數相關係數</td>
                                            <td @Model.FundRiskindicators.SixMonthCorrelationCoefficientIndex.DecimalNegativeStyle()>@Model.FundRiskindicators.SixMonthCorrelationCoefficientIndex.FormatDecimalNumber(needAbs: false)</td>
                                            <td @Model.FundRiskindicators.OneYearCorrelationCoefficientIndex.DecimalNegativeStyle()>@Model.FundRiskindicators.OneYearCorrelationCoefficientIndex.FormatDecimalNumber(needAbs: false)</td>
                                            <td @Model.FundRiskindicators.ThreeYearCorrelationCoefficientIndex.DecimalNegativeStyle()>@Model.FundRiskindicators.ThreeYearCorrelationCoefficientIndex.FormatDecimalNumber(needAbs: false)</td>
                                            <td @Model.FundRiskindicators.FiveYearCorrelationCoefficientIndex.DecimalNegativeStyle()>@Model.FundRiskindicators.FiveYearCorrelationCoefficientIndex.FormatDecimalNumber(needAbs: false)</td>
                                            <td @Model.FundRiskindicators.TenYearCorrelationCoefficientIndex.DecimalNegativeStyle()>@Model.FundRiskindicators.TenYearCorrelationCoefficientIndex.FormatDecimalNumber(needAbs: false)</td>

                                        </tr>
                                        <tr>
                                            <td>Tracking Error</td>
                                            <td @Model.FundRiskindicators.SixMonthTrackingError.DecimalNegativeStyle()>@Model.FundRiskindicators.SixMonthTrackingError.FormatDecimalNumber(needAbs: false)</td>
                                            <td @Model.FundRiskindicators.OneYearTrackingError.DecimalNegativeStyle()>@Model.FundRiskindicators.OneYearTrackingError.FormatDecimalNumber(needAbs: false)</td>
                                            <td @Model.FundRiskindicators.ThreeYearTrackingError.DecimalNegativeStyle()>@Model.FundRiskindicators.ThreeYearTrackingError.FormatDecimalNumber(needAbs: false)</td>
                                            <td @Model.FundRiskindicators.FiveYearTrackingError.DecimalNegativeStyle()>@Model.FundRiskindicators.FiveYearTrackingError.FormatDecimalNumber(needAbs: false)</td>
                                            <td @Model.FundRiskindicators.TenYearTrackingError.DecimalNegativeStyle()>@Model.FundRiskindicators.TenYearTrackingError.FormatDecimalNumber(needAbs: false)</td>

                                        </tr>
                                        <tr>
                                            <td>Variance</td>
                                            <td @Model.FundRiskindicators.SixMonthVariance.DecimalNegativeStyle()>@Model.FundRiskindicators.SixMonthVariance.FormatDecimalNumber(needAbs: false)</td>
                                            <td @Model.FundRiskindicators.OneYearVariance.DecimalNegativeStyle()>@Model.FundRiskindicators.OneYearVariance.FormatDecimalNumber(needAbs: false)</td>
                                            <td @Model.FundRiskindicators.ThreeYearVariance.DecimalNegativeStyle()>@Model.FundRiskindicators.ThreeYearVariance.FormatDecimalNumber(needAbs: false)</td>
                                            <td @Model.FundRiskindicators.FiveYearVariance.DecimalNegativeStyle()>@Model.FundRiskindicators.FiveYearVariance.FormatDecimalNumber(needAbs: false)</td>
                                            <td @Model.FundRiskindicators.TenYearVariance.DecimalNegativeStyle()>@Model.FundRiskindicators.TenYearVariance.FormatDecimalNumber(needAbs: false)</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <div class="l-dataNotes"><span class="t-date">資料日期：@Model.FundRiskindicators.Date</span></div>
                        </div>
                        }
                        else
                        {
                        <div class="c-empty">
                            <div class="c-empty__img">
                                <img src="@Url.Content("~/themes/images/lions/lion-keyword.svg")" alt="">
                            </div>
                            <div class="c-empty__desc">沒有資料</div>
                        </div>
                        }
                    </div>
                </div>
            </section>
            <section class="c-section u-printBreak">
                <div class="c-section__title">風險象限圖</div>
                <div class="c-section__content">
                    <div class="l-flex u-flex-col u-flex-gap-sm">
                        <div class="l-flex__item">
                            <div class="c-chartBox">
                                <div class="c-chartBox__filter">
                                    <div class="l-selectbox">
                                        <div class="l-selectbox__item">
                                            <select class="o-selectbox o-selectbox--full o-selectbox--form" data-quadrant="type" data-width="100%" data-selection-css-class="select2-selection--form" data-selectbox="true">
                                                <option value="Type" selected>相同投資類型</option>
                                                <option value="Region">相同投資區域</option>
                                                <option value="Target">相同投資標的</option>
                                            </select>
                                        </div>
                                        <div class="l-selectbox__item">
                                            <select class="o-selectbox o-selectbox--full o-selectbox--form" data-quadrant="year" data-width="100%" data-selection-css-class="select2-selection--form" data-selectbox="true">
                                                <option value="1" selected>1年報酬率</option>
                                                <option value="2">2年報酬率</option>
                                                <option value="3">3年報酬率</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                                <div class="c-chartBox__chart" data-chart="risk">
                                    <div class="c-empty">
                                        <div class="c-empty__img">
                                            <img src="@Url.Content("~/themes/images/lions/lion-keyword.svg")" alt="">
                                        </div>
                                        <div class="c-empty__desc">沒有資料</div>
                                    </div>
                                    <div id="riskChart"></div>
                                </div>
                            </div>
                        </div>
                        <div class="l-flex__item">
                            <div class="c-collapse" data-collapse="true">
                                <div class="c-collapse__head" data-collapse-button="true">
                                    <span>說明</span>
                                </div>
                                @if (TemplateCanRender)
                                {
                                @Html.Sitecore().Field(Template.FundDetailsPage.Fields.Note.ToString(), Model.Item)
                                }
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            <section class="c-section u-printBreak">
                <div class="c-section__title">報酬率比較表</div>
                <div class="c-section__content">
                    @if (Model.FundReturnCompare != null)
                    {
                    <div class="l-table">
                        <table class="c-table u-center" data-fixed-columns="true">
                            <colgroup>
                                <col style="min-width: 140px;">
                                <col style="width: 10%;">
                                <col style="width: 10%;">
                                <col style="width: 10%;">
                                <col style="width: 10%;">
                                <col style="width: 10%;">
                                <col style="width: 10%;">
                            </colgroup>
                            <thead>
                                <tr class="u-nowrap">
                                    <th style="min-width: 140px;">
                                        <div class="c-table__title">
                                            <span> </span>
                                        </div>
                                    </th>
                                    <th>
                                        <div class="c-table__title">
                                            <span>1個月</span>
                                        </div>
                                    </th>
                                    <th>
                                        <div class="c-table__title">
                                            <span>3個月</span>
                                        </div>
                                    </th>
                                    <th>
                                        <div class="c-table__title">
                                            <span>6個月</span>
                                        </div>
                                    </th>
                                    <th>
                                        <div class="c-table__title">
                                            <span>1年</span>
                                        </div>
                                    </th>
                                    <th>
                                        <div class="c-table__title">
                                            <span>2年</span>
                                        </div>
                                    </th>
                                    <th>
                                        <div class="c-table__title">
                                            <span>3年</span>
                                        </div>
                                    </th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td class="u-left">@BasicData.FundName</td>
                                    <td>@Model.FundReturnCompare.OneMonthReturn.FormatDecimalNumber(2, needPercent: true)</td>
                                    <td>@Model.FundReturnCompare.ThreeMonthReturn.FormatDecimalNumber(2, needPercent: true)</td>
                                    <td>@Model.FundReturnCompare.SixMonthReturn.FormatDecimalNumber(2, needPercent: true)</td>
                                    <td>@Model.FundReturnCompare.OneYearReturn.FormatDecimalNumber(2, needPercent: true)</td>
                                    <td>@Model.FundReturnCompare.TwoYearReturn.FormatDecimalNumber(2, needPercent: true)</td>
                                    <td>@Model.FundReturnCompare.ThreeYearReturn.FormatDecimalNumber(2, needPercent: true)</td>
                                </tr>
                                <tr>
                                    <td class="u-left">同投資類型平均(Mdis)</td>
                                    <td>@Model.FundReturnCompare.OneMonthAvg.FormatDecimalNumber(2, needPercent: true)</td>
                                    <td>@Model.FundReturnCompare.ThreeMonthAvg.FormatDecimalNumber(2, needPercent: true)</td>
                                    <td>@Model.FundReturnCompare.SixMonthAvg.FormatDecimalNumber(2, needPercent: true)</td>
                                    <td>@Model.FundReturnCompare.OneYearAvg.FormatDecimalNumber(2, needPercent: true)</td>
                                    <td>@Model.FundReturnCompare.TwoYearAvg.FormatDecimalNumber(2, needPercent: true)</td>
                                    <td>@Model.FundReturnCompare.ThreeYearAvg.FormatDecimalNumber(2, needPercent: true)</td>
                                </tr>
                                <tr>
                                    <td class="u-left">同投資類型排名</td>
                                    <td>
                                        <div class="c-fractions">
                                            @if (Model.FundReturnCompare.OneMonthRank != 0)
                                                {
                                            <div class="c-fractions__numerator">@Model.FundReturnCompare.OneMonthRank</div>
                                            <div class="c-fractions__denominator">@Model.FundReturnCompare.FundCount</div>
                                                }
                                                else
                                                {
                                            <div>-</div>
                                                }
                                        </div>
                                    </td>
                                    <td>
                                        <div class="c-fractions">
                                            @if (Model.FundReturnCompare.ThreeMonthRank != 0)
                                                {
                                            <div class="c-fractions__numerator">@Model.FundReturnCompare.ThreeMonthRank</div>
                                            <div class="c-fractions__denominator">@Model.FundReturnCompare.FundCount</div>
                                                }
                                                else
                                                {
                                            <div>-</div>
                                                }
                                        </div>
                                    </td>
                                    <td>
                                        <div class="c-fractions">
                                            @if (Model.FundReturnCompare.SixMonthRank != 0)
                                                {
                                            <div class="c-fractions__numerator">@Model.FundReturnCompare.SixMonthRank</div>
                                            <div class="c-fractions__denominator">@Model.FundReturnCompare.FundCount</div>
                                                }
                                                else
                                                {
                                            <div>-</div>
                                                }
                                        </div>
                                    </td>
                                    <td>
                                        <div class="c-fractions">
                                            @if (Model.FundReturnCompare.OneYearRank != 0)
                                                {
                                            <div class="c-fractions__numerator">@Model.FundReturnCompare.OneYearRank</div>
                                            <div class="c-fractions__denominator">@Model.FundReturnCompare.OneYearCount</div>
                                                }
                                                else
                                                {
                                            <div>-</div>
                                                }
                                        </div>
                                    </td>
                                    <td>
                                        <div class="c-fractions">
                                            @if (Model.FundReturnCompare.TwoYearRank != 0)
                                                {
                                            <div class="c-fractions__numerator">@Model.FundReturnCompare.TwoYearRank</div>
                                            <div class="c-fractions__denominator">@Model.FundReturnCompare.FundCount</div>
                                                }
                                                else
                                                {
                                            <div>-</div>
                                                }
                                        </div>
                                    </td>
                                    <td>
                                        <div class="c-fractions">
                                            @if (Model.FundReturnCompare.ThreeYearRank != 0)
                                                {
                                            <div class="c-fractions__numerator">@Model.FundReturnCompare.ThreeYearRank</div>
                                            <div class="c-fractions__denominator">@Model.FundReturnCompare.FundCount</div>
                                                }
                                                else
                                                {
                                            <div>-</div>
                                                }
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="u-left">贏過N%基金</td>
                                    <td>
                                        @if (Model.FundReturnCompare.OneMonthRankWinFund > 0)
                                            {
                                        <div class="o-singleBar">
                                            <div class="o-singleBar__container">
                                                <span class="o-singleBar__status" style="height: @Model.FundReturnCompare.OneMonthRankWinFund.FormatDecimalNumber(needPercent: true);"></span>
                                            </div>
                                            <div class="o-singleBar__text">@Model.FundReturnCompare.OneMonthRankWinFund.FormatDecimalNumber(needPercent: true)</div>
                                        </div>
                                            }
                                            else
                                            {
                                        <div>-</div>
                                            }
                                    </td>
                                    <td>
                                        @if (Model.FundReturnCompare.ThreeMonthWinFund > 0)
                                            {
                                        <div class="o-singleBar">
                                            <div class="o-singleBar__container">
                                                <span class="o-singleBar__status" style="height: @Model.FundReturnCompare.ThreeMonthWinFund.FormatDecimalNumber(needPercent: true);"></span>
                                            </div>
                                            <div class="o-singleBar__text">@Model.FundReturnCompare.ThreeMonthWinFund.FormatDecimalNumber(needPercent: true)</div>
                                        </div>
                                            }
                                            else
                                            {
                                        <div>-</div>
                                            }
                                    </td>
                                    <td>
                                        @if (Model.FundReturnCompare.SixMonthWinFund > 0)
                                            {
                                        <div class="o-singleBar">
                                            <div class="o-singleBar__container">
                                                <span class="o-singleBar__status" style="height: @Model.FundReturnCompare.SixMonthWinFund.FormatDecimalNumber(needPercent: true);"></span>
                                            </div>
                                            <div class="o-singleBar__text">@Model.FundReturnCompare.SixMonthWinFund.FormatDecimalNumber(needPercent: true)</div>
                                        </div>
                                            }
                                            else
                                            {
                                        <div>-</div>
                                            }
                                    </td>
                                    <td>
                                        @if (Model.FundReturnCompare.OneYearWinFund > 0)
                                            {
                                        <div class="o-singleBar">
                                            <div class="o-singleBar__container">
                                                <span class="o-singleBar__status" style="height: @Model.FundReturnCompare.OneYearWinFund.FormatDecimalNumber(needPercent: true);"></span>
                                            </div>
                                            <div class="o-singleBar__text">@Model.FundReturnCompare.OneYearWinFund.FormatDecimalNumber(needPercent: true)</div>
                                        </div>
                                            }
                                            else
                                            {
                                        <div>-</div>
                                            }
                                    </td>
                                    <td>
                                        @if (Model.FundReturnCompare.TwoYearWinFund > 0)
                                            {
                                        <div class="o-singleBar">
                                            <div class="o-singleBar__container">
                                                <span class="o-singleBar__status" style="height: @Model.FundReturnCompare.TwoYearWinFund.FormatDecimalNumber(needPercent: true);"></span>
                                            </div>
                                            <div class="o-singleBar__text">@Model.FundReturnCompare.TwoYearWinFund.FormatDecimalNumber(needPercent: true)</div>
                                        </div>
                                            }
                                            else
                                            {
                                        <div>-</div>
                                            }
                                    </td>
                                    <td>
                                        @if (Model.FundReturnCompare.ThreeYearWinFund > 0)
                                            {
                                        <div class="o-singleBar">
                                            <div class="o-singleBar__container">
                                                <span class="o-singleBar__status" style="height: @Model.FundReturnCompare.ThreeYearWinFund.FormatDecimalNumber(needPercent: true);"></span>
                                            </div>
                                            <div class="o-singleBar__text">@Model.FundReturnCompare.ThreeYearWinFund.FormatDecimalNumber(needPercent: true)</div>
                                        </div>
                                            }
                                            else
                                            {
                                        <div>-</div>
                                            }
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    }
                </div>
            </section>
            <section class="c-section u-printBreak">
                <div class="c-section__title">年報酬率比較表</div>
                <div class="c-section__content">
                    @if (Model.FundYearRateOfReturn.Any())
                    {
                    <div class="l-table">
                        @{
                                var yearCount = Model.FundYearRateOfReturn.Count();
                            <table class="c-table u-center u-nowrap" data-fixed-columns="true">
                                <colgroup>
                                    <col style="width: 25%;">
                                    <col style="width: 15%;">
                                    <col style="width: 15%;">
                                    <col style="width: 15%;">
                                    <col style="width: 15%;">
                                    <col style="width: 15%;">
                                </colgroup>
                                <thead>
                                    <tr>
                                        <th>
                                            <div class="c-table__title"><span></span></div>
                                        </th>
                                        @for (int i = 0; i < yearCount; i++)
                                            {
                                        <th>
                                            <div class="c-table__title"><span>@Model.FundYearRateOfReturn[i].Date.ToString("yyyy")</span></div>
                                        </th>
                                            }
                                        @for (int i = 0; i < 5 - yearCount; i++)
                                            {
                                        <th>
                                            <div class="c-table__title"><span>@Model.FundYearRateOfReturn.Last().Date.AddYears(i + 1).ToString("yyyy")</span></div>
                                        </th>
                                            }
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>年化標準差</td>
                                        @for (int i = 0; i < yearCount; i++)
                                            {
                                        <td @Model.FundYearRateOfReturn[i].AnnualizedStandardDeviation.DecimalNegativeStyle()>@Model.FundYearRateOfReturn[i].AnnualizedStandardDeviation.FormatDecimalNumber(4, needAbs: false)</td>
                                            }
                                        @for (int i = 0; i < 5 - yearCount; i++)
                                            {
                                        <td>-</td>
                                            }
                                    </tr>
                                    <tr>
                                        <td>Beta</td>
                                        @for (int i = 0; i < yearCount; i++)
                                            {
                                        <td @Model.FundYearRateOfReturn[i].Beta.DecimalNegativeStyle()>@Model.FundYearRateOfReturn[i].Beta.FormatDecimalNumber(4, needAbs: false)</td>
                                            }
                                        @for (int i = 0; i < 5 - yearCount; i++)
                                            {
                                        <td>-</td>
                                            }
                                    </tr>
                                    <tr>
                                        <td>Sharpe Ratio</td>
                                        @for (int i = 0; i < yearCount; i++)
                                            {
                                        <td @Model.FundYearRateOfReturn[i].Sharpe.DecimalNegativeStyle()>@Model.FundYearRateOfReturn[i].Sharpe.FormatDecimalNumber(4, needAbs: false)</td>
                                            }
                                        @for (int i = 0; i < 5 - yearCount; i++)
                                            {
                                        <td>-</td>
                                            }
                                    </tr>
                                    <tr>
                                        <td>Treynor Index</td>
                                        @for (int i = 0; i < yearCount; i++)
                                            {
                                        <td @Model.FundYearRateOfReturn[i].TreynorIndex.DecimalNegativeStyle()>@Model.FundYearRateOfReturn[i].TreynorIndex.FormatDecimalNumber(4, needAbs: false)</td>
                                            }
                                        @for (int i = 0; i < 5 - yearCount; i++)
                                            {
                                        <td>-</td>
                                            }
                                    </tr>
                                    <tr>
                                        <td>Jensen Ratio</td>
                                        @for (int i = 0; i < yearCount; i++)
                                            {
                                        <td @Model.FundYearRateOfReturn[i].JensenIndex.DecimalNegativeStyle()>@Model.FundYearRateOfReturn[i].JensenIndex.FormatDecimalNumber(4, needAbs: false)</td>
                                            }
                                        @for (int i = 0; i < 5 - yearCount; i++)
                                            {
                                        <td>-</td>
                                            }
                                    </tr>
                                    <tr>
                                        <td>Informaton Ratio</td>
                                        @for (int i = 0; i < yearCount; i++)
                                            {
                                        <td @Model.FundYearRateOfReturn[i].InformationRatio.DecimalNegativeStyle()>@Model.FundYearRateOfReturn[i].InformationRatio.FormatDecimalNumber(4, needAbs: false)</td>
                                            }
                                        @for (int i = 0; i < 5 - yearCount; i++)
                                            {
                                        <td>-</td>
                                            }
                                    </tr>
                                </tbody>
                            </table>
                        }
                    </div>
                    }
                    else
                    {
                    <div class="c-empty">
                        <div class="c-empty__img">
                            <img src="@Url.Content("~/themes/images/lions/lion-keyword.svg")" alt="">
                        </div>
                        <div class="c-empty__desc">沒有資料</div>
                    </div>
                    }
                </div>
            </section>
            @if (Model.TagsDic[FundTagEnum.SortTag].Any())
            {
            <div class="c-hashTags">
                <div class="c-hashTags__title">Tags</div>
                <div class="c-hashTags__content">
                    <ul class="l-divideList l-divideList--sm">
                        @foreach (var item in Model.TagsDic[FundTagEnum.SortTag])
                            {
                        <li class="l-divideList__item l-divideList__item--auto">
                            <a href="#" class="o-hashTag u-nowrap">#@item.FundTagTitle</a>
                        </li>
                            }
                    </ul>
                </div>
            </div>
            }
        </div>
        <div class="c-tab__panel" data-tab-panel-id="tab-6">
            <section class="c-section u-printBreak">
                <div class="c-section__content">
                    <div class="c-borderBox">
                        <div class="l-divideList l-divideList--col2@mb-only">
                            <div class="l-divideList__item">
                                <div class="c-numerical">
                                    <div class="c-numerical__title c-numerical__title--dk"><span>配息頻率</span></div>
                                    <div class="c-numerical__content c-numerical__content--lg"><span class="t-bold">@BasicData.DividendFrequencyName.CheckNullOrEmptyString()</span></div>
                                </div>
                            </div>
                            <div class="l-divideList__item">
                                <div class="c-numerical">
                                    <div class="c-numerical__title c-numerical__title--dk"><span>最近一次配息發放日</span></div>
                                    <div class="c-numerical__content c-numerical__content--lg"><span class="t-bold">@BasicData.ReleaseDate.CheckNullOrEmptyString()</span></div>
                                </div>
                            </div>
                            <div class="l-divideList__item">
                                <div class="c-numerical">
                                    <div class="c-numerical__title c-numerical__title--dk"><span>最近一次除息日</span></div>
                                    <div class="c-numerical__content c-numerical__content--lg"><span class="t-bold">@BasicData.ExDividendDate.CheckNullOrEmptyString()</span></div>
                                </div>
                            </div>
                            <div class="l-divideList__item">
                                <div class="c-numerical">
                                    <div class="c-numerical__title c-numerical__title--dk"><span>每單位分配金額</span></div>
                                    <div class="c-numerical__content c-numerical__content--lg"><span class="t-bold">@(BasicData.Dividend.CheckNullOrEmptyString()== "-"? "-" : BasicData.Dividend.CheckNullOrEmptyString() + BasicData.ValuationCurrency.CheckNullOrEmptyString())</span></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            <section class="c-section u-printBreak">
                <div class="c-section__title">配息紀錄</div>
                <div class="c-section__content">
                    @if (Model.FundDividendRecords.Any())
                    {
                    <div class="l-flex u-flex-col u-flex-gap-sm">
                        <div class="l-flex__item">
                            <div class="l-selectbox">
                                <div class="l-selectbox__item">
                                    <select id="dividend_Select" class="o-selectbox o-selectbox--full o-selectbox--form" data-width="100%" data-selection-css-class="select2-selection--form" data-selectbox="true">
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="l-flex__item">
                            <div class="l-table">
                                <table class="c-table u-nowrap u-center" data-fixed-columns="true">
                                    <colgroup>
                                        <col style="width: 16.6%;">
                                        <col style="width: 16.6%;">
                                        <col style="width: 16.6%;">
                                        <col style="width: 16.6%;">
                                        <col style="width: 16.6%;">
                                        <col style="width: 16.6%;">
                                    </colgroup>
                                    <thead>
                                        <tr>
                                            <th>
                                                <div class="c-table__title"><span>配息基準日</span></div>
                                            </th>
                                            <th>
                                                <div class="c-table__title"><span>除息日 </span></div>
                                            </th>
                                            <th>
                                                <div class="c-table__title"><span>發放日</span></div>
                                            </th>
                                            <th>
                                                <div class="c-table__title"><span>狀態</span></div>
                                            </th>
                                            <th>
                                                <div class="c-table__title u-center"><span id="dividendCurrency"></span></div>
                                            </th>
                                            <th>
                                                <div class="c-table__title"><span>年化配息率</span></div>
                                            </th>
                                        </tr>
                                    </thead>
                                    <tbody id='dividendTable'>
                                    </tbody>
                                </table>
                            </div>
                            <div class="l-dataNotes u-left">
                                <span class="t-note">說明：因應金管會自2015年07月14日起，統一基金年化配息率計算公式，公式將調整為「每單位配息金額 ÷ 除息日前一日之淨值 × 一年配息次數 × 100%」，提醒您年化配息率為估算值僅供參考，上述配息率資料實際以基金公司公告為主。新規定施行不溯及既往，之前提供的年化配息率，不再依新公式調整。</span>
                            </div>
                        </div>
                    </div>
                    }
                    else
                    {
                    <div class="c-empty">
                        <div class="c-empty__img">
                            <img src="@Url.Content("~/themes/images/lions/lion-keyword.svg")" alt="">
                        </div>
                        <div class="c-empty__desc">沒有資料</div>
                    </div>
                    }
                </div>
            </section>
            @if (Model.TagsDic[FundTagEnum.SortTag].Any())
            {
            <div class="c-hashTags">
                <div class="c-hashTags__title">Tags</div>
                <div class="c-hashTags__content">
                    <ul class="l-divideList l-divideList--sm">
                        @foreach (var item in Model.TagsDic[FundTagEnum.SortTag])
                            {
                        <li class="l-divideList__item l-divideList__item--auto">
                            <a href="#" class="o-hashTag u-nowrap">#@item.FundTagTitle</a>
                        </li>
                            }
                    </ul>
                </div>
            </div>
            }
        </div>
        <div class="c-tab__panel" data-tab-panel-id="tab-7">
            <section class="c-section u-printBreak">
                <div class="c-section__content" data-chart="scale">
                    <div class="c-empty">
                        <div class="c-empty__img">
                            <img src="@Url.Content("~/themes/images/lions/lion-keyword.svg")" alt="">
                        </div>
                        <div class="c-empty__desc">沒有資料</div>
                    </div>
                    <div class="c-chartBox">
                        <div class="c-chartBox__chart">
                            <div id="scale"></div>
                        </div>
                    </div>
                </div>
            </section>
            <section class="c-section u-printBreak">
                <div class="c-section__title">規模變動紀錄</div>
                <div class="c-section__content">
                    @if (Model.FundScaleRecords.Any())
                    {
                    <div class="l-flex u-flex-col u-flex-gap-sm">
                        <div class="l-flex__item">
                            <div class="l-selectbox">
                                <div class="l-selectbox__item">
                                    <select id="scale_select" class="o-selectbox o-selectbox--full o-selectbox--form" data-width="100%" data-selection-css-class="select2-selection--form" data-selectbox="true">
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="l-flex__item" id='scale_table'>
                            <!-- 左右表格 -->
                        </div>
                    </div>
                    }
                    else
                    {
                    <div class="c-empty">
                        <div class="c-empty__img">
                            <img src="@Url.Content("~/themes/images/lions/lion-keyword.svg")" alt="">
                        </div>
                        <div class="c-empty__desc">沒有資料</div>
                    </div>
                    }
                </div>
            </section>
            @if (Model.TagsDic[FundTagEnum.SortTag].Any())
            {
            <div class="c-hashTags">
                <div class="c-hashTags__title">Tags</div>
                <div class="c-hashTags__content">
                    <ul class="l-divideList l-divideList--sm">
                        @foreach (var item in Model.TagsDic[FundTagEnum.SortTag])
                            {
                        <li class="l-divideList__item l-divideList__item--auto">
                            <a href="#" class="o-hashTag u-nowrap">#@item.FundTagTitle</a>
                        </li>
                            }
                    </ul>
                </div>
            </div>
            }
        </div>
    </div>
</div>
<div class="l-sharebar">
    <div class="l-sharebar__wrap">
        <div class="l-sharebar__content">
            <div class="l-flex l-flex--inline u-flex-gap-sm">
                <div class="l-flex__item">
                    <!-- [data-popover]: 彈跳視窗功能，值為彈跳視窗的 selector -->
                    <a href="#" class="o-btn o-btn--primary o-btn--icon" data-popover="#popoverFundDetailShare02">
                        <img src="@Url.Content("~/themes/images/icons/white/share.svg")" alt="分享">分享
                    </a>
                    <div id="popoverFundDetailShare02" class="c-popover c-popover--auto u-left">
                        <div class="c-popover__wrap">
                            <nav class="c-popover__main">
                                <ul class="l-flex u-flex-col u-flex-gap-md s4">
                                    <li class="l-flex__item">
                                        <a href="https://www.facebook.com/sharer/sharer.php?u=" class="o-social o-social--sm o-social--fb" target="_blank" data-share>
                                            <span class="u-hidden@mb-only">Facebook</span>
                                        </a>
                                    </li>
                                    <li class="l-flex__item">
                                        <a href="https://social-plugins.line.me/lineit/share?url=" class="o-social o-social--sm o-social--line" target="_blank" data-share>
                                            <span class="u-hidden@mb-only">LINE</span>
                                        </a>
                                    </li>
                                    <li class="l-flex__item">
                                        <div class="l-copy" data-copy>
                                            <div class="l-copy__action">
                                                <a href="#" class="o-social o-social--sm o-social--copy" data-copy-action>
                                                    <span class="u-hidden@mb-only">複製網址</span>
                                                </a>
                                            </div>
                                            <div class="l-copy__msg">
                                                <div class="o-tooltip o-tooltip--relative o-tooltip--top" data-copy-msg>
                                                    <div class="o-tooltip__content u-nowrap">已複製</div>
                                                    <div class="o-tooltip__arrow"></div>
                                                </div>
                                            </div>
                                        </div>
                                    </li>
                                </ul>
                            </nav>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="c-notice" data-collapse="true">
    @if (TemplateCanRender)
    {
    @Html.Sitecore().Field(Template.FundDetailsPage.Fields.Content.ToString(), Model.Item)
    }
</div>

<div id="popupCurrency" class="c-modal c-modal--xs mfp-hide">
    <div class="c-modal__wrap">
        <header class="c-modal__header">
            <h2 class="c-modal__title">幣別提示說明</h2>
        </header>
        <div class="c-modal__content">
            @if (TemplateCanRender)
            {
            @Html.Sitecore().Field(Template.FundDetailsPage.Fields.LightboxNote.ToString(), Model.Item)
            }
        </div>
    </div>
</div>
<div id="popupTradeRule" class="c-modal mfp-hide">
    <div class="c-modal__wrap">
        <header class="c-modal__header">
            <h2 class="c-modal__title">短線交易規定</h2>
        </header>
        <div class="c-modal__content">
            <p>
            </p>
        </div>
    </div>
</div>
<div id="popupPriceMechanism" class="c-modal mfp-hide">
    <div class="c-modal__wrap">
        <header class="c-modal__header">
            <h2 class="c-modal__title">公平價格調整機制</h2>
        </header>
        <div class="c-modal__content">
            <p>
            </p>
        </div>
    </div>
</div>
<div id="popupAntiDilution" class="c-modal mfp-hide">
    <div class="c-modal__wrap">
        <header class="c-modal__header">
            <h2 class="c-modal__title">反稀釋機制</h2>
        </header>
        <div class="c-modal__content">
            <p>
            </p>
        </div>
    </div>
</div>

<script>
    var getUrlString = location.href;
    var url = new URL(getUrlString);
    var fundId = url.searchParams.get('id');
</script>

<script defer>
          (function ($, window, document, undefined) {

        document.addEventListener('DOMContentLoaded', function () {
              if (!jQuery) {
                  return;
            }
            $('body').addClass("has-bottomTool");
            function checkItemExists(key, value) {
                let existingEntries = JSON.parse(localStorage.getItem(key) || '[]');
                if (!existingEntries.includes(value)) {
                    return false;
                } else
                {
                    return true;
                }
            }
            function addItem(key,value) {
                let existingEntries = JSON.parse(localStorage.getItem(key) || '[]');
                if (!existingEntries.includes(value)) {
                    existingEntries.push(value);
                    localStorage.setItem(key, JSON.stringify(existingEntries));
                }
            }
            function removeItem(key, value) {
                let existingEntries = JSON.parse(localStorage.getItem(key) || '[]');
                if (existingEntries.includes(value)) {
                    existingEntries.splice(existingEntries.indexOf(value),1);
                    localStorage.setItem(key, JSON.stringify(existingEntries));
                }
            }


            $('#closeFiveYearsLink').attr("href", $('#closeFiveYearsLink').attr("href") + "?id=" + fundId);
            if (checkItemExists("FocusFundId",fundId)  ) {
                $('#focusBtn').addClass('is-active');
                $('#focusBtn').data('add',"true");
            }
            if (checkItemExists("CompareFundId", fundId)) {
                $('#compareBtn').addClass('is-active');
                $('#compareBtn').data('add',"true");
            }
            $('#focusBtn').on('click', function () {
                if ($(this).data('add') == "false")
                {
                    addItem('FocusFundId', fundId);
                    $(this).data('add',"true");
                } else {
                    removeItem('FocusFundId', fundId);
                     $(this).data('add',"false");
                }
            });
            $('#compareBtn').on('click', function () {

                if ($(this).data('add') == "false") {
                    addItem('CompareFundId', fundId);
               $(this).data('add',"true");

                } else {
                    removeItem('CompareFundId', fundId);
               $(this).data('add',"false");

                }
            });
              function emptyValueToDash (str)
              {
              if(str == null || str.trim().length == 0) {
                  return "-"
                  }
              else{
              return str;
              }
              }

            //報酬率切換
            $('[name="currency1"]').on('change', function () {
                switch ($(this).val()) {
                    case '原幣':
                        $('[data-id=originReturnTable]').removeClass('u-hidden');
                        $('[data-table=originReturnTable]').DataTable().columns.adjust();//切換後標題對齊
                        $('[data-id=twdReturnTable]').addClass('u-hidden');
                        $('[data-id=annualReturnTable]').addClass('u-hidden');
                        break;
                    case '台幣':
                        $('[data-id=originReturnTable]').addClass('u-hidden');
                        $('[data-id=twdReturnTable]').removeClass('u-hidden');
                        $('[data-table=twdReturnTable]').DataTable().columns.adjust();//切換後標題對齊
                        $('[data-id=annualReturnTable]').addClass('u-hidden');
                        break;
                    case '年化':
                        $('[data-id=originReturnTable]').addClass('u-hidden');
                        $('[data-id=twdReturnTable]').addClass('u-hidden');
                        $('[data-id=annualReturnTable]').removeClass('u-hidden');
                        $('[data-table=annualReturnTable]').DataTable().columns.adjust();//切換後標題對齊
                        break;
                }
            });
            $('[name="currency1"]').trigger('change');
            //配息紀錄
        let dividendData = @Html.Raw(JsonHelper.SerializeObjectWithEscapeHtml(Model.FundDividendRecords));
          if(dividendData.length > 0){
              $('#dividendCurrency').html(`每單位配息<br class="u-hidden@dt-only">金額(${dividendData[0].Currency.trim()})`);
        const dividendYearData = dividendData.map((item) => new Date(item.BaseDate).getFullYear()).filter(function (element, index, arr) {
                              return arr.indexOf(element) === index;
                          });
                        $.each(dividendYearData, function( index, value )
                        {
                          $('#dividend_Select').append($('<option>', {
                          value: value,
                          text: value
                              }));
                        });
                         let dividendTableHtml = "";
                          $('#dividend_Select').on('change',function(){
                          let dividendTableHtml = "";
                           let year = $(this).val();
                           let yearData = dividendData.filter(function (element, index, arr) {
                              return element.ExDividendDate.indexOf(year) >= 0;
                          });
                          for(let i = 0; i < yearData.length ;i++)
                          {
                           dividendTableHtml += `<tr>
                           <td>${emptyValueToDash(yearData[i].BaseDate)}</td>
                           <td>${emptyValueToDash(yearData[i].ExDividendDate)}</td>
                           <td>${emptyValueToDash(yearData[i].ReleaseDate)}</td>
                           <td>配息</td>
                           <td>${yearData[i].Dividend}</td>
                           <td>${yearData[i].AnnualizedDividendRate}%</td>
                                 </tr>`
                          }
                          $('#dividendTable').html(dividendTableHtml);

                              });
                  $('#dividend_Select').trigger('change');
            }
            //切換基金級別Select
            $.ajax({
                url: `@FundSameLevelApiUrl`,
                method: 'post',
                data:
                {
                    fundId : fundId
                },
                success: function (result) {
                    if (result && result.resultSet.result.length > 0) {
                        const set = new Set();
                        const filterData = result.resultSet.result.filter(item => !set.has(item.v5) ? set.add(item.v5) : false);
                        $.each(filterData, function (index, value) {
                            if (filterData[index].v5 === fundId)
                            {
                                filterData.unshift(filterData[index]);
                                filterData.splice(index + 1, 1);
                                return false; //break
                            }
                        });
                        $.each(filterData, function (index, value) {
                                $('#fundSelect').find("select").append($('<option>', {
                                    value: value.v5,
                                    text: value.v6
                                }));
                        });
                        $('#fundSelect').find("select").on('change', function () {
                            let value = $(this).val();
                            window.location.href = location.pathname + "?id=" + value;
                        });
                    } else {
                          $('#fundSelect').find("select").addClass('u-hidden');
                    }
                },
                error: function (err) {
                  console.log(err) },
            });

            //國內外基金-PDF
            $.ajax({
                url: `@FundDocLinkApiUrl`,
                method: 'post',
                data:
                {
                    fundId: fundId,
                    idx : '1'
                },
                success: function (result)
                {
                    if (result && result.resultSet.result[0].v1)
                    {
                        //公開說明書
                        $('#openDoc').removeClass("u-hidden")
                        $('#openDoc').find('a').attr("href", result.resultSet.result[0].v1);
                    } else
                    {
                        $('#openDoc').addClass("u-hidden")
                        $('#openDoc').find('a').attr("href", "");
                    }
                },
                error: function (err) {  console.log(err) },
            });
            $.ajax({
                url: `@FundDocLinkApiUrl`,
                method: 'post',
                data:
                {
                    fundId: fundId,
                    idx : '2'
                },
                success: function (result) {
                    if (result && result.resultSet.result[0].v1) {
                        //財務報告書
                        $('#financialReportDoc').removeClass("u-hidden")
                        $('#financialReportDoc').find('a').attr("href",  result.resultSet.result[0].v1);
                    } else {
                        $('#financialReportDoc').addClass("u-hidden")
                        $('#financialReportDoc').find('a').attr("href", "");
                    }
                },
                error: function (err) { console.log(err) },
            });
            $.ajax({
                url: `@FundDocLinkApiUrl`,
                method: 'post',
                data:
                {
                    fundId: fundId,
                    idx : '5'
                },
                success: function (result) {
                    if (result &&  result.resultSet.result[0].v1) {
                        //基金月報
                        $('#monthReportDoc').removeClass("u-hidden")
                        $('#monthReportDoc').find('a').attr("href",  result.resultSet.result[0].v1);
                    } else {
                        $('#monthReportDoc').addClass("u-hidden")
                        $('#monthReportDoc').find('a').attr("href", "");
                    }
                },
                error: function (err) { console.log(err) },
            });
            $.ajax({
                url: `@FundDocLinkApiUrl`,
                method: 'post',
                data:
                {
                    fundId: fundId,
                    idx : '6'
                },
                success: function (result) {
                    //投資人專屬
                    if (result &&  result.resultSet.result[0].v1) {
                        $('#investExclusiveDoc').removeClass("u-hidden")
                        $('#investExclusiveDoc').find('a').attr("href",  result.resultSet.result[0].v1);
                    } else {
                        $('#investExclusiveDoc').addClass("u-hidden")
                        $('#investExclusiveDoc').find('a').attr("href", "");
                    }
                },
                error: function (err) { console.log(err) },
            });
            $.ajax({
               url: `@FundDocLinkApiUrl`,
                method: 'post',
                data:
                {
                    fundId: fundId,
                    idx : '7'
                },
                success: function (result) {
                    //投資人一般
                    if (result &&  result.resultSet.result[0].v1) {
                        $('#investNomnalDoc').removeClass("u-hidden")
                        $('#investNomnalDoc').find('a').attr("href",  result.resultSet.result[0].v1);
                    } else {
                        $('#investNomnalDoc').addClass("u-hidden")
                        $('#investNomnalDoc').find('a').attr("href", "");
                    }
                },
                error: function (err) { console.log(err) },
            });

            $.ajax({
                url: `@FundRuleTextApiUrl`,
                method: 'post',
                data:
                {
                    fundId: fundId,
                    type: 'SwingTrade'
                },
                success: function (result) {
                    if (result &&  result.resultSet.result[0].v3) {
                        //短線交易
                        $('#popupTradeRuleClick').removeClass('u-hidden');
                        $('#popupTradeRule').find('p').text(result.resultSet.result[0].v3)
                    } else {
                        $('#popupTradeRuleClick').addClass('u-hidden');
                         $('#popupTradeRule').find('p').text("")
                    }
                },
                error: function (err) {console.log(err) },
            });
            $.ajax({
                url: `@FundRuleTextApiUrl`,
                method: 'post',
                data:
                {
                    fundId: fundId,
                    type: 'Fair'
                },
                success: function (result) {
                    if (result && result.resultSet.result[0].v3) {
                        //公平價格調整機制
                        $('#popupPriceMechanismClick').removeClass('u-hidden');

                        $('#popupPriceMechanism').find('p').text(result.resultSet.result[0].v3)
                    } else {
                        $('#popupPriceMechanismClick').addClass('u-hidden');

                        $('#popupPriceMechanism').find('p').text("")
                    }
                },
                error: function (err) { console.log(err) },
            });
            $.ajax({
                url: `@FundRuleTextApiUrl`,
                method: 'post',
                data:
                {
                    fundId: fundId,
                    type: 'AntiDilute'
                },
                success: function (result) {
                    if (result && result.resultSet.result[0].v3) {
                        $('#popupAntiDilutionClick').removeClass('u-hidden');

                        $('#popupAntiDilution').find('p').text(result.resultSet.result[0].v3)
                    } else {
                        $('#popupAntiDilutionClick').addClass('u-hidden');
                        $('#popupAntiDilution').find('p').text("")
                    }
                },
                error: function (err) { console.log(err) },
            });
        });


          })(jQuery, window, document);

</script>


<script defer>
            (function ($, window, document, undefined) {

        // 基金詳細頁 – 基金概況 – 近一年績效表現
        // 基金詳細頁 – 基金概況 – 近一年淨值表現
        document.addEventListener('DOMContentLoaded', function () {
            if (!jQuery) {
                return;
            }
            var nearlySetting = {
                chart: {
                    zooming: {
                        mouseWheel: {
                            enabled: false
                        }
                    },
                    height: 280
                },
                credits: {
                    enabled: false
                },
                title: {
                    text: ''
                },
                scrollbar: {
                    enabled: false
                },
                navigator: {
                    enabled: false
                },
                rangeSelector: {
                    enabled: false
                },
                legend: {
                    enabled: true,
                    align: 'left',
                    floating: false,
                    y: 20,
                    itemStyle: {
                        fontSize: '1em',
                        color: '#222',
                        cursor: 'default'
                    },
                    itemHoverStyle: {
                        color: '#222'
                    },
                    symbolHeight: 12,
                    symbolWidth: 12
                },
                plotOptions: {
                    series: {
                        dataGrouping: {
                            enabled: false
                        },
                        states: {
                            hover: {
                                enabled: true,
                                lineWidth: 2,
                                halo: {
                                    size: 8
                                }
                            }
                        },
                        events: {
                            legendItemClick: function () {
                                return false;
                            }
                        }
                    }
                },
                xAxis: {
                    type: 'datetime',
                    tickPosition: 'inside',
                    tickWidth: 0.5,
                    tickLength: 7,
                    labels: {
                        formatter: function () {
                            const format = {
                                day: '%Y/%m',
                                week: '%Y/%m',
                                month: '%Y/%m'
                            }[this.tickPositionInfo.unitName];
                            return Highcharts.dateFormat(format, this.value);
                        },
                        style: {
                            color: '#6e6e6e'
                        }
                    },
                    crosshair: {
                        width: 1,
                        color: '#c3c3c3'
                    },
                    lineColor: '#ebebeb',
                    tickColor: '#ebebeb'
                }
            };
            var chart =  Highcharts.stockChart('performanceChart', {
                            ...nearlySetting,
                            tooltip: {
                                split: false,
                                useHTML: true,
                                formatter: function () {
                                    const tooltip = '<div style="font-size: 14px">' + '<div style="margin-bottom: 8px; color: #9C9C9C">' + Highcharts.dateFormat('%Y/%m/%d', this.point.x) + '</div>' + '<span style="display:inline-block; color: ' + this.point.color + '; font-size: 18px; margin-right: 3px">\u25CF</span>' + this.point.series.name + ': ' + this.point.y + '%' + '</div>';
                                    return tooltip;
                                },
                                shadow: {
                                    color: 'rgba(0, 0, 0, 0.1)'
                                }
                            },
                            series: [{
                                name: '績效',
                                data: [],
                                legendSymbol: 'rectangle',
                                color: '#238C6C'
                            }],
                            yAxis: {
                                showLastLabel: true,
                                opposite: false,
                                labels: {
                                    y: 4,
                                    formatter: function (value) {
                                        return value.value + '%';
                                    },
                                    style: {
                                        color: '#6e6e6e'
                                    }
                                },
                                plotLines: [{
                                    color: '#c3c3c3'
                                }]
                            }
                        });
                                if (chart) {
                        chart.showLoading();
                    }
            async function initPerformance() {
                try {
                        $('[data-chart="performance"]').find('.c-empty').addClass('u-hidden');
                        $('[data-chart="performance"]').find('.c-chartBox, .l-dataNotes').removeClass('u-hidden');
                    /*
                     * API參數
                     * id: 基金代號：請替換成實際基金的id
                     */
                    const params = {
                        id: fundId
                    };

                    let data = {};
                   function roundToTwoNum(num) {
                        return +(Math.round(num + 'e+2') + 'e-2');
                    }
                    $.ajax({
                        url: '@FundCloseYearPerformanceApiUrl',
                        method: 'post',
                        data:
                        {
                            fundId : fundId
                        },

                        success: function (res) {
                            data = res;
                  if (Object.keys(data.resultSet.result).length != 0) {
                        //const updateDate = data.body.updateDate.replaceAll('-', '/');
                        // 資料日期
                        //$('[data-update-date="performance"]').text(updateDate);
                        const mapData = data.resultSet.result.map(item => {
                            return {
                                x: new Date(item.v1.replaceAll('/', '-')).getTime(),
                                name: item.v1.replaceAll('/', '-'),
                                y: roundToTwoNum(item.v2)
                            };
                        });
                        mapData.reverse();
                        Highcharts.stockChart('performanceChart', {
                            ...nearlySetting,
                            tooltip: {
                                split: false,
                                useHTML: true,
                                formatter: function () {
                                    const tooltip = '<div style="font-size: 14px">' + '<div style="margin-bottom: 8px; color: #9C9C9C">' + Highcharts.dateFormat('%Y/%m/%d', this.point.x) + '</div>' + '<span style="display:inline-block; color: ' + this.point.color + '; font-size: 18px; margin-right: 3px">\u25CF</span>' + this.point.series.name + ': ' + this.point.y + '%' + '</div>';
                                    return tooltip;
                                },
                                shadow: {
                                    color: 'rgba(0, 0, 0, 0.1)'
                                }
                            },
                            series: [{
                                name: '績效',
                                data: mapData,
                                legendSymbol: 'rectangle',
                                color: '#238C6C'
                            }],
                            yAxis: {
                                showLastLabel: true,
                                opposite: false,
                                labels: {
                                    y: 4,
                                    formatter: function (value) {
                                        return value.value + '%';
                                    },
                                    style: {
                                        color: '#6e6e6e'
                                    }
                                },
                                plotLines: [{
                                    color: '#c3c3c3'
                                }]
                            }
                        });
                        $('[data-chart="performance"]').find('.c-empty').addClass('u-hidden');
                        $('[data-chart="performance"]').find('.c-chartBox, .l-dataNotes').removeClass('u-hidden');
                    }else
                    {
                        $('[data-chart="performance"]').find('.c-empty').removeClass('u-hidden');
                        $('[data-chart="performance"]').find('.c-chartBox, .l-dataNotes').addClass('u-hidden');
                    }
                            },
                        error: function (err) {
                            $('[data-chart="performance"]').find('.c-empty').removeClass('u-hidden');
                            $('[data-chart="performance"]').find('.c-chartBox, .l-dataNotes').addClass('u-hidden');
                            console.log(err)
                        },
                    });

                } catch (error) {
                    console.error('Error:', error);
                }
            }

            async function initNetWorth() {
                try {

                    const data = @Html.Raw(JsonHelper.SerializeObjectWithEscapeHtml(Model.FundCloseYearsNetValue));
                    function roundToFourString(num) {
                        return num.toFixed(4);
                    }
                    function roundToFourNum(num) {
                        return +(Math.round(num + 'e+4') + 'e-4');
                    }

                    if (Object.keys(data).length != 0) {
                        const mapData = data.map(item => {
                            return {
                                x: new Date(item.NetAssetValueDate).getTime(),
                                name: item.NetAssetValueDate,
                                y: roundToFourNum(item.NetAssetValue)
                            };
                        });

                        $('#maxNetValue').text(roundToFourString(Math.max(...data.map(p => p.NetAssetValue))));
                        $('#minNetValue').text(roundToFourString(Math.min(...data.map(p => p.NetAssetValue))));

                        //const updateDate = data.body.updateDate.replaceAll('-', '/');
                        // 資料日期
                        // $('[data-update-date="netWorth"]').text(updateDate);
                        Highcharts.stockChart('netWorthChart', {
                            ...nearlySetting,
                            tooltip: {
                                split: false,
                                useHTML: true,
                                formatter: function () {
                                    const tooltip = '<div style="font-size: 14px">' + '<div style="margin-bottom: 8px; color: #9C9C9C">' + Highcharts.dateFormat('%Y/%m/%d', this.point.x) + '</div>' + '<span style="display:inline-block; color: ' + this.point.color + '; font-size: 18px; margin-right: 3px">\u25CF</span>' + this.point.series.name + ': ' + this.point.y + '</div>';
                                    return tooltip;
                                },
                                shadow: {
                                    color: 'rgba(0, 0, 0, 0.1)'
                                }
                            },
                            series: [{
                                name: '淨值',
                                data: mapData,
                                legendSymbol: 'rectangle',
                                color: '#A4844E'
                            }],
                            yAxis: {
                                showLastLabel: true,
                                opposite: false,
                                labels: {
                                    y: 4,
                                    formatter: function (value) {
                                        return value.value;
                                    },
                                    style: {
                                        color: '#6e6e6e'
                                    }
                                },
                                plotLines: [{
                                    color: '#c3c3c3'
                                }]
                            }
                        });
                        $('[data-chart="netWorth"]').find('.c-empty').addClass('u-hidden');
                        $('[data-chart="netWorth"]').find('.c-chartBox, .l-dataNotes').removeClass('u-hidden');
                    }else
                    {
                        $('[data-chart="performance"]').find('.c-empty').removeClass('u-hidden');
                        $('[data-chart="performance"]').find('.c-chartBox, .l-dataNotes').addClass('u-hidden');
                    }
                } catch (error) {
                    $('[data-chart="performance"]').find('.c-empty').removeClass('u-hidden');
                    $('[data-chart="performance"]').find('.c-chartBox, .l-dataNotes').addClass('u-hidden');
                    console.error('Error:', error);
                }
            }

            initPerformance();
            initNetWorth();
        });
            })(jQuery, window, document);
</script>



<script defer>
                (function ($, window, document, undefined) {

        // 基金詳細頁 – 績效 – 績效走勢圖
        // 基金詳細頁 – 淨值 – 淨值走勢圖
        document.addEventListener('DOMContentLoaded', function () {
            if (!jQuery) {
                return;
            }
            $('[data-trend-filter="trend"]').on('change', function () {
                getParams();
            });
            $('[data-trend-filter="dateRange"]').on('change', function () {
                $('[data-trend-filter="inputStart"], [data-trend-filter="inputEnd"]').val('');
                $('[data-chart="trend"] .l-form').removeClass('is-error');
                getParams();
            });
            $('[data-trend-filter="submit"]').on('click', function (e) {
                if (required($('[data-trend-filter="inputStart"]')) && required($('[data-trend-filter="inputEnd"]')) && dateRange()) {
                    $('[data-trend-filter="dateRange"]').prop('checked', false);
                    getParams();
                }
            });
            $('[data-trend-filter="trend"]:checked').trigger('change');
            var chart;

            function required($element) {
                const requiredMsg = '欄位必填';
                let $parents = $element.closest('.l-form');
                let $msg = $parents.find('.o-errorText');
                let isEmpty = $element.val().trim() == '';
                $parents.toggleClass('is-error', isEmpty);
                $msg.text(isEmpty ? requiredMsg : '');
                return !isEmpty;
            }

            function dateRange() {
                const dateRangeMsg = '起訖日期區間錯誤';
                let $inputStart = $('[data-trend-filter="inputStart"]');
                let $inputEnd = $('[data-trend-filter="inputEnd"]');
                let startDate = new Date($inputStart.val());
                let endDate = new Date($inputEnd.val());
                let $startParents = $inputStart.closest('.l-form');
                let $endParents = $inputEnd.closest('.l-form');
                if (endDate < startDate) {
                    $startParents.addClass('is-error');
                    $endParents.addClass('is-error');
                    $startParents.find('.o-errorText').text(dateRangeMsg);
                    return false;
                } else {
                    $startParents.removeClass('is-error');
                    $endParents.removeClass('is-error');
                    $startParents.find('.o-errorText').text('');
                    return true;
                }
            }

            function getParams() {
                const obj = {
                    trend: $('[data-trend-filter="trend"]:checked').val(),
                    range: $('[data-trend-filter="dateRange"]:checked').length > 0 ? $('[data-trend-filter="dateRange"]:checked').val() : "custom",
                    startdate: $('[data-trend-filter="inputStart"]').val(),
                    enddate: $('[data-trend-filter="inputEnd"]').val(),
                };

                let today = new Date();
                function CalDateRange(month) {
                    let set = new Date().setMonth(new Date().getMonth() - month);
                    let setDate = new Date(set);
                    return setDate.getFullYear() + "-" + ((setDate.getMonth()  + 1) < 10 ? "0"+ (setDate.getMonth()  + 1) : (setDate.getMonth()  + 1))+ "-" + setDate.getDate();
                }
                if (!obj.startdate && !obj.enddate) {
                    switch (obj.range) {
                        case 'sinceYear':
                            obj.startdate = today.getFullYear() + "-" + "01-01";
                            obj.enddate = today.toISOString().split('T')[0];
                            break;
                        case '3m':
                            obj.startdate = CalDateRange(3)
                            obj.enddate = today.toISOString().split('T')[0];
                            break;
                        case '6m':
                            obj.startdate = CalDateRange(6)
                            obj.enddate = today.toISOString().split('T')[0];
                            break;
                        case '12m':
                            obj.startdate = CalDateRange(12);
                            obj.enddate = today.toISOString().split('T')[0];
                            break;
                        case '24m':
                            obj.startdate = CalDateRange(24);
                            obj.enddate = today.toISOString().split('T')[0];
                            break;
                            case '36m':
                            obj.startdate = CalDateRange(36);
                            obj.enddate = today.toISOString().split('T')[0];
                            break;
                        case '60m':
                            obj.startdate = CalDateRange(60);
                            obj.enddate = today.toISOString().split('T')[0];
                            break;
                        case 'establishment':
                            obj.startdate = $('span[data-establishmentDate]').text().replaceAll('/', '-');
                            obj.enddate = today.toISOString().split('T')[0];
                            break;
                    }
                     $('[data-trend-filter="inputStart"]').val(obj.startdate.replaceAll('-', '/'));
                     $('[data-trend-filter="inputEnd"]').val(obj.enddate.replaceAll('-', '/'));
                     $('[data-trend-filter="inputStart"]').datepicker('setDate',obj.startdate.replaceAll('-', '/'));
                     $('[data-trend-filter="inputEnd"]').datepicker('setDate',obj.enddate.replaceAll('-', '/'));
                } else {
                    obj.startdate = obj.startdate.replaceAll('/', '-');
                    obj.enddate = obj.enddate.replaceAll('/', '-');
                }
                if (chart) {
                    chart.showLoading();
                }
                let text = "";
                switch (obj.trend) {

                    case "ori":
                        text = "績效(原幣)"
                        break;
                    case "twd":
                        text = "績效(台幣)"
                        break;
                    case "netWorth":
                        text = "淨值"
                        break;
                }

                initTrendChart(obj, text);
            }
              function roundToTwo(num) {
                return +(Math.round(num + 'e+2') + 'e-2');
                }
            async function initTrendChart(obj, text) {
                try {
                    /*
                     * API參數
                     * id: 基金代號：請替換成實際基金的id
                     * trend: 績效(原幣)、(台幣)、淨值
                     * range: 區間
                     * startDate: 自訂開始日期
                     * endDate: 自訂結束日期
                     */
                    const params = {
                        fundId: fundId,
                        ...obj
                    };
                    $.ajax({
                        url: '@FundReturnAndNetValueApiUrl',
                        method: 'post',
                        data: params,
                        success: function (data) {
                            let mapData = [];
                            if (Object.keys(data.resultSet.result).length != 0) {
                                 mapData = data.resultSet.result.map(item => {
                                    return {
                                        x: new Date(item.v1).getTime(),
                                        name: item.v1,
                                        y: roundToTwo(item.v2)
                                    };
                                });
                                mapData.reverse();
                            }
                                //const updateDate = data.body.updateDate.replaceAll('-', '/');
                                //// 資料日期
                                //$('[data-update-date="trend"]').text(updateDate);
                                let series = {
                                    name: text,
                                    data: mapData,
                                    legendSymbol: 'rectangle',
                                    color: obj.netWorth ? '#A4844E' : '#238C6C',
                                    turboThreshold: 0,
                                };
                                chart = Highcharts.stockChart('trendChart', {
                                    chart: {
                                        zooming: {
                                            mouseWheel: {
                                                enabled: false
                                            }
                                        },
                                        height: 280
                                    },
                                    credits: {
                                        enabled: false
                                    },
                                    title: {
                                        text: ''
                                    },
                                    scrollbar: {
                                        enabled: false
                                    },
                                    navigator: {
                                        enabled: false
                                    },
                                    rangeSelector: {
                                        enabled: false
                                    },
                                    legend: {
                                        enabled: true,
                                        align: 'left',
                                        floating: false,
                                        y: 20,
                                        itemStyle: {
                                            fontSize: '1em',
                                            color: '#222',
                                            cursor: 'default'
                                        },
                                        itemHoverStyle: {
                                            color: '#222'
                                        },
                                        symbolHeight: 12,
                                        symbolWidth: 12
                                    },
                                    plotOptions: {
                                        series: {
                                            dataGrouping: {
                                                enabled: false
                                            },
                                            states: {
                                                hover: {
                                                    enabled: true,
                                                    lineWidth: 2,
                                                    halo: {
                                                        size: 8
                                                    }
                                                }
                                            },
                                            events: {
                                                legendItemClick: function () {
                                                    return false;
                                                }
                                            }
                                        }
                                    },
                                    tooltip: {
                                        split: false,
                                        useHTML: true,
                                        formatter: function () {
                                            var percentage = obj.trend =="netWorth" ? '' : '%';
                                            const tooltip = '<div style="font-size: 14px">' + '<div style="margin-bottom: 8px; color: #9C9C9C">' + Highcharts.dateFormat('%Y/%m/%d', this.point.x) + '</div>' + '<span style="display:inline-block; color: ' + this.point.color + '; font-size: 18px; margin-right: 3px">\u25CF</span>' + this.point.series.name + ': ' + this.point.y + percentage + '</div>';
                                            return tooltip;
                                        },
                                        shadow: {
                                            color: 'rgba(0, 0, 0, 0.1)'
                                        }
                                    },
                                    xAxis: {
                                        type: 'datetime',
                                        tickPosition: 'inside',
                                        tickWidth: 0.5,
                                        tickLength: 7,
                                        labels: {
                                            formatter: function () {
                                                const format = {
                                                    day: '%Y/%m',
                                                    week: '%Y/%m',
                                                    month: '%Y/%m',
                                                    year:'%Y/%m'
                                                }[this.tickPositionInfo.unitName];
                                                return Highcharts.dateFormat(format, this.value);
                                            },
                                            style: {
                                                color: '#6e6e6e'
                                            }
                                        },
                                        crosshair: {
                                            width: 1,
                                            color: '#c3c3c3'
                                        },
                                        lineColor: '#ebebeb',
                                        tickColor: '#ebebeb'
                                    },
                                    yAxis: {
                                        showLastLabel: true,
                                        opposite: false,
                                        labels: {
                                            y: 4,
                                            formatter: function (value) {
                                                let percentage = obj.trend == "netWorth" ? '' : '%';
                                                return value.value + percentage;
                                            },
                                            style: {
                                                color: '#6e6e6e'
                                            }
                                        },
                                        plotLines: [{
                                            color: '#c3c3c3'
                                        }]
                                    },
                                    series: [series]
                                });
                                $('[data-chart="trend"]').find('.c-empty').addClass('u-hidden');
                                $('[data-chart="trend"]').find('.c-chartBox, .l-dataNotes').removeClass('u-hidden');

                        },
                        error: function (err) {
                            $('[data-chart="trend"]').find('.c-empty').removeClass('u-hidden');
                            $('[data-chart="trend"]').find('.c-chartBox, .l-dataNotes').addClass('u-hidden');
                            console.log(err)
                        },
                    });


                } catch (error) {
                    console.error('Error:', error);
                }
            }
        });
                })(jQuery, window, document);
</script>

<script defer>
                    (function ($, window, document, undefined) {

        // 基金詳細頁 – 持股狀況 - 產業
        // 基金詳細頁 – 持股狀況 - 區域
        document.addEventListener('DOMContentLoaded', function () {
            if (!jQuery) {
                return;
            }
            var chart = Highcharts.chart('soChart', {
                credits: {
                    enabled: false
                },
                title: {
                    text: ''
                },
                legend: {
                    enabled: false
                },
                xAxis: {
                    type: 'category',
                    lineColor: '#ebebeb',
                    labels: {
                        style: {
                            color: '#6e6e6e',
                            fontSize: '1em'
                        }
                    }
                },
                yAxis: {
                    tickPixelInterval: 150,
                    max: 100,
                    lineColor: '#ebebeb',
                    title: {
                        text: null
                    },
                    labels: {
                        style: {
                            color: '#6e6e6e'
                        },
                        formatter: function () {
                            return this.value + '%';
                        }
                    }
                },
                tooltip: {
                    enabled: false
                },
                plotOptions: {
                    series: {
                        animation: false,
                        groupPadding: 0,
                        pointPadding: 0.2,
                        borderWidth: 0,
                        colorByPoint: true,
                        type: 'bar',
                        dataLabels: [{
                            enabled: true,
                            useHTML: true,
                            formatter: function () {
                                return '<div style="color:#6e6e6e; font-weight: 400;">' + this.point.y + '%</div>';
                            }
                        }],
                        states: {
                            hover: {
                                brightness: 0,
                                halo: {
                                    size: 0
                                }
                            },
                            inactive: {
                                opacity: 1
                            }
                        },
                        events: {
                            legendItemClick: function () {
                                return false;
                            }
                        }
                    }
                },
                responsive: {
                    rules: [{
                        condition: {
                            maxWidth: 375
                        },
                        chartOptions: {
                            xAxis: {
                                visible: false
                            },
                            yAxis: {
                                showFirstLabel: true,
                                tickPixelInterval: 80
                            },
                            plotOptions: {
                                series: {
                                    pointPadding: 0.1,
                                    dataLabels: [{
                                        enabled: true,
                                        useHTML: false,
                                        format: '{point.y}%',
                                        y: 8,
                                        style: {
                                            fontWeight: 400,
                                            opacity: 0.7
                                        }
                                    }, {
                                        enabled: true,
                                        useHTML: false,
                                        format: '{point.name}',
                                        y: -8,
                                        style: {
                                            fontWeight: 400,
                                            opacity: 0.7
                                        }
                                    }]
                                }
                            }
                        }
                    }]
                },
                series: [{
                    type: 'bar',
                    colorByPoint: true
                }]
            });
            let mapIndustryData = [];
            let industryUpdateDate =[];
            let mapAreaData=[];
            let areaUpdateDate=[];
            async function initShareholding() {
                try {


                    const industryData =  @Html.Raw(JsonHelper.SerializeObjectWithEscapeHtml(Model.FundStockHoldings));
                    if(industryData.length > 0){
                    mapIndustryData = industryData.map((item, index) => {
                        return {
                            ...item,
                            name: item.Category,
                            y: item.Holding
                        };
                    });

                    industryUpdateDate = industryData[0].Date;
                    }

                    const areaData = @Html.Raw(JsonHelper.SerializeObjectWithEscapeHtml(Model.FundStockAreaHoldings));
                    if(areaData.length > 0){
                    mapAreaData = areaData.map((item, index) => {
                        return {
                            ...item,
                            name: item.Category,
                            y: item.Holding
                        };
                    });
                    areaUpdateDate = areaData[0].Date;
                    }
                    $('[name="so1"]:checked').trigger('change');
                } catch (error) {
                    console.error('Error:', error);
                }
            }
            $('[name="so1"]').on('change', function () {
                let data = [],
                    updateDate = '';
                if (this.value == 'industry') {
                    data = JSON.parse(JSON.stringify(mapIndustryData));
                    updateDate = industryUpdateDate;
                } else if (this.value == 'area') {
                    data = JSON.parse(JSON.stringify(mapAreaData));
                    updateDate = areaUpdateDate;
                }
                if (data.length != 0) {
                    chart.series[0].update({
                        type: 'bar',
                        colorByPoint: true,
                        data: data
                    });
                    $('[data-update-date="so1"]').text(updateDate);
                    $('[data-chart="so1"]').find('.c-empty').addClass('u-hidden');
                    $('[data-chart="so1"]').find('.c-chartBox, .l-dataNotes').removeClass('u-hidden');
                }else
                {
                    $('[data-update-date="so1"]').text('-');
                    $('[data-chart="so1"]').find('.c-empty').removeClass('u-hidden');
                    $('[data-chart="so1"]').find('.c-chartBox, .l-dataNotes').addClass('u-hidden');

                }
            });
                    initShareholding();

        });
                    })(jQuery, window, document);
</script>



<script defer>
                        (function ($, window, document, undefined) {

        // 基金詳細頁 – 風險指標 - 風險象限圖
        document.addEventListener('DOMContentLoaded', function () {

            if (!jQuery) {
                return;
            }
            $('[data-quadrant="type"]').on('change', function () {
                let type = this.value;
                let year = $('[data-quadrant="year"]').val();
                initRisk(type, year);
            });
            $('[data-quadrant="year"]').on('change', function () {
                let type = $('[data-quadrant="type"]').val();
                let year = this.value;
                initRisk(type, year);
            });
            let type = $('[data-quadrant="type"]').val();
            let year = $('[data-quadrant="year"]').val();
            initRisk(type, year);
            var chart;
            function ConvertNaNToZero(num) {
                return isNaN(num) ? 0 : num;
            }
                function roundToTwo(num) {
                return +(Math.round(num + 'e+2') + 'e-2');
                }
            // 風險象限圖
            async function initRisk(type, year) {
                try {
                    const params = {
                        fundId: fundId,
                        selectType: type,
                    };
                    if (chart) {
                        chart.showLoading();
                    }

                    // 呼叫 API 基金詳細頁 – 風險指標 - 風險象限圖
                    let data = [];
                    $.ajax({
                        url: '@FundRiskApiUrl',
                        method: 'post',
                        data: params,
                        success: function (res) {
                           data = res;
                           let rateField = "";
                           let standardField="";
                           switch(year)
                           {
                               case "1":
                                rateField = "oneYearReturnOriginalCurrency";
                                standardField ="oneYearStandardDeviation";
                                break;
                               case "2":
                                rateField = "twoYearReturnOriginalCurrency";
                                standardField ="twoYearStandardDeviation";
                                break;
                               case "3":
                                rateField = "threeYearReturnOriginalCurrency";
                                standardField ="threeYearStandardDeviation";
                                break;
                           }
                         if (Object.keys(data.body).length != 0) {
                             let mapData = data.body.map((item, index) => {
                            return {
                                id: item.firstBankCode,
                                name: item.firstBankCode + item.fundName,
                                x: roundToTwo(item[standardField]),
                                y: roundToTwo(item[rateField])
                            };
                        });
                        //刪除自己基金資料
                             mapData.splice(mapData.findIndex(x => x.id == fundId),1);
                             const selfData = data.body.filter((item) => item.firstBankCode == fundId);
                        const otherData = {
                            id: 'group',
                            name: '同類型基金',
                            color: '#A4844E',
                            data: mapData
                        };

                        // 同類型基金標準差, 報酬率總和
                        const total = mapData.reduce((curr, prev) => {
                            return {
                                x: curr.x + ConvertNaNToZero(prev.x),
                                y: curr.y + ConvertNaNToZero(prev.y)
                            };
                        }, {
                            x: 0,
                            y: 0
                        });

                        // 本基金 + 同類型基金平均值
                             total.x = (total.x + selfData[0][standardField]) / data.body.length + 1;
                             total.y = (total.y + selfData[0][rateField]) / data.body.length + 1;
                        const zh = ['零', '一', '二', '三', '四', '五', '六', '七', '八', '九'];
                        chart = Highcharts.chart('riskChart', {
                            chart: {
                                type: "scatter",
                                zooming: {
                                    mouseWheel: {
                                        enabled: false
                                    }
                                },
                                height: 446
                            },
                            credits: {
                                enabled: false
                            },
                            title: {
                                text: ''
                            },
                            subtitle: {
                                text: ''
                            },
                            xAxis: {
                                title: {
                                    text: '標準差%'
                                },
                                startOnTick: true,
                                endOnTick: true,
                                showLastLabel: true,
                                crosshair: {
                                    snap: false,
                                    label: {
                                        enabled: false
                                    }
                                },
                                plotLines: [{
                                    value: total.x,
                                    width: 1,
                                    color: "red",
                                    acrossPanes: false
                                }],
                                gridLineWidth: 1,
                                lineColor: '#ebebeb',
                                tickColor: '#ebebeb',
                                tickPosition: 'inside',
                                labels: {
                                    style: {
                                        color: '#6e6e6e'
                                    }
                                }
                            },
                            yAxis: {
                                title: {
                                    text: `${zh[year]} 年 報 酬 率`,
                                    offset: 0,
                                    margin: 0,
                                    style: {
                                        writingMode: 'vertical-lr',
                                        transform: 'rotate(0deg)'
                                    }
                                },
                                crosshair: {
                                    snap: false,
                                    label: {
                                        enabled: false
                                    }
                                },
                                plotLines: [{
                                    value: total.y,
                                    width: 1,
                                    color: "red",
                                    acrossPanes: false
                                }],
                                gridLineWidth: 1,
                                lineColor: '#ebebeb',
                                tickColor: '#ebebeb',
                                labels: {
                                    y: 4,
                                    style: {
                                        color: '#6e6e6e'
                                    }
                                }
                            },
                            legend: {
                                enabled: true,
                                align: 'left',
                                itemStyle: {
                                    fontSize: '1em',
                                    color: '#222',
                                    cursor: 'default'
                                },
                                itemHoverStyle: {
                                    color: '#222'
                                }
                            },
                            plotOptions: {
                                scatter: {
                                    marker: {
                                        symbol: 'circle',
                                        states: {
                                            hover: {
                                                enabled: true,
                                                fillColor: '#F58220',
                                                radius: 5
                                            }
                                        }
                                    },
                                    states: {
                                        hover: {
                                            enabled: true,
                                            halo: {
                                                attributes: {
                                                    fill: '#F58220'
                                                },
                                                opacity: 0.2,
                                                size: 8
                                            }
                                        },
                                        inactive: {
                                            enabled: false
                                        }
                                    }
                                },
                                series: {
                                    events: {
                                        legendItemClick: function () {
                                            return false;
                                        }
                                    }
                                }
                            },
                            tooltip: {
                                split: false,
                                useHTML: true,
                                formatter: function () {
                                    const tooltip = '<div style="font-size: 14px">' + '<div style="font-weight: 700; margin-bottom: 8px;">' + this.point.name + '</div>' + '<div style="font-weight: 400; margin-bottom: 8px;">標準差：' + this.point.x + '%</div>' + '<div style="font-weight: 400;">' + zh[year] + '年報酬率：' + this.point.y + '%</div>' + '</div>';
                                    return tooltip;
                                },
                                shadow: {
                                    color: 'rgba(0, 0, 0, 0.1)'
                                },
                                style: {
                                    zIndex: 5
                                }
                            },
                            series: [{
                                id: selfData[0].firstBankCode,
                                name: selfData[0].firstBankCode + selfData[0].fundName,
                                color: '#238C6C',
                                showInLegend: true,
                                data: [{
                                    id: selfData[0].firstBankCode,
                                    name: selfData[0].firstBankCode + selfData[0].fundName,
                                    x: selfData[0][standardField],
                                    y: selfData[0][rateField]
                                }]
                            }, otherData]
                        });

                        $('[data-chart="risk"]').find('.c-empty').addClass('u-hidden');
                        $('[data-chart="risk"]').find('#riskChart').removeClass('u-hidden');
                    } else {
                        $('[data-chart="risk"]').find('.c-empty').removeClass('u-hidden');
                        $('[data-chart="risk"]').find('#riskChart').addClass('u-hidden');
                    }
                            },
                        error: function (err) {
                            $('[data-chart="risk"]').find('.c-empty').removeClass('u-hidden');
                            $('[data-chart="risk"]').find('#riskChart').addClass('u-hidden');
                             console.log(err)
                             },
                    });

                } catch (error) {
                    console.error('Error:', error);
                }
            }
        });
                        })(jQuery, window, document);
</script>



<script defer>
                            (function ($, window, document, undefined) {

            // 基金詳細頁 – 規模變動 – 規模變動圖
        document.addEventListener('DOMContentLoaded', function () {
            if (!jQuery) {
                return;
            }
            async function initRate() {
                try {
                    //千分位正規式 
                    function numberComma(num) {
                        return num.toLocaleString();
                    };
                    const data = @Html.Raw(JsonHelper.SerializeObjectWithEscapeHtml(Model.FundScaleRecords));
                    if (Object.keys(data).length != 0) {
                        let mapData = data.map((item, index) => {
                                return {
                                    x: new Date(item.ScaleDate.replaceAll('/','-')).getTime(),
                                    name: item.ScaleDate.replaceAll('/', '-'),
                                    y: item.Scale
                                };
                        });
                        mapData = mapData.filter(function (item, index, arr) {
                            return index < 12;
                        });
                        mapData.reverse();
                        const mapYearData = data.map((item) => new Date(item.ScaleDate).getFullYear()).filter(function (element, index, arr) {
                            return arr.indexOf(element) === index;
                        });
                        mapYearData.unshift("近一年");
                      $.each(mapYearData, function( index, value )
                      {
                        $('#scale_select').append($('<option>', {
                        value: value,
                        text: value
                            }));
                      });

                $('#scale_select').on('change', function ()
                {
                    let rangeData = [];
                    let range = this.value;
                    if( range != "近一年")
                    {
                        rangeData = data.filter(function (item, index, arr) {
                            return item.ScaleDate.indexOf(range) >= 0;
                        });
                    }else
                    {
                        rangeData = data.filter(function (item, index, arr) {
                            return index < 12;
                        });
                    }
                     let tbHtml = "";
                     for(let i = 0;i <rangeData.length;i++)
                     {

                         if (i === 0) {
                             tbHtml += `<div class="l-flex u-flex-gap-col-max@dt-only u-flex-col@lt u-flex-top@dt-only" data-merge-table>`;
                         }
                         if (i === 0 || i === 6)
                         {
                             let hiddenHeadClass = i===6? "u-hidden@lt":"";
                             tbHtml += `<div class="l-flex__item">
                                        <div class="l-table">
                                            <table class="c-table u-center">
                                                <colgroup>
                                                    <col style="width: 33.33%;">
                                                    <col style="width: 33.33%;">
                                                    <col style="width: 33.33%;">
                                                </colgroup>
                                                <thead class="${hiddenHeadClass}">
                                                    <tr>
                                                        <th>
                                                            <div class="c-table__title">
                                                                <span>規模日期</span>
                                                            </div>
                                                        </th>
                                                        <th>
                                                            <div class="c-table__title">
                                                                <span>規模(百萬)</span>
                                                            </div>
                                                        </th>
                                                        <th>
                                                            <div class="c-table__title">
                                                                <span>幣別</span>
                                                            </div>
                                                        </th>
                                                    </tr>
                                                </thead>
                                                <tbody>`;
                         }
                         tbHtml += ` <tr>
                                          <td>
                                               ${rangeData[i].ScaleDate}
                                                        </td>
                                                        <td>
                                                             ${numberComma(rangeData[i].Scale)}
                                                        </td>
                                                        <td>
                                                             ${rangeData[i].Currency}
                                                        </td>
                                                    </tr>`;
                         if (i === 5 || i === rangeData - 1) {
                             tbHtml += `   </tbody>
                                            </table>
                                        </div> </div>`;
                         }


                         if (i === rangeData - 1) {
                             tbHtml += `</div >`;
                         }
                    }
                    $('#scale_table').html(tbHtml);
                });
                $('#scale_select').trigger('change');
                            Highcharts.chart("scale", {
                                chart: {
                                    type: 'column'
                                },
                                credits: {
                                    enabled: false
                                },
                                title: {
                                    text: ''
                                },
                                legend: {
                                    enabled: false
                                },
                                xAxis: {
                                    type: 'datetime',
                                    tickPosition: 'inside',
                                    tickWidth: 0.5,
                                    tickLength: 7,
                                    labels: {
                                        formatter: function() {
                                            const format = {
                                                day: '%Y/%m',
                                                week: '%Y/%m',
                                                month: '%Y/%m'
                                            } [this.tickPositionInfo.unitName];
                                            return Highcharts.dateFormat(format, this.value);
                                        },
                                        style: {
                                            color: '#6e6e6e'
                                        }
                                    },
                                    lineColor: '#ebebeb',
                                    tickColor: '#ebebeb'
                                },
                                yAxis: {
                                    title: {
                                        text: '(百萬元)',
                                        align: 'low',
                                        rotation: 0,
                                        offset: 0,
                                        y: 30,
                                        x: -50
                                    },
                                    showLastLabel: true,
                                    plotLines: [{
                                        color: '#c3c3c3'
                                    }]
                                },
                                plotOptions: {
                                    series: {
                                        pointPadding: 0.1,
                                        groupPadding: 0.05,
                                        colorByPoint: false,
                                        states: {
                                            hover: {
                                                color: '#238C6C',
                                                opacity: 1
                                            }
                                        }
                                    }
                                },
                                tooltip: {
                                    split: false,
                                    useHTML: true,
                                    formatter: function() {
                                        const tooltip = '<div style="font-size: 14px">' + '<div style="margin-bottom: 8px; color: #9C9C9C">' + Highcharts.dateFormat('%Y/%m/%d', this.point.x) + '</div>' + this.point.y + '百萬元' + '</div>';
                                        return tooltip;
                                    },
                                    shadow: {
                                        color: 'rgba(0, 0, 0, 0.1)'
                                    }
                                },
                                series: [{
                                    data: mapData,
                                    color: '#A4844E',
                                    opacity: 0.9
                                }]
                            });
                            $('[data-chart="scale"]').find('.c-empty').addClass('u-hidden');
                            $('[data-chart="scale"]').find('.c-chartBox').removeClass('u-hidden');
                        }
                    } catch (error) {
                        console.error('Error:', error);
                    }
                }
                initRate();
        });
                            })(jQuery, window, document);
</script>
